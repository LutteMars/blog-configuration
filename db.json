{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","path":"fonts/default-skin.b257fa.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","path":"fonts/tooltip.4004ff.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","path":"img/scrollbar_arrow.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/preloader.gif","path":"img/preloader.gif","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/default-skin.png","path":"img/default-skin.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/js/jquery-1.7.2.min.js","path":"js/jquery-1.7.2.min.js","modified":0,"renderable":1},{"_id":"source/assets/atom.xml","path":"assets/atom.xml","modified":0,"renderable":0},{"_id":"source/assets/img/1.jpeg","path":"assets/img/1.jpeg","modified":0,"renderable":0},{"_id":"source/assets/img/personalimage.jpeg","path":"assets/img/personalimage.jpeg","modified":0,"renderable":0},{"_id":"themes/yilia/source/main.0cf68a.css","path":"main.0cf68a.css","modified":0,"renderable":1},{"_id":"themes/yilia/source/slider.e37972.js","path":"slider.e37972.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/main.0cf68a.js","path":"main.0cf68a.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/mobile.992cbe.js","path":"mobile.992cbe.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.16acc2.ttf","path":"fonts/iconfont.16acc2.ttf","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.45d7ee.svg","path":"fonts/iconfont.45d7ee.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.8c627f.woff","path":"fonts/iconfont.8c627f.woff","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.b322fa.eot","path":"fonts/iconfont.b322fa.eot","modified":0,"renderable":1}],"Cache":[{"_id":"themes/yilia/.babelrc","hash":"b1b76475ac17dc9e2fa50af96c9e31eea2d0f2b4","modified":1491993293000},{"_id":"themes/yilia/.editorconfig","hash":"da6d022b8f4d9c961e2f8f80677e92af8de0db4d","modified":1491993293000},{"_id":"themes/yilia/.eslintignore","hash":"df0a50b13cc00acb749226fee3cee6e0351fb1d9","modified":1491993293000},{"_id":"themes/yilia/.eslintrc.js","hash":"5696ae049de010ed3786768b0c359f14c05b5ec6","modified":1491993293000},{"_id":"themes/yilia/.gitattributes","hash":"e0f24dceeb1e6878a1dd9b01a2b9df1bc037a867","modified":1491993293000},{"_id":"themes/yilia/.gitignore","hash":"9c4b7d27a1e3e5efa0c8ed143a032a85d586b03b","modified":1491993293000},{"_id":"themes/yilia/README.md","hash":"1bf755806af9d8874bd22e1abbdaaa24328ef4dc","modified":1510675760000},{"_id":"themes/yilia/_config.yml","hash":"4381c1a46879bb9b40a0cbbe3e8354107fe84c5c","modified":1619342563266},{"_id":"themes/yilia/npm-debug.log","hash":"f621c44f262a780e945f0d0350df96ce7f4e881b","modified":1492333744000},{"_id":"themes/yilia/package.json","hash":"367cb9579d35968a942c243ab248a5f5ebfaf462","modified":1510675760000},{"_id":"themes/yilia/webpack.config.js","hash":"05ba46a4ae744272f5312e684928910dccad3755","modified":1510675760000},{"_id":"source/_posts/markdown语法总结.md","hash":"f379b1cac3610eb1758e90f9dc4e19790c07d6ad","modified":1492625712000},{"_id":"source/_posts/hello-world.md","hash":"8a02477044e2b77f1b262da2c48c01429e4a32e4","modified":1491991959000},{"_id":"source/_posts/标签测试.md","hash":"dbb74eb2d4adcbfe1b63843e91ef248ec01dbaf4","modified":1492276455000},{"_id":"source/_posts/照片文章测试.md","hash":"a345e81e2cee2fce27d09db43fd8944168130bf7","modified":1492090809000},{"_id":"themes/yilia/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1491993293000},{"_id":"themes/yilia/.git/config","hash":"256e47c5a4386e6881318e44d2a716fdc3197863","modified":1491993293000},{"_id":"themes/yilia/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1491993279000},{"_id":"themes/yilia/.git/index","hash":"768a081e4d4d8c48efc941acdc08b54ed19e5186","modified":1491998050000},{"_id":"themes/yilia/.git/packed-refs","hash":"b6eeb896a3f4623199f59a97d377a41b5b862a12","modified":1491993293000},{"_id":"themes/yilia/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1483136188000},{"_id":"themes/yilia/img/overlaybgimg.jpeg","hash":"d50d0769cedadb1a00e8c9db8db4220de0771fbd","modified":1492181942000},{"_id":"themes/yilia/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1483136188000},{"_id":"themes/yilia/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1483136188000},{"_id":"themes/yilia/img/scrolldown1.png","hash":"e7d97ef34e2cdd1670a47c7023a51621f42250cd","modified":1492185689000},{"_id":"themes/yilia/img/scrollup.png","hash":"970dd83b781cffb7ec5e8f99ae7e6adf47b066e9","modified":1492440835000},{"_id":"themes/yilia/languages/default.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1491993293000},{"_id":"themes/yilia/languages/fr.yml","hash":"84ab164b37c6abf625473e9a0c18f6f815dd5fd9","modified":1491993293000},{"_id":"themes/yilia/img/scrollup1.png","hash":"1dbae29db1039c5f86b5af2c7640109c42f72988","modified":1492075994000},{"_id":"themes/yilia/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1491993293000},{"_id":"themes/yilia/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1491993293000},{"_id":"themes/yilia/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1491993293000},{"_id":"themes/yilia/languages/zh-CN.yml","hash":"ca40697097ab0b3672a80b455d3f4081292d1eed","modified":1491993293000},{"_id":"themes/yilia/languages/zh-tw.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1491993293000},{"_id":"themes/yilia/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1491993293000},{"_id":"themes/yilia/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1510675760000},{"_id":"themes/yilia/layout/index.ejs","hash":"a35dc900203f9d8dd863ea4c1722198d6d457ec8","modified":1491993293000},{"_id":"themes/yilia/layout/layout.ejs","hash":"a20080500d7559b8827f75a2ae8f19b284659f99","modified":1619335237306},{"_id":"themes/yilia/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1491993293000},{"_id":"themes/yilia/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1491993293000},{"_id":"themes/yilia/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1491993293000},{"_id":"themes/yilia/source/main.05aabf.css","hash":"01f0737bbad33797a1ffa428c0e8bf5a6c14ad8d","modified":1492963205000},{"_id":"themes/yilia/source/mobile.40e320.js","hash":"cddc2fb9b2df3eee0c0e9d0cb937f9e54429970d","modified":1491993293000},{"_id":"themes/yilia/source/mobile.50f873.js","hash":"ad2dcc7bd6eac355e0262b353ab8c96bc159a9dc","modified":1491993293000},{"_id":"themes/yilia/source/slider.885efe.js","hash":"1f1a6548c6016cc132bf65a1701cc8421a1f8414","modified":1491993293000},{"_id":"themes/yilia/source-src/css.ejs","hash":"94dbdb02ca11849e415d54fb28546a598f2cffb1","modified":1491993293000},{"_id":"themes/yilia/source-src/npm-debug.log","hash":"73cdd345db9b3ed5d904908b3a6dafab77a4a6fb","modified":1492333700000},{"_id":"themes/yilia/source-src/script.ejs","hash":"c21381e1317db7bb157f1d182b8c088cb7cba411","modified":1491993293000},{"_id":"themes/yilia/source/main.05aabf.js","hash":"988c141a741441812bcf4c408ef530d7a01522f3","modified":1491993293000},{"_id":"themes/yilia/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1491993279000},{"_id":"themes/yilia/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1491993279000},{"_id":"themes/yilia/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1491993279000},{"_id":"themes/yilia/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1491993279000},{"_id":"themes/yilia/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1491993279000},{"_id":"themes/yilia/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1491993279000},{"_id":"themes/yilia/.git/hooks/pre-rebase.sample","hash":"5885a56ab4fca8075a05a562d005e922cde9853b","modified":1491993279000},{"_id":"themes/yilia/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1491993279000},{"_id":"themes/yilia/.git/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1491993279000},{"_id":"themes/yilia/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1491993279000},{"_id":"themes/yilia/.git/logs/HEAD","hash":"6b952b711900eef506797a75adeb2e251b2baa59","modified":1491993293000},{"_id":"themes/yilia/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1491993279000},{"_id":"themes/yilia/layout/_partial/after-footer.ejs","hash":"b86b248720ad415ec1b5fee53fb583776c776f83","modified":1510675760000},{"_id":"themes/yilia/layout/_partial/archive-post.ejs","hash":"1f7d4819b7f67602c4a1b99871808d2160b60978","modified":1491993293000},{"_id":"themes/yilia/layout/_partial/archive.ejs","hash":"a6e94061ac55b9eb55275f87b608d62f6ea35659","modified":1491993293000},{"_id":"themes/yilia/layout/_partial/article.ejs","hash":"630c6ec866d056657d3d91e34b4c64eb993c0654","modified":1510675760000},{"_id":"themes/yilia/layout/_partial/baidu-analytics.ejs","hash":"f0e6e88f9f7eb08b8fe51449a8a3016273507924","modified":1491993293000},{"_id":"themes/yilia/layout/_partial/comment.ejs","hash":"e1b14e8fec4ebfae64fc8c3cc2f88ff771c8c2b6","modified":1492242073000},{"_id":"themes/yilia/layout/_partial/footer.ejs","hash":"3ed98f987fe54366d5d82421e59a060a14c0e86f","modified":1619335776054},{"_id":"themes/yilia/layout/_partial/css.ejs","hash":"236f8a377b2e4e35754319c3029bcd4a4115431d","modified":1510675760000},{"_id":"themes/yilia/layout/_partial/google-analytics.ejs","hash":"f921e7f9223d7c95165e0f835f353b2938e40c45","modified":1491993293000},{"_id":"themes/yilia/layout/_partial/header.ejs","hash":"6387a93dad7c3d778eb91e3821852fbf6813880c","modified":1491993293000},{"_id":"themes/yilia/layout/_partial/head.ejs","hash":"64f092186b5a744aa1603ce22bb1d44a34446add","modified":1491993293000},{"_id":"themes/yilia/layout/_partial/left-col.ejs","hash":"183d7ca4ba8e7c80694ffdc8cf39957092238346","modified":1510675760000},{"_id":"themes/yilia/layout/_partial/mathjax.ejs","hash":"151a1ef2173ba7b6789d349f0f8da89616cc1394","modified":1491993293000},{"_id":"themes/yilia/layout/_partial/mobile-nav.ejs","hash":"7fbbfabf5e29525b24ada14613c21a26789132b4","modified":1491993293000},{"_id":"themes/yilia/layout/_partial/script.ejs","hash":"4cb685f07e89dd5175c2a576e73a1a957aec5637","modified":1510675760000},{"_id":"themes/yilia/layout/_partial/tools.ejs","hash":"c41341b9618e591538e1136a2d1637587c1bbd90","modified":1510675760000},{"_id":"themes/yilia/layout/_partial/totop.ejs","hash":"3f3d2d8955322f325af6db2238355fa07007ebd9","modified":1492614931000},{"_id":"themes/yilia/layout/_partial/viewer.ejs","hash":"e495790b2abe2290875817e42bd505bc611d3e26","modified":1491993293000},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","hash":"2ac727c9e092331d35cce95af209ccfac6d4c7c7","modified":1491993293000},{"_id":"themes/yilia/source/fonts/iconfont.3a9902.eot","hash":"51d4e8d333ae7867915037983ea5d4b2ad971930","modified":1491993293000},{"_id":"themes/yilia/source/fonts/iconfont.6e162c.woff","hash":"709373d566526ad4bdb330757a3915e3c5e37b66","modified":1491993293000},{"_id":"themes/yilia/source/fonts/iconfont.9abe9f.svg","hash":"772383b62548e2a4fa560d589e05929b9f6f7f7b","modified":1491993293000},{"_id":"themes/yilia/source/fonts/iconfont.d0da7e.ttf","hash":"53ea5a5027a2fab93bcdad18cad6dc5f1b728726","modified":1491993293000},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1491993293000},{"_id":"themes/yilia/source/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1491993293000},{"_id":"themes/yilia/source/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1491993293000},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1491993293000},{"_id":"themes/yilia/source/img/scrolldown.png","hash":"e7d97ef34e2cdd1670a47c7023a51621f42250cd","modified":1492185689000},{"_id":"themes/yilia/source/img/scrollup.png","hash":"1dbae29db1039c5f86b5af2c7640109c42f72988","modified":1492075994000},{"_id":"themes/yilia/source/img/scrollup1.png","hash":"bb5b5799cea340df370100090f89415374cbc2e4","modified":1492075322000},{"_id":"themes/yilia/source-src/css/_core.scss","hash":"24f347a2412abbf58318369152504da9538f8d3b","modified":1491993293000},{"_id":"themes/yilia/source-src/css/_function.scss","hash":"93a50dd19a93485712da1f8d0a1672482dd1eabc","modified":1491993293000},{"_id":"themes/yilia/source-src/css/archive.scss","hash":"7d27e22ac898e8fafec14549e940c73cbea1fba8","modified":1491993293000},{"_id":"themes/yilia/source-src/css/article-inner.scss","hash":"d79f2d35a06de83a2a226ca790b7a0a34789c115","modified":1510675760000},{"_id":"themes/yilia/source-src/css/article-main.scss","hash":"3fad68bd74260326f83090b0974dd80707e7bac7","modified":1492240671000},{"_id":"themes/yilia/source-src/css/article-nav.scss","hash":"43e507f2a48504079afd9471353337e23ca47470","modified":1510675760000},{"_id":"themes/yilia/source-src/css/article.scss","hash":"0f6d61af99ed4db87f8589db1feaea7747b55963","modified":1510675760000},{"_id":"themes/yilia/source-src/css/duoshuo.scss","hash":"5e3feefbbba70d8da0ec2c75db41762dd4762a81","modified":1492259484000},{"_id":"themes/yilia/source-src/css/fonts.scss","hash":"97b8fba41c914145710b90091f400b845879577f","modified":1510675760000},{"_id":"themes/yilia/source-src/css/footer.scss","hash":"7c995410b25baaf61dfc5e148e22ca60330abcd3","modified":1491993293000},{"_id":"themes/yilia/source-src/css/global.scss","hash":"b4cb4f45a55d4250cd9056f76dab2a3c0dabcec4","modified":1491993293000},{"_id":"themes/yilia/source-src/css/grid.scss","hash":"849a29fcd7150214fcf7b9715fa5dc71d1f9b896","modified":1491993293000},{"_id":"themes/yilia/source-src/css/highlight.scss","hash":"3719994c2c9393813cc1d42b657205c368a329cb","modified":1491993293000},{"_id":"themes/yilia/source-src/css/left.scss","hash":"0d30c0e7cdb831c3881a017006c782f2214ac195","modified":1510675760000},{"_id":"themes/yilia/source-src/css/main.scss","hash":"2f86a014af93583caba78a563d9549826bf28294","modified":1510675760000},{"_id":"themes/yilia/source-src/css/mobile-slider.scss","hash":"f053c609d84df0dd9eee1d11ddf0c19163a456be","modified":1491993293000},{"_id":"themes/yilia/source-src/css/mobile.scss","hash":"ace041d72f95b419f6a5e443191703c2b62007f4","modified":1510675760000},{"_id":"themes/yilia/source-src/css/overlay-button.png","hash":"6c61adc3becec3a8dcd5c9b30642da6d51f151b8","modified":1481286482000},{"_id":"themes/yilia/source-src/css/page.scss","hash":"bf206bb7f7d0967bc8b7fdf01b7ffc99aff9ba88","modified":1491993293000},{"_id":"themes/yilia/source-src/css/reward.scss","hash":"80a4fcf9171d4a33235da96ac8a2b7dcabc45dfb","modified":1491993293000},{"_id":"themes/yilia/source-src/css/share.scss","hash":"150c6425f6582e7ec78a873256ce49c9930e8805","modified":1491993293000},{"_id":"themes/yilia/source-src/css/scroll.scss","hash":"9c8dfd1c76854ef063494ca76fac6360b391ed6d","modified":1491993293000},{"_id":"themes/yilia/source-src/css/social.scss","hash":"724162ccf3977e70a45d189abfaa20b6e2fba87b","modified":1510675760000},{"_id":"themes/yilia/source-src/css/tags-cloud.scss","hash":"c8aa84fca93862d3caae77c552873b8610f33327","modified":1510675760000},{"_id":"themes/yilia/source-src/css/tags.scss","hash":"ac67a3c7097849206244db9b0ba91daaba017ef5","modified":1510675760000},{"_id":"themes/yilia/source-src/css/tools.scss","hash":"1b1aa0908e58cf942b28e3881d07c5573c4129e1","modified":1510675760000},{"_id":"themes/yilia/source-src/css/tooltip.scss","hash":"53d5a554bc2f38e9bb3d26400a47767013c05216","modified":1491993293000},{"_id":"themes/yilia/source-src/js/anm.js","hash":"4a4c5d82b09a3063f91a434388e6aa064fd7fd98","modified":1491993293000},{"_id":"themes/yilia/source-src/js/main.js","hash":"3894e60827c817319e43c9ff3ed045fc3d7336ce","modified":1510675760000},{"_id":"themes/yilia/source-src/js/browser.js","hash":"04095b38cfd4316a23f8eb14b1ffaf95f78a4260","modified":1491993293000},{"_id":"themes/yilia/source-src/js/fix.js","hash":"d6782d53c992e712af39c84e804eccaf38830b94","modified":1510675760000},{"_id":"themes/yilia/source-src/js/Q.js","hash":"d011af172064b6c6e0c7051d8f9879373ddac113","modified":1491993293000},{"_id":"themes/yilia/source-src/js/mobile.js","hash":"4d823b039fd296d24a454eae5a798b93c44560cb","modified":1491993293000},{"_id":"themes/yilia/source-src/js/report.js","hash":"4f1d9a18a936ce40b037f636a39127dd19175b6e","modified":1491993293000},{"_id":"themes/yilia/source-src/js/share.js","hash":"b090f82cf80cba7da764753906d9e2cc2acdf30d","modified":1491993293000},{"_id":"themes/yilia/source-src/js/slider.js","hash":"e846bcc5aac9c68b93f7b8de353df54d8d29f666","modified":1510675760000},{"_id":"themes/yilia/source-src/js/util.js","hash":"8456e9d6b19532742582c99b2fb9d09e146e1c58","modified":1491993293000},{"_id":"themes/yilia/source-src/js/viewer.js","hash":"2577deb6a9fe4f5436360b2ce9afcc7f9a7f0116","modified":1510675760000},{"_id":"themes/yilia/source/js/jquery-1.7.2.min.js","hash":"abcd2ba13348f178b17141b445bc99f1917d47af","modified":1481285770000},{"_id":"themes/yilia/.git/objects/pack/pack-0424772edcb8f7b38d8dad852157168262f15383.idx","hash":"789bb652637c4f8fd0b783e68d5639e783563c68","modified":1491993293000},{"_id":"themes/yilia/.git/refs/heads/master","hash":"e3cc4ae7e9e4f2a08cceb9d861469812293cff24","modified":1491993293000},{"_id":"themes/yilia/layout/_partial/comments/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1492098554000},{"_id":"themes/yilia/layout/_partial/comments/changyan.ejs","hash":"30be29cf36ef66eb15982a0c0b16cd825e38de9b","modified":1619262172879},{"_id":"themes/yilia/layout/_partial/comments/disqus.ejs","hash":"2e5cad68bc59190b4158f4ab1879a222ca49a0d2","modified":1451655252000},{"_id":"themes/yilia/layout/_partial/comments/duoshuo.ejs","hash":"1f9ac8182fe0b867a8f1988888336c40c25894cd","modified":1492248109000},{"_id":"themes/yilia/layout/_partial/comments/youyan.ejs","hash":"a6853b59ee60e775de1ed90b242084f83774d195","modified":1451624508000},{"_id":"themes/yilia/layout/_partial/post/category.ejs","hash":"0809a4829aabeb4e911a3ed04ec28db4df7dfe3f","modified":1510675760000},{"_id":"themes/yilia/layout/_partial/post/date.ejs","hash":"ef71c4081e866a494367575c59610e7e6339ece0","modified":1491993293000},{"_id":"themes/yilia/layout/_partial/post/duoshuo.ejs","hash":"e8399025ed3b980aedb821c92855889f5f12fd5b","modified":1491993293000},{"_id":"themes/yilia/layout/_partial/post/nav.ejs","hash":"1036c8e4e1a7bc935ba173744da735a0d6ed09cd","modified":1491993293000},{"_id":"themes/yilia/layout/_partial/post/share.ejs","hash":"5dccfbe165b23a101f1333cc65ed8efbd197453c","modified":1510675760000},{"_id":"themes/yilia/layout/_partial/post/tag.ejs","hash":"2e783e68755abb852760eb0e627a3fbb50a05a55","modified":1510675760000},{"_id":"themes/yilia/layout/_partial/post/title.ejs","hash":"2f275739b6f1193c123646a5a31f37d48644c667","modified":1491993293000},{"_id":"themes/yilia/source-src/css/core/_animation.scss","hash":"63a37f26276f9207405afe0f2d65339ce295bbaf","modified":1491993293000},{"_id":"themes/yilia/source-src/css/core/_media-queries.scss","hash":"491ab3378d5c11005ba65c607608bb36b368a9d5","modified":1491993293000},{"_id":"themes/yilia/source-src/css/core/_mixin.scss","hash":"3bba5c77bad5981eac859fe05c9561d580ba7fa9","modified":1491993293000},{"_id":"themes/yilia/source-src/css/core/_reset.scss","hash":"fab871fa93bd542e76a71a56428f2994a4aaf443","modified":1491993293000},{"_id":"themes/yilia/source-src/css/core/_variables.scss","hash":"fb511c505d1309249f21dc577d4ad2bad99a764f","modified":1510675760000},{"_id":"themes/yilia/source-src/css/fonts/iconfont.svg","hash":"f9304e5714d20861be7d8f4d36687e88e86b9e1b","modified":1510675760000},{"_id":"themes/yilia/source-src/css/fonts/iconfont.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1510675760000},{"_id":"themes/yilia/source-src/css/fonts/iconfont.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1510675760000},{"_id":"themes/yilia/source-src/css/fonts/iconfont.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1510675760000},{"_id":"themes/yilia/source-src/css/img/checkered-pattern.png","hash":"049262fa0886989d750637b264bed34ab51c23c8","modified":1491993293000},{"_id":"themes/yilia/source-src/css/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1491993293000},{"_id":"themes/yilia/source-src/css/img/tooltip.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1491993293000},{"_id":"themes/yilia/.git/logs/refs/heads/master","hash":"6b952b711900eef506797a75adeb2e251b2baa59","modified":1491993293000},{"_id":"themes/yilia/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1491993293000},{"_id":"themes/yilia/.git/logs/refs/remotes/origin/HEAD","hash":"6b952b711900eef506797a75adeb2e251b2baa59","modified":1491993293000},{"_id":"themes/yilia/.git/objects/pack/pack-0424772edcb8f7b38d8dad852157168262f15383.pack","hash":"bde1b569abc1033c2143605392957ffe037633e1","modified":1491993293000},{"_id":"public/fonts/default-skin.b257fa.svg","hash":"558f0da45aa0cac8e77977e6fd54d1e4c14d77aa","modified":1619329791326},{"_id":"public/fonts/iconfont.9abe9f.svg","hash":"f70e244175be4f96a237a748577f28f39dd3c7cb","modified":1619329791326},{"_id":"public/fonts/tooltip.4004ff.svg","hash":"2417013dc6a685cbfdb3e44e90314b3d5059726e","modified":1619329791326},{"_id":"public/img/scrollbar_arrow.png","hash":"db12a6e2e3e683c92be41186091af088fdba17ac","modified":1619329791326},{"_id":"public/img/scrolldown.png","hash":"a4ac33cac76a5aa4caa19b2d17e638f96ef30ac9","modified":1619329791326},{"_id":"public/img/scrollup1.png","hash":"e26a4328bc51fa373def126bf24060756e5e8e15","modified":1619329791326},{"_id":"public/img/scrollup.png","hash":"7cb818bf659c17cb3981641e3b78b5b3acf7e293","modified":1619329791326},{"_id":"public/baidusitemap.xml","hash":"7d35e75bc1af19cae495817088e8b05bcf631791","modified":1619343111705},{"_id":"public/content.json","hash":"84a871d545b77f6a730736ac114a7c648b8db8ef","modified":1619267089293},{"_id":"public/2017/04/12/hello-world/index.html","hash":"7fff3124f20ec7c174f167bf0fe357d6b4bc8e25","modified":1619343346981},{"_id":"public/2017/04/13/markdown语法总结/index.html","hash":"cdee45201c9a64d869bfad51c01261224ccf6496","modified":1619343346981},{"_id":"public/2017/04/13/照片文章测试/index.html","hash":"d9e71e38e0708d73481cd91b03637dcea5f25ae5","modified":1619343346981},{"_id":"public/2017/04/16/标签测试/index.html","hash":"e7f569406f9fec7344e5eda4804da1ea134b9eee","modified":1619343346982},{"_id":"public/archives/index.html","hash":"c763335ca4f717d005f503c0ca66653472f677b2","modified":1619343346982},{"_id":"public/archives/2017/04/index.html","hash":"1fe65251551618ed6d864bfd0c8ed2760d7a6ec6","modified":1619343346982},{"_id":"public/archives/2017/index.html","hash":"b9881b7cbec816717759cf866d1f87a1ffa8afb0","modified":1619343346982},{"_id":"public/categories/测试/index.html","hash":"2b3d3c312fae4702cab1ade3a6c7132933c3386e","modified":1619343346982},{"_id":"public/categories/life/index.html","hash":"6fea521d6f590b1f9618422a712d2f77d60db04d","modified":1619343346982},{"_id":"public/index.html","hash":"bfdcd10e64ffe6c4fa5b90c19b770bb97fab6862","modified":1619343346982},{"_id":"public/tags/脚本语言/index.html","hash":"c4cd9ec1f981497a75929c7222786d1acf816d96","modified":1619343346982},{"_id":"public/tags/编程/index.html","hash":"29b679265106787aa0ba79a3d4f74ecad9bf7fc1","modified":1619343346982},{"_id":"public/tags/程序设计/index.html","hash":"5317c5a9aa1d0d53f982daba8456c7804ba1f53d","modified":1619343346982},{"_id":"public/tags/思考总结/index.html","hash":"b10b6423fb27de1877063a9aaea05b961745044a","modified":1619343346982},{"_id":"public/tags/前端/index.html","hash":"8499a6ea988adc7ed9c4308f88ebbf973a9de3e2","modified":1619343346983},{"_id":"public/tags/效率/index.html","hash":"4f0bd6d9219572cd22c28c00b26ad385d6cc1413","modified":1619343346983},{"_id":"public/tags/人生/index.html","hash":"4a06ffaaf5d8988889f2f0173919686bb14c4c93","modified":1619343346983},{"_id":"public/tags/学习/index.html","hash":"7345b4c05b323b5ee0fa031331345080fe226e0e","modified":1619343346983},{"_id":"public/tags/总结/index.html","hash":"f85bb53012eea3ad570a0096c9a1cf6d5e354d08","modified":1619343346983},{"_id":"public/tags/思考/index.html","hash":"b700af96e2f2f969191a316bfd9bd9ca75a3fbfe","modified":1619343346983},{"_id":"public/tags/c/index.html","hash":"1245e7bc5b518979bcc961df9231529fbdfb33de","modified":1619343346983},{"_id":"public/tags/C/index.html","hash":"7239569d2c6941f98960b446f03269f4eb1be3f6","modified":1619343346983},{"_id":"public/tags/Jave/index.html","hash":"8010e3feae128f047191f6b8d84264874da7972d","modified":1619343346983},{"_id":"public/tags/测试/index.html","hash":"3912cfbfb1ed813c76bb26f2a7fff8520796558e","modified":1619343346983},{"_id":"public/fonts/iconfont.3a9902.eot","hash":"51d4e8d333ae7867915037983ea5d4b2ad971930","modified":1619329791333},{"_id":"public/fonts/iconfont.6e162c.woff","hash":"709373d566526ad4bdb330757a3915e3c5e37b66","modified":1619329791333},{"_id":"public/fonts/iconfont.d0da7e.ttf","hash":"53ea5a5027a2fab93bcdad18cad6dc5f1b728726","modified":1619329791334},{"_id":"public/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1619329791335},{"_id":"public/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1619329791335},{"_id":"public/mobile.40e320.js","hash":"cddc2fb9b2df3eee0c0e9d0cb937f9e54429970d","modified":1619329792578},{"_id":"public/mobile.50f873.js","hash":"ad2dcc7bd6eac355e0262b353ab8c96bc159a9dc","modified":1619329792579},{"_id":"public/slider.885efe.js","hash":"1482b942fdde2f3e33514ff4b412db99442e9dca","modified":1619329792579},{"_id":"public/main.05aabf.js","hash":"87d8443fc82007c3116d82c3e09bd23542a98645","modified":1619329792579},{"_id":"public/js/jquery-1.7.2.min.js","hash":"43e46f3791601d67afdfd6e243d6c803a41bbc5e","modified":1619329792579},{"_id":"public/main.05aabf.css","hash":"1cb3f2efcffad6203ee6c05072ce63bbc24d7e7f","modified":1619329792579},{"_id":"themes/yilia/source-src/css/.DS_Store","hash":"5eb6d7e7c276b157a6802b379593c5f1e59ade58","modified":1619330204494},{"_id":"themes/yilia/layout/_partial/.DS_Store","hash":"8f3b948671bc20890b72bc674939a1a65d25f68c","modified":1619308392930},{"_id":"themes/yilia/.DS_Store","hash":"ab103fc4d23f7a677e5e30900dafea190ddef5e6","modified":1619343256535},{"_id":"themes/yilia/layout/.DS_Store","hash":"5d7ae55ef3d374460f5f3102ccb3f983ccc6eb8f","modified":1619329732442},{"_id":"themes/yilia/source/.DS_Store","hash":"23750b8c039504a4afc0560ae16c148258d8e856","modified":1619343256536},{"_id":"themes/yilia/source-src/.DS_Store","hash":"0657365bd25300b3066d9d2dd1544526b2a25452","modified":1619332219673},{"_id":"source/assets/atom.xml","hash":"9670d3fc2a0d61cd8a5d212094691307f02bf1aa","modified":1619266768019},{"_id":"source/assets/.DS_Store","hash":"26e8ee7e65ce29f2a6918b9f9b7880c588520797","modified":1619266768019},{"_id":"source/assets/img/1.jpeg","hash":"24204ed9a3242f30671cf8947be5bf78bf60ddb8","modified":1619266768019},{"_id":"source/assets/webpage/index.html","hash":"51fa5bd82cf6e196b8a0b77467a6e1e74200ef6e","modified":1619266768021},{"_id":"source/assets/img/personalimage.jpeg","hash":"27e1873bde055df34276753eb5c279822b8678e1","modified":1619266768021},{"_id":"public/assets/webpage/index.html","hash":"288ff83c5c6fd0c0d3f9ca4ebcceddae62544f8c","modified":1619343346981},{"_id":"public/assets/atom.xml","hash":"9670d3fc2a0d61cd8a5d212094691307f02bf1aa","modified":1619343122159},{"_id":"public/assets/img/1.jpeg","hash":"24204ed9a3242f30671cf8947be5bf78bf60ddb8","modified":1619343122159},{"_id":"public/assets/img/personalimage.jpeg","hash":"27e1873bde055df34276753eb5c279822b8678e1","modified":1619343122160},{"_id":"themes/yilia/layout/_partial/post/changyan.ejs","hash":"5f99b55980da64a723a8e14d5a7daba0d6504647","modified":1510675760000},{"_id":"themes/yilia/layout/_partial/post/gitment.ejs","hash":"e68bbac9ffb1ad27b56837c9abad6ed6bb7daa0c","modified":1510675760000},{"_id":"themes/yilia/layout/_partial/post/wangyiyun.ejs","hash":"ea41c462168d9697caef9485862e9cac718a12c1","modified":1510675760000},{"_id":"themes/yilia/layout/_partial/toc.ejs","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1510675760000},{"_id":"themes/yilia/layout/_partial/aside.ejs","hash":"8edbd7993b9b061611a193533a664e2e85eae748","modified":1510675760000},{"_id":"themes/yilia/source/main.0cf68a.css","hash":"ddf6e2c6b953c2c59a3c271e6070010a4cc81cf9","modified":1510675760000},{"_id":"themes/yilia/source/slider.e37972.js","hash":"6dec4e220c89049037eebc44404abd8455d22ad7","modified":1510675760000},{"_id":"themes/yilia/source/main.0cf68a.js","hash":"993fadeb5f6d296e9d997a49ee20dc97333ceab7","modified":1510675760000},{"_id":"themes/yilia/source/mobile.992cbe.js","hash":"01b35e71e37aa2849664eb5daf26daede2278398","modified":1510675760000},{"_id":"themes/yilia/source-src/css/aside.scss","hash":"578a67464dd0f542197f7fcee158c991db058563","modified":1510675760000},{"_id":"themes/yilia/source-src/css/comment.scss","hash":"cafe3834017a3bf47420f37543725025225a2c89","modified":1510675760000},{"_id":"themes/yilia/source/fonts/iconfont.16acc2.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1510675760000},{"_id":"themes/yilia/source/fonts/iconfont.45d7ee.svg","hash":"f9304e5714d20861be7d8f4d36687e88e86b9e1b","modified":1510675760000},{"_id":"themes/yilia/source/fonts/iconfont.8c627f.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1510675760000},{"_id":"themes/yilia/source/fonts/iconfont.b322fa.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1510675760000},{"_id":"themes/yilia/source-src/js/aside.js","hash":"754f771264548a6c5a8ad842908e59ae4e7ed099","modified":1510675760000},{"_id":"source/.DS_Store","hash":"95ab0b04155b7dbef18aedf7bcbd3e8a948c08ba","modified":1619343251532},{"_id":"public/fonts/iconfont.45d7ee.svg","hash":"f70e244175be4f96a237a748577f28f39dd3c7cb","modified":1619343346980},{"_id":"public/fonts/iconfont.16acc2.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1619343346987},{"_id":"public/fonts/iconfont.8c627f.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1619343346987},{"_id":"public/fonts/iconfont.b322fa.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1619343346987},{"_id":"public/slider.e37972.js","hash":"a6a88b664ab4ad1f496d9193b372bd5f54befe9f","modified":1619343348306},{"_id":"public/mobile.992cbe.js","hash":"13c627c209a2ac144e39ba6d34365394b1a56aaa","modified":1619343348306},{"_id":"public/main.0cf68a.js","hash":"b80b96fb910408633b2079ca2c427a1522da5f5a","modified":1619343348306},{"_id":"public/main.0cf68a.css","hash":"304908860f34cb4f7acbe640578fa4397a94b0fd","modified":1619343348308}],"Category":[{"name":"测试","_id":"cj1w3v7ml00059xxahlrnm9tm"},{"name":"life","_id":"cj1w3v7mm00079xxaqj7jtlfb"}],"Data":[],"Page":[{"_content":"<!doctype html>\n\n<html>\n\n<head>\n\n<meta charset=\"utf-8\">\n\n<title>无标题文档</title>\n</head>\n\n<style>\n\nbody {\n\n    padding:0;\n\n    margin:0;\n\n    overflow:hidden;\n\n\theight: 600px;\n\n}\n\ncanvas {\n\n    padding:0;\n\n    margin:0;\n\n}\n\ndiv.btnbg {\n\n    position:fixed;\n\n    left:0;\n\n    top:0;\n\n}\n\n</style>\n\n<body>\n<canvas id=\"sakura\"></canvas>\n\n<div class=\"btnbg\">\n\n</div>\n\n\n\n<!-- sakura shader -->\n\n<script id=\"sakura_point_vsh\" type=\"x-shader/x_vertex\">\n\nuniform mat4 uProjection;\n\nuniform mat4 uModelview;\n\nuniform vec3 uResolution;\n\nuniform vec3 uOffset;\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\n\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\n\n\nattribute vec3 aPosition;\n\nattribute vec3 aEuler;\n\nattribute vec2 aMisc; //x:size, y:fade\n\n\n\nvarying vec3 pposition;\n\nvarying float psize;\n\nvarying float palpha;\n\nvarying float pdist;\n\n\n\n//varying mat3 rotMat;\n\nvarying vec3 normX;\n\nvarying vec3 normY;\n\nvarying vec3 normZ;\n\nvarying vec3 normal;\n\n\n\nvarying float diffuse;\n\nvarying float specular;\n\nvarying float rstop;\n\nvarying float distancefade;\n\n\n\nvoid main(void) {\n\n    // Projection is based on vertical angle\n\n    vec4 pos = uModelview * vec4(aPosition + uOffset, 1.0);\n\n    gl_Position = uProjection * pos;\n\n    gl_PointSize = aMisc.x * uProjection[1][1] / -pos.z * uResolution.y * 0.5;\n\n    \n\n    pposition = pos.xyz;\n\n    psize = aMisc.x;\n\n    pdist = length(pos.xyz);\n\n    palpha = smoothstep(0.0, 1.0, (pdist - 0.1) / uFade.z);\n\n    \n\n    vec3 elrsn = sin(aEuler);\n\n    vec3 elrcs = cos(aEuler);\n\n    mat3 rotx = mat3(\n\n        1.0, 0.0, 0.0,\n\n        0.0, elrcs.x, elrsn.x,\n\n        0.0, -elrsn.x, elrcs.x\n\n    );\n\n    mat3 roty = mat3(\n\n        elrcs.y, 0.0, -elrsn.y,\n\n        0.0, 1.0, 0.0,\n\n        elrsn.y, 0.0, elrcs.y\n\n    );\n\n    mat3 rotz = mat3(\n\n        elrcs.z, elrsn.z, 0.0, \n\n        -elrsn.z, elrcs.z, 0.0,\n\n        0.0, 0.0, 1.0\n\n    );\n\n    mat3 rotmat = rotx * roty * rotz;\n\n    normal = rotmat[2];\n\n    \n\n    mat3 trrotm = mat3(\n\n        rotmat[0][0], rotmat[1][0], rotmat[2][0],\n\n        rotmat[0][1], rotmat[1][1], rotmat[2][1],\n\n        rotmat[0][2], rotmat[1][2], rotmat[2][2]\n\n    );\n\n    normX = trrotm[0];\n\n    normY = trrotm[1];\n\n    normZ = trrotm[2];\n\n    \n\n    const vec3 lit = vec3(0.6917144638660746, 0.6917144638660746, -0.20751433915982237);\n\n    \n\n    float tmpdfs = dot(lit, normal);\n\n    if(tmpdfs < 0.0) {\n\n        normal = -normal;\n\n        tmpdfs = dot(lit, normal);\n\n    }\n\n    diffuse = 0.4 + tmpdfs;\n\n    \n\n    vec3 eyev = normalize(-pos.xyz);\n\n    if(dot(eyev, normal) > 0.0) {\n\n        vec3 hv = normalize(eyev + lit);\n\n        specular = pow(max(dot(hv, normal), 0.0), 20.0);\n\n    }\n\n    else {\n\n        specular = 0.0;\n\n    }\n\n    \n\n    rstop = clamp((abs(pdist - uDOF.x) - uDOF.y) / uDOF.z, 0.0, 1.0);\n\n    rstop = pow(rstop, 0.5);\n\n    //-0.69315 = ln(0.5)\n\n    distancefade = min(1.0, exp((uFade.x - pdist) * 0.69315 / uFade.y));\n\n}\n\n</script>\n\n<script id=\"sakura_point_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\n\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\n\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\n\n\nconst vec3 fadeCol = vec3(0.08, 0.03, 0.06);\n\n\n\nvarying vec3 pposition;\n\nvarying float psize;\n\nvarying float palpha;\n\nvarying float pdist;\n\n\n\n//varying mat3 rotMat;\n\nvarying vec3 normX;\n\nvarying vec3 normY;\n\nvarying vec3 normZ;\n\nvarying vec3 normal;\n\n\n\nvarying float diffuse;\n\nvarying float specular;\n\nvarying float rstop;\n\nvarying float distancefade;\n\n\n\nfloat ellipse(vec2 p, vec2 o, vec2 r) {\n\n    vec2 lp = (p - o) / r;\n\n    return length(lp) - 1.0;\n\n}\n\n\n\nvoid main(void) {\n\n    vec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0;\n\n    vec3 d = vec3(0.0, 0.0, -1.0);\n\n    float nd = normZ.z; //dot(-normZ, d);\n\n    if(abs(nd) < 0.0001) discard;\n\n    \n\n    float np = dot(normZ, p);\n\n    vec3 tp = p + d * np / nd;\n\n    vec2 coord = vec2(dot(normX, tp), dot(normY, tp));\n\n    \n\n    //angle = 15 degree\n\n    const float flwrsn = 0.258819045102521;\n\n    const float flwrcs = 0.965925826289068;\n\n    mat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs);\n\n    vec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm;\n\n    \n\n    float r;\n\n    if(flwrp.x < 0.0) {\n\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5);\n\n    }\n\n    else {\n\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5);\n\n    }\n\n    \n\n    if(r > rstop) discard;\n\n    \n\n    vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r);\n\n    float grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35));\n\n    col *= vec3(1.0, grady, grady);\n\n    col *= mix(0.8, 1.0, pow(abs(coord.x), 0.3));\n\n    col = col * diffuse + specular;\n\n    \n\n    col = mix(fadeCol, col, distancefade);\n\n    \n\n    float alpha = (rstop > 0.001)? (0.5 - r / (rstop * 2.0)) : 1.0;\n\n    alpha = smoothstep(0.0, 1.0, alpha) * palpha;\n\n    \n\n    gl_FragColor = vec4(col * 0.5, alpha);\n\n}\n\n</script>\n\n<!-- effects -->\n\n<script id=\"fx_common_vsh\" type=\"x-shader/x_vertex\">\n\nuniform vec3 uResolution;\n\nattribute vec2 aPosition;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n\n}\n\n</script>\n\n<script id=\"bg_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\n\n\nuniform vec2 uTimes;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec3 col;\n\n    float c;\n\n    vec2 tmpv = texCoord * vec2(0.8, 1.0) - vec2(0.95, 1.0);\n\n    c = exp(-pow(length(tmpv) * 1.8, 2.0));\n\n    col = mix(vec3(0.02, 0.0, 0.03), vec3(0.96, 0.98, 1.0) * 1.5, c);\n\n    gl_FragColor = vec4(col * 0.5, 1.0);\n\n}\n\n</script>\n\n<script id=\"fx_brightbuf_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec4 col = texture2D(uSrc, texCoord);\n\n    gl_FragColor = vec4(col.rgb * 2.0 - vec3(0.5), 1.0);\n\n}\n\n</script>\n\n<script id=\"fx_dirblur_r4_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\nuniform vec4 uBlurDir; //dir(x, y), stride(z, w)\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec4 col = texture2D(uSrc, texCoord);\n\n    col = col + texture2D(uSrc, texCoord + uBlurDir.xy * uDelta);\n\n    col = col + texture2D(uSrc, texCoord - uBlurDir.xy * uDelta);\n\n    col = col + texture2D(uSrc, texCoord + (uBlurDir.xy + uBlurDir.zw) * uDelta);\n\n    col = col + texture2D(uSrc, texCoord - (uBlurDir.xy + uBlurDir.zw) * uDelta);\n\n    gl_FragColor = col / 5.0;\n\n}\n\n</script>\n\n<!-- effect fragment shader template -->\n\n<script id=\"fx_common_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    gl_FragColor = texture2D(uSrc, texCoord);\n\n}\n\n</script>\n\n<!-- post processing -->\n\n<script id=\"pp_final_vsh\" type=\"x-shader/x_vertex\">\n\nuniform vec3 uResolution;\n\nattribute vec2 aPosition;\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\nvoid main(void) {\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n\n}\n\n</script>\n\n<script id=\"pp_final_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform sampler2D uBloom;\n\nuniform vec2 uDelta;\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\nvoid main(void) {\n\n    vec4 srccol = texture2D(uSrc, texCoord) * 2.0;\n\n    vec4 bloomcol = texture2D(uBloom, texCoord);\n\n    vec4 col;\n\n    col = srccol + bloomcol * (vec4(1.0) + srccol);\n\n    col *= smoothstep(1.0, 0.0, pow(length((texCoord - vec2(0.5)) * 2.0), 1.2) * 0.5);\n\n    col = pow(col, vec4(0.45454545454545)); //(1.0 / 2.2)\n\n    \n\n    gl_FragColor = vec4(col.rgb, 1.0);\n\n    gl_FragColor.a = 1.0;\n\n}\n\n</script>\n\n</body>\n\n<script>\n\n// Utilities\n\nvar Vector3 = {};\n\nvar Matrix44 = {};\n\nVector3.create = function(x, y, z) {\n\n    return {'x':x, 'y':y, 'z':z};\n\n};\n\nVector3.dot = function (v0, v1) {\n\n    return v0.x * v1.x + v0.y * v1.y + v0.z * v1.z;\n\n};\n\nVector3.cross = function (v, v0, v1) {\n\n    v.x = v0.y * v1.z - v0.z * v1.y;\n\n    v.y = v0.z * v1.x - v0.x * v1.z;\n\n    v.z = v0.x * v1.y - v0.y * v1.x;\n\n};\n\nVector3.normalize = function (v) {\n\n    var l = v.x * v.x + v.y * v.y + v.z * v.z;\n\n    if(l > 0.00001) {\n\n        l = 1.0 / Math.sqrt(l);\n\n        v.x *= l;\n\n        v.y *= l;\n\n        v.z *= l;\n\n    }\n\n};\n\nVector3.arrayForm = function(v) {\n\n    if(v.array) {\n\n        v.array[0] = v.x;\n\n        v.array[1] = v.y;\n\n        v.array[2] = v.z;\n\n    }\n\n    else {\n\n        v.array = new Float32Array([v.x, v.y, v.z]);\n\n    }\n\n    return v.array;\n\n};\n\nMatrix44.createIdentity = function () {\n\n    return new Float32Array([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]);\n\n};\n\nMatrix44.loadProjection = function (m, aspect, vdeg, near, far) {\n\n    var h = near * Math.tan(vdeg * Math.PI / 180.0 * 0.5) * 2.0;\n\n    var w = h * aspect;\n\n    \n\n    m[0] = 2.0 * near / w;\n\n    m[1] = 0.0;\n\n    m[2] = 0.0;\n\n    m[3] = 0.0;\n\n    \n\n    m[4] = 0.0;\n\n    m[5] = 2.0 * near / h;\n\n    m[6] = 0.0;\n\n    m[7] = 0.0;\n\n    \n\n    m[8] = 0.0;\n\n    m[9] = 0.0;\n\n    m[10] = -(far + near) / (far - near);\n\n    m[11] = -1.0;\n\n    \n\n    m[12] = 0.0;\n\n    m[13] = 0.0;\n\n    m[14] = -2.0 * far * near / (far - near);\n\n    m[15] = 0.0;\n\n};\n\nMatrix44.loadLookAt = function (m, vpos, vlook, vup) {\n\n    var frontv = Vector3.create(vpos.x - vlook.x, vpos.y - vlook.y, vpos.z - vlook.z);\n\n    Vector3.normalize(frontv);\n\n    var sidev = Vector3.create(1.0, 0.0, 0.0);\n\n    Vector3.cross(sidev, vup, frontv);\n\n    Vector3.normalize(sidev);\n\n    var topv = Vector3.create(1.0, 0.0, 0.0);\n\n    Vector3.cross(topv, frontv, sidev);\n\n    Vector3.normalize(topv);\n\n    \n\n    m[0] = sidev.x;\n\n    m[1] = topv.x;\n\n    m[2] = frontv.x;\n\n    m[3] = 0.0;\n\n    \n\n    m[4] = sidev.y;\n\n    m[5] = topv.y;\n\n    m[6] = frontv.y;\n\n    m[7] = 0.0;\n\n    \n\n    m[8] = sidev.z;\n\n    m[9] = topv.z;\n\n    m[10] = frontv.z;\n\n    m[11] = 0.0;\n\n    \n\n    m[12] = -(vpos.x * m[0] + vpos.y * m[4] + vpos.z * m[8]);\n\n    m[13] = -(vpos.x * m[1] + vpos.y * m[5] + vpos.z * m[9]);\n\n    m[14] = -(vpos.x * m[2] + vpos.y * m[6] + vpos.z * m[10]);\n\n    m[15] = 1.0;\n\n};\n\n\n\n//\n\nvar timeInfo = {\n\n    'start':0, 'prev':0, // Date\n\n    'delta':0, 'elapsed':0 // Number(sec)\n\n};\n\n\n\n//\n\nvar gl;\n\nvar renderSpec = {\n\n    'width':0,\n\n    'height':0,\n\n    'aspect':1,\n\n    'array':new Float32Array(3),\n\n    'halfWidth':0,\n\n    'halfHeight':0,\n\n    'halfArray':new Float32Array(3)\n\n    // and some render targets. see setViewport()\n\n};\n\nrenderSpec.setSize = function(w, h) {\n\n    renderSpec.width = w;\n\n    renderSpec.height = h;\n\n    renderSpec.aspect = renderSpec.width / renderSpec.height;\n\n    renderSpec.array[0] = renderSpec.width;\n\n    renderSpec.array[1] = renderSpec.height;\n\n    renderSpec.array[2] = renderSpec.aspect;\n\n    \n\n    renderSpec.halfWidth = Math.floor(w / 2);\n\n    renderSpec.halfHeight = Math.floor(h / 2);\n\n    renderSpec.halfArray[0] = renderSpec.halfWidth;\n\n    renderSpec.halfArray[1] = renderSpec.halfHeight;\n\n    renderSpec.halfArray[2] = renderSpec.halfWidth / renderSpec.halfHeight;\n\n};\n\n\n\nfunction deleteRenderTarget(rt) {\n\n    gl.deleteFramebuffer(rt.frameBuffer);\n\n    gl.deleteRenderbuffer(rt.renderBuffer);\n\n    gl.deleteTexture(rt.texture);\n\n}\n\n\n\nfunction createRenderTarget(w, h) {\n\n    var ret = {\n\n        'width':w,\n\n        'height':h,\n\n        'sizeArray':new Float32Array([w, h, w / h]),\n\n        'dtxArray':new Float32Array([1.0 / w, 1.0 / h])\n\n    };\n\n    ret.frameBuffer = gl.createFramebuffer();\n\n    ret.renderBuffer = gl.createRenderbuffer();\n\n    ret.texture = gl.createTexture();\n\n    \n\n    gl.bindTexture(gl.TEXTURE_2D, ret.texture);\n\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, w, h, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\n    \n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, ret.frameBuffer);\n\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, ret.texture, 0);\n\n    \n\n    gl.bindRenderbuffer(gl.RENDERBUFFER, ret.renderBuffer);\n\n    gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, w, h);\n\n    gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, ret.renderBuffer);\n\n    \n\n    gl.bindTexture(gl.TEXTURE_2D, null);\n\n    gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    \n\n    return ret;\n\n}\n\n\n\nfunction compileShader(shtype, shsrc) {\n\n\tvar retsh = gl.createShader(shtype);\n\n\t\n\n\tgl.shaderSource(retsh, shsrc);\n\n\tgl.compileShader(retsh);\n\n\t\n\n\tif(!gl.getShaderParameter(retsh, gl.COMPILE_STATUS)) {\n\n\t\tvar errlog = gl.getShaderInfoLog(retsh);\n\n\t\tgl.deleteShader(retsh);\n\n\t\tconsole.error(errlog);\n\n\t\treturn null;\n\n\t}\n\n\treturn retsh;\n\n}\n\n\n\nfunction createShader(vtxsrc, frgsrc, uniformlist, attrlist) {\n\n    var vsh = compileShader(gl.VERTEX_SHADER, vtxsrc);\n\n    var fsh = compileShader(gl.FRAGMENT_SHADER, frgsrc);\n\n    \n\n    if(vsh == null || fsh == null) {\n\n        return null;\n\n    }\n\n    \n\n    var prog = gl.createProgram();\n\n    gl.attachShader(prog, vsh);\n\n    gl.attachShader(prog, fsh);\n\n    \n\n    gl.deleteShader(vsh);\n\n    gl.deleteShader(fsh);\n\n    \n\n    gl.linkProgram(prog);\n\n    if (!gl.getProgramParameter(prog, gl.LINK_STATUS)) {\n\n        var errlog = gl.getProgramInfoLog(prog);\n\n        console.error(errlog);\n\n        return null;\n\n    }\n\n    \n\n    if(uniformlist) {\n\n        prog.uniforms = {};\n\n        for(var i = 0; i < uniformlist.length; i++) {\n\n            prog.uniforms[uniformlist[i]] = gl.getUniformLocation(prog, uniformlist[i]);\n\n        }\n\n    }\n\n    \n\n    if(attrlist) {\n\n        prog.attributes = {};\n\n        for(var i = 0; i < attrlist.length; i++) {\n\n            var attr = attrlist[i];\n\n            prog.attributes[attr] = gl.getAttribLocation(prog, attr);\n\n        }\n\n    }\n\n    \n\n    return prog;\n\n}\n\n\n\nfunction useShader(prog) {\n\n    gl.useProgram(prog);\n\n    for(var attr in prog.attributes) {\n\n        gl.enableVertexAttribArray(prog.attributes[attr]);;\n\n    }\n\n}\n\n\n\nfunction unuseShader(prog) {\n\n    for(var attr in prog.attributes) {\n\n        gl.disableVertexAttribArray(prog.attributes[attr]);;\n\n    }\n\n    gl.useProgram(null);\n\n}\n\n\n\n/////\n\nvar projection = {\n\n    'angle':60,\n\n    'nearfar':new Float32Array([0.1, 100.0]),\n\n    'matrix':Matrix44.createIdentity()\n\n};\n\nvar camera = {\n\n    'position':Vector3.create(0, 0, 100),\n\n    'lookat':Vector3.create(0, 0, 0),\n\n    'up':Vector3.create(0, 1, 0),\n\n    'dof':Vector3.create(10.0, 4.0, 8.0),\n\n    'matrix':Matrix44.createIdentity()\n\n};\n\n\n\nvar pointFlower = {};\n\nvar meshFlower = {};\n\nvar sceneStandBy = false;\n\n\n\nvar BlossomParticle = function () {\n\n    this.velocity = new Array(3);\n\n    this.rotation = new Array(3);\n\n    this.position = new Array(3);\n\n    this.euler = new Array(3);\n\n    this.size = 1.0;\n\n    this.alpha = 1.0;\n\n    this.zkey = 0.0;\n\n};\n\n\n\nBlossomParticle.prototype.setVelocity = function (vx, vy, vz) {\n\n    this.velocity[0] = vx;\n\n    this.velocity[1] = vy;\n\n    this.velocity[2] = vz;\n\n};\n\n\n\nBlossomParticle.prototype.setRotation = function (rx, ry, rz) {\n\n    this.rotation[0] = rx;\n\n    this.rotation[1] = ry;\n\n    this.rotation[2] = rz;\n\n};\n\n\n\nBlossomParticle.prototype.setPosition = function (nx, ny, nz) {\n\n    this.position[0] = nx;\n\n    this.position[1] = ny;\n\n    this.position[2] = nz;\n\n};\n\n\n\nBlossomParticle.prototype.setEulerAngles = function (rx, ry, rz) {\n\n    this.euler[0] = rx;\n\n    this.euler[1] = ry;\n\n    this.euler[2] = rz;\n\n};\n\n\n\nBlossomParticle.prototype.setSize = function (s) {\n\n    this.size = s;\n\n};\n\n\n\nBlossomParticle.prototype.update = function (dt, et) {\n\n    this.position[0] += this.velocity[0] * dt;\n\n    this.position[1] += this.velocity[1] * dt;\n\n    this.position[2] += this.velocity[2] * dt;\n\n    \n\n    this.euler[0] += this.rotation[0] * dt;\n\n    this.euler[1] += this.rotation[1] * dt;\n\n    this.euler[2] += this.rotation[2] * dt;\n\n};\n\n\n\nfunction createPointFlowers() {\n\n    // get point sizes\n\n    var prm = gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);\n\n    renderSpec.pointSize = {'min':prm[0], 'max':prm[1]};\n\n    \n\n    var vtxsrc = document.getElementById(\"sakura_point_vsh\").textContent;\n\n    var frgsrc = document.getElementById(\"sakura_point_fsh\").textContent;\n\n    \n\n    pointFlower.program = createShader(\n\n        vtxsrc, frgsrc,\n\n        ['uProjection', 'uModelview', 'uResolution', 'uOffset', 'uDOF', 'uFade'],\n\n        ['aPosition', 'aEuler', 'aMisc']\n\n    );\n\n    \n\n    useShader(pointFlower.program);\n\n    pointFlower.offset = new Float32Array([0.0, 0.0, 0.0]);\n\n    pointFlower.fader = Vector3.create(0.0, 10.0, 0.0);\n\n    \n\n    // paramerters: velocity[3], rotate[3]\n\n    pointFlower.numFlowers = 1600;\n\n    pointFlower.particles = new Array(pointFlower.numFlowers);\n\n    // vertex attributes {position[3], euler_xyz[3], size[1]}\n\n    pointFlower.dataArray = new Float32Array(pointFlower.numFlowers * (3 + 3 + 2));\n\n    pointFlower.positionArrayOffset = 0;\n\n    pointFlower.eulerArrayOffset = pointFlower.numFlowers * 3;\n\n    pointFlower.miscArrayOffset = pointFlower.numFlowers * 6;\n\n    \n\n    pointFlower.buffer = gl.createBuffer();\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    \n\n    unuseShader(pointFlower.program);\n\n    \n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        pointFlower.particles[i] = new BlossomParticle();\n\n    }\n\n}\n\n\n\nfunction initPointFlowers() {\n\n    //area\n\n    pointFlower.area = Vector3.create(20.0, 20.0, 20.0);\n\n    pointFlower.area.x = pointFlower.area.y * renderSpec.aspect;\n\n    \n\n    pointFlower.fader.x = 10.0; //env fade start\n\n    pointFlower.fader.y = pointFlower.area.z; //env fade half\n\n    pointFlower.fader.z = 0.1;  //near fade start\n\n    \n\n    //particles\n\n    var PI2 = Math.PI * 2.0;\n\n    var tmpv3 = Vector3.create(0, 0, 0);\n\n    var tmpv = 0;\n\n    var symmetryrand = function() {return (Math.random() * 2.0 - 1.0);};\n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var tmpprtcl = pointFlower.particles[i];\n\n        \n\n        //velocity\n\n        tmpv3.x = symmetryrand() * 0.3 + 0.8;\n\n        tmpv3.y = symmetryrand() * 0.2 - 1.0;\n\n        tmpv3.z = symmetryrand() * 0.3 + 0.5;\n\n        Vector3.normalize(tmpv3);\n\n        tmpv = 2.0 + Math.random() * 1.0;\n\n        tmpprtcl.setVelocity(tmpv3.x * tmpv, tmpv3.y * tmpv, tmpv3.z * tmpv);\n\n        \n\n        //rotation\n\n        tmpprtcl.setRotation(\n\n            symmetryrand() * PI2 * 0.5,\n\n            symmetryrand() * PI2 * 0.5,\n\n            symmetryrand() * PI2 * 0.5\n\n        );\n\n        \n\n        //position\n\n        tmpprtcl.setPosition(\n\n            symmetryrand() * pointFlower.area.x,\n\n            symmetryrand() * pointFlower.area.y,\n\n            symmetryrand() * pointFlower.area.z\n\n        );\n\n        \n\n        //euler\n\n        tmpprtcl.setEulerAngles(\n\n            Math.random() * Math.PI * 2.0,\n\n            Math.random() * Math.PI * 2.0,\n\n            Math.random() * Math.PI * 2.0\n\n        );\n\n        \n\n        //size\n\n        tmpprtcl.setSize(0.9 + Math.random() * 0.1);\n\n    }\n\n}\n\n\n\nfunction renderPointFlowers() {\n\n    //update\n\n    var PI2 = Math.PI * 2.0;\n\n    var limit = [pointFlower.area.x, pointFlower.area.y, pointFlower.area.z];\n\n    var repeatPos = function (prt, cmp, limit) {\n\n        if(Math.abs(prt.position[cmp]) - prt.size * 0.5 > limit) {\n\n            //out of area\n\n            if(prt.position[cmp] > 0) {\n\n                prt.position[cmp] -= limit * 2.0;\n\n            }\n\n            else {\n\n                prt.position[cmp] += limit * 2.0;\n\n            }\n\n        }\n\n    };\n\n    var repeatEuler = function (prt, cmp) {\n\n        prt.euler[cmp] = prt.euler[cmp] % PI2;\n\n        if(prt.euler[cmp] < 0.0) {\n\n            prt.euler[cmp] += PI2;\n\n        }\n\n    };\n\n    \n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var prtcl = pointFlower.particles[i];\n\n        prtcl.update(timeInfo.delta, timeInfo.elapsed);\n\n        repeatPos(prtcl, 0, pointFlower.area.x);\n\n        repeatPos(prtcl, 1, pointFlower.area.y);\n\n        repeatPos(prtcl, 2, pointFlower.area.z);\n\n        repeatEuler(prtcl, 0);\n\n        repeatEuler(prtcl, 1);\n\n        repeatEuler(prtcl, 2);\n\n        \n\n        prtcl.alpha = 1.0;//(pointFlower.area.z - prtcl.position[2]) * 0.5;\n\n        \n\n        prtcl.zkey = (camera.matrix[2] * prtcl.position[0]\n\n                    + camera.matrix[6] * prtcl.position[1]\n\n                    + camera.matrix[10] * prtcl.position[2]\n\n                    + camera.matrix[14]);\n\n    }\n\n    \n\n    // sort\n\n    pointFlower.particles.sort(function(p0, p1){return p0.zkey - p1.zkey;});\n\n    \n\n    // update data\n\n    var ipos = pointFlower.positionArrayOffset;\n\n    var ieuler = pointFlower.eulerArrayOffset;\n\n    var imisc = pointFlower.miscArrayOffset;\n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var prtcl = pointFlower.particles[i];\n\n        pointFlower.dataArray[ipos] = prtcl.position[0];\n\n        pointFlower.dataArray[ipos + 1] = prtcl.position[1];\n\n        pointFlower.dataArray[ipos + 2] = prtcl.position[2];\n\n        ipos += 3;\n\n        pointFlower.dataArray[ieuler] = prtcl.euler[0];\n\n        pointFlower.dataArray[ieuler + 1] = prtcl.euler[1];\n\n        pointFlower.dataArray[ieuler + 2] = prtcl.euler[2];\n\n        ieuler += 3;\n\n        pointFlower.dataArray[imisc] = prtcl.size;\n\n        pointFlower.dataArray[imisc + 1] = prtcl.alpha;\n\n        imisc += 2;\n\n    }\n\n    \n\n    //draw\n\n    gl.enable(gl.BLEND);\n\n    //gl.disable(gl.DEPTH_TEST);\n\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n    \n\n    var prog = pointFlower.program;\n\n    useShader(prog);\n\n    \n\n    gl.uniformMatrix4fv(prog.uniforms.uProjection, false, projection.matrix);\n\n    gl.uniformMatrix4fv(prog.uniforms.uModelview, false, camera.matrix);\n\n    gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);\n\n    gl.uniform3fv(prog.uniforms.uDOF, Vector3.arrayForm(camera.dof));\n\n    gl.uniform3fv(prog.uniforms.uFade, Vector3.arrayForm(pointFlower.fader));\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);\n\n    \n\n    gl.vertexAttribPointer(prog.attributes.aPosition, 3, gl.FLOAT, false, 0, pointFlower.positionArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    gl.vertexAttribPointer(prog.attributes.aEuler, 3, gl.FLOAT, false, 0, pointFlower.eulerArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    gl.vertexAttribPointer(prog.attributes.aMisc, 2, gl.FLOAT, false, 0, pointFlower.miscArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    \n\n    // doubler\n\n    for(var i = 1; i < 2; i++) {\n\n        var zpos = i * -2.0;\n\n        pointFlower.offset[0] = pointFlower.area.x * -1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y * -1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x * -1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y *  1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x *  1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y * -1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x *  1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y *  1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n    }\n\n    \n\n    //main\n\n    pointFlower.offset[0] = 0.0;\n\n    pointFlower.offset[1] = 0.0;\n\n    pointFlower.offset[2] = 0.0;\n\n    gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n    gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    unuseShader(prog);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n    gl.disable(gl.BLEND);\n\n}\n\n\n\n// effects\n\n//common util\n\nfunction createEffectProgram(vtxsrc, frgsrc, exunifs, exattrs) {\n\n    var ret = {};\n\n    var unifs = ['uResolution', 'uSrc', 'uDelta'];\n\n    if(exunifs) {\n\n        unifs = unifs.concat(exunifs);\n\n    }\n\n    var attrs = ['aPosition'];\n\n    if(exattrs) {\n\n        attrs = attrs.concat(exattrs);\n\n    }\n\n    \n\n    ret.program = createShader(vtxsrc, frgsrc, unifs, attrs);\n\n    useShader(ret.program);\n\n    \n\n    ret.dataArray = new Float32Array([\n\n        -1.0, -1.0,\n\n         1.0, -1.0,\n\n        -1.0,  1.0,\n\n         1.0,  1.0\n\n    ]);\n\n    ret.buffer = gl.createBuffer();\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, ret.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, ret.dataArray, gl.STATIC_DRAW);\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    unuseShader(ret.program);\n\n    \n\n    return ret;\n\n}\n\n\n\n// basic usage\n\n// useEffect(prog, srctex({'texture':texid, 'dtxArray':(f32)[dtx, dty]})); //basic initialize\n\n// gl.uniform**(...); //additional uniforms\n\n// drawEffect()\n\n// unuseEffect(prog)\n\n// TEXTURE0 makes src\n\nfunction useEffect(fxobj, srctex) {\n\n    var prog = fxobj.program;\n\n    useShader(prog);\n\n    gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);\n\n    \n\n    if(srctex != null) {\n\n        gl.uniform2fv(prog.uniforms.uDelta, srctex.dtxArray);\n\n        gl.uniform1i(prog.uniforms.uSrc, 0);\n\n        \n\n        gl.activeTexture(gl.TEXTURE0);\n\n        gl.bindTexture(gl.TEXTURE_2D, srctex.texture);\n\n    }\n\n}\n\nfunction drawEffect(fxobj) {\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, fxobj.buffer);\n\n    gl.vertexAttribPointer(fxobj.program.attributes.aPosition, 2, gl.FLOAT, false, 0, 0);\n\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n}\n\nfunction unuseEffect(fxobj) {\n\n    unuseShader(fxobj.program);\n\n}\n\n\n\nvar effectLib = {};\n\nfunction createEffectLib() {\n\n    \n\n    var vtxsrc, frgsrc;\n\n    //common\n\n    var cmnvtxsrc = document.getElementById(\"fx_common_vsh\").textContent;\n\n    \n\n    //background\n\n    frgsrc = document.getElementById(\"bg_fsh\").textContent;\n\n    effectLib.sceneBg = createEffectProgram(cmnvtxsrc, frgsrc, ['uTimes'], null);\n\n    \n\n    // make brightpixels buffer\n\n    frgsrc = document.getElementById(\"fx_brightbuf_fsh\").textContent;\n\n    effectLib.mkBrightBuf = createEffectProgram(cmnvtxsrc, frgsrc, null, null);\n\n    \n\n    // direction blur\n\n    frgsrc = document.getElementById(\"fx_dirblur_r4_fsh\").textContent;\n\n    effectLib.dirBlur = createEffectProgram(cmnvtxsrc, frgsrc, ['uBlurDir'], null);\n\n    \n\n    //final composite\n\n    vtxsrc = document.getElementById(\"pp_final_vsh\").textContent;\n\n    frgsrc = document.getElementById(\"pp_final_fsh\").textContent;\n\n    effectLib.finalComp = createEffectProgram(vtxsrc, frgsrc, ['uBloom'], null);\n\n}\n\n\n\n// background\n\nfunction createBackground() {\n\n    //console.log(\"create background\");\n\n}\n\nfunction initBackground() {\n\n    //console.log(\"init background\");\n\n}\n\nfunction renderBackground() {\n\n    gl.disable(gl.DEPTH_TEST);\n\n    \n\n    useEffect(effectLib.sceneBg, null);\n\n    gl.uniform2f(effectLib.sceneBg.program.uniforms.uTimes, timeInfo.elapsed, timeInfo.delta);\n\n    drawEffect(effectLib.sceneBg);\n\n    unuseEffect(effectLib.sceneBg);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n}\n\n\n\n// post process\n\nvar postProcess = {};\n\nfunction createPostProcess() {\n\n    //console.log(\"create post process\");\n\n}\n\nfunction initPostProcess() {\n\n    //console.log(\"init post process\");\n\n}\n\n\n\nfunction renderPostProcess() {\n\n    gl.enable(gl.TEXTURE_2D);\n\n    gl.disable(gl.DEPTH_TEST);\n\n    var bindRT = function (rt, isclear) {\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, rt.frameBuffer);\n\n        gl.viewport(0, 0, rt.width, rt.height);\n\n        if(isclear) {\n\n            gl.clearColor(0, 0, 0, 0);\n\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n        }\n\n    };\n\n    \n\n    //make bright buff\n\n    bindRT(renderSpec.wHalfRT0, true);\n\n    useEffect(effectLib.mkBrightBuf, renderSpec.mainRT);\n\n    drawEffect(effectLib.mkBrightBuf);\n\n    unuseEffect(effectLib.mkBrightBuf);\n\n    \n\n    // make bloom\n\n    for(var i = 0; i < 2; i++) {\n\n        var p = 1.5 + 1 * i;\n\n        var s = 2.0 + 1 * i;\n\n        bindRT(renderSpec.wHalfRT1, true);\n\n        useEffect(effectLib.dirBlur, renderSpec.wHalfRT0);\n\n        gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir, p, 0.0, s, 0.0);\n\n        drawEffect(effectLib.dirBlur);\n\n        unuseEffect(effectLib.dirBlur);\n\n        \n\n        bindRT(renderSpec.wHalfRT0, true);\n\n        useEffect(effectLib.dirBlur, renderSpec.wHalfRT1);\n\n        gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir, 0.0, p, 0.0, s);\n\n        drawEffect(effectLib.dirBlur);\n\n        unuseEffect(effectLib.dirBlur);\n\n    }\n\n    \n\n    //display\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    gl.viewport(0, 0, renderSpec.width, renderSpec.height);\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    \n\n    useEffect(effectLib.finalComp, renderSpec.mainRT);\n\n    gl.uniform1i(effectLib.finalComp.program.uniforms.uBloom, 1);\n\n    gl.activeTexture(gl.TEXTURE1);\n\n    gl.bindTexture(gl.TEXTURE_2D, renderSpec.wHalfRT0.texture);\n\n    drawEffect(effectLib.finalComp);\n\n    unuseEffect(effectLib.finalComp);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n}\n\n\n\n/////\n\nvar SceneEnv = {};\n\nfunction createScene() {\n\n    createEffectLib();\n\n    createBackground();\n\n    createPointFlowers();\n\n    createPostProcess();\n\n    sceneStandBy = true;\n\n}\n\n\n\nfunction initScene() {\n\n    initBackground();\n\n    initPointFlowers();\n\n    initPostProcess();\n\n    \n\n    //camera.position.z = 17.320508;\n\n    camera.position.z = pointFlower.area.z + projection.nearfar[0];\n\n    projection.angle = Math.atan2(pointFlower.area.y, camera.position.z + pointFlower.area.z) * 180.0 / Math.PI * 2.0;\n\n    Matrix44.loadProjection(projection.matrix, renderSpec.aspect, projection.angle, projection.nearfar[0], projection.nearfar[1]);\n\n}\n\n\n\nfunction renderScene() {\n\n    //draw\n\n    Matrix44.loadLookAt(camera.matrix, camera.position, camera.lookat, camera.up);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n    \n\n    //gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, renderSpec.mainRT.frameBuffer);\n\n    gl.viewport(0, 0, renderSpec.mainRT.width, renderSpec.mainRT.height);\n\n    gl.clearColor(0.005, 0, 0.05, 0);\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    \n\n    renderBackground();\n\n    renderPointFlowers();\n\n    renderPostProcess();\n\n}\n\n\n\n/////\n\nfunction onResize(e) {\n\n    makeCanvasFullScreen(document.getElementById(\"sakura\"));\n\n    setViewports();\n\n    if(sceneStandBy) {\n\n        initScene();\n\n    }\n\n}\n\n\n\nfunction setViewports() {\n\n    renderSpec.setSize(gl.canvas.width, gl.canvas.height);\n\n    \n\n    gl.clearColor(0.2, 0.2, 0.5, 1.0);\n\n    gl.viewport(0, 0, renderSpec.width, renderSpec.height);\n\n    \n\n    var rtfunc = function (rtname, rtw, rth) {\n\n        var rt = renderSpec[rtname];\n\n        if(rt) deleteRenderTarget(rt);\n\n        renderSpec[rtname] = createRenderTarget(rtw, rth);\n\n    };\n\n    rtfunc('mainRT', renderSpec.width, renderSpec.height);\n\n    rtfunc('wFullRT0', renderSpec.width, renderSpec.height);\n\n    rtfunc('wFullRT1', renderSpec.width, renderSpec.height);\n\n    rtfunc('wHalfRT0', renderSpec.halfWidth, renderSpec.halfHeight);\n\n    rtfunc('wHalfRT1', renderSpec.halfWidth, renderSpec.halfHeight);\n\n}\n\n\n\nfunction render() {\n\n    renderScene();\n\n}\n\n\n\nvar animating = true;\n\nfunction toggleAnimation(elm) {\n\n    animating ^= true;\n\n    if(animating) animate();\n\n    if(elm) {\n\n        elm.innerHTML = animating? \"Stop\":\"Start\";\n\n    }\n\n}\n\n\n\nfunction stepAnimation() {\n\n    if(!animating) animate();\n\n}\n\n\n\nfunction animate() {\n\n    var curdate = new Date();\n\n    timeInfo.elapsed = (curdate - timeInfo.start) / 1000.0;\n\n    timeInfo.delta = (curdate - timeInfo.prev) / 1000.0;\n\n    timeInfo.prev = curdate;\n\n    \n\n    if(animating) requestAnimationFrame(animate);\n\n    render();\n\n}\n\n\n\nfunction makeCanvasFullScreen(canvas) {\n\n    var b = document.body;\n\n\tvar d = document.documentElement;\n\n\tfullw = Math.max(b.clientWidth , b.scrollWidth, d.scrollWidth, d.clientWidth);\n\n\tfullh = Math.max(b.clientHeight , b.scrollHeight, d.scrollHeight, d.clientHeight);\n\n\tcanvas.width = fullw;\n\n\tcanvas.height = fullh;\n\n}\n\n\n\nwindow.addEventListener('load', function(e) {\n\n    var canvas = document.getElementById(\"sakura\");\n\n    try {\n\n        makeCanvasFullScreen(canvas);\n\n        gl = canvas.getContext('experimental-webgl');\n\n    } catch(e) {\n\n        alert(\"WebGL not supported.\" + e);\n\n        console.error(e);\n\n        return;\n\n    }\n\n    \n\n    window.addEventListener('resize', onResize);\n\n    \n\n    setViewports();\n\n    createScene();\n\n    initScene();\n\n    \n\n    timeInfo.start = new Date();\n\n    timeInfo.prev = timeInfo.start;\n\n    animate();\n\n});\n\n\n\n//set window.requestAnimationFrame\n\n(function (w, r) {\n\n    w['r'+r] = w['r'+r] || w['webkitR'+r] || w['mozR'+r] || w['msR'+r] || w['oR'+r] || function(c){ w.setTimeout(c, 1000 / 60); };\n\n})(window, 'equestAnimationFrame');\n\n</script>\n\n</html>\n\n","source":"assets/webpage/index.html","raw":"<!doctype html>\n\n<html>\n\n<head>\n\n<meta charset=\"utf-8\">\n\n<title>无标题文档</title>\n</head>\n\n<style>\n\nbody {\n\n    padding:0;\n\n    margin:0;\n\n    overflow:hidden;\n\n\theight: 600px;\n\n}\n\ncanvas {\n\n    padding:0;\n\n    margin:0;\n\n}\n\ndiv.btnbg {\n\n    position:fixed;\n\n    left:0;\n\n    top:0;\n\n}\n\n</style>\n\n<body>\n<canvas id=\"sakura\"></canvas>\n\n<div class=\"btnbg\">\n\n</div>\n\n\n\n<!-- sakura shader -->\n\n<script id=\"sakura_point_vsh\" type=\"x-shader/x_vertex\">\n\nuniform mat4 uProjection;\n\nuniform mat4 uModelview;\n\nuniform vec3 uResolution;\n\nuniform vec3 uOffset;\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\n\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\n\n\nattribute vec3 aPosition;\n\nattribute vec3 aEuler;\n\nattribute vec2 aMisc; //x:size, y:fade\n\n\n\nvarying vec3 pposition;\n\nvarying float psize;\n\nvarying float palpha;\n\nvarying float pdist;\n\n\n\n//varying mat3 rotMat;\n\nvarying vec3 normX;\n\nvarying vec3 normY;\n\nvarying vec3 normZ;\n\nvarying vec3 normal;\n\n\n\nvarying float diffuse;\n\nvarying float specular;\n\nvarying float rstop;\n\nvarying float distancefade;\n\n\n\nvoid main(void) {\n\n    // Projection is based on vertical angle\n\n    vec4 pos = uModelview * vec4(aPosition + uOffset, 1.0);\n\n    gl_Position = uProjection * pos;\n\n    gl_PointSize = aMisc.x * uProjection[1][1] / -pos.z * uResolution.y * 0.5;\n\n    \n\n    pposition = pos.xyz;\n\n    psize = aMisc.x;\n\n    pdist = length(pos.xyz);\n\n    palpha = smoothstep(0.0, 1.0, (pdist - 0.1) / uFade.z);\n\n    \n\n    vec3 elrsn = sin(aEuler);\n\n    vec3 elrcs = cos(aEuler);\n\n    mat3 rotx = mat3(\n\n        1.0, 0.0, 0.0,\n\n        0.0, elrcs.x, elrsn.x,\n\n        0.0, -elrsn.x, elrcs.x\n\n    );\n\n    mat3 roty = mat3(\n\n        elrcs.y, 0.0, -elrsn.y,\n\n        0.0, 1.0, 0.0,\n\n        elrsn.y, 0.0, elrcs.y\n\n    );\n\n    mat3 rotz = mat3(\n\n        elrcs.z, elrsn.z, 0.0, \n\n        -elrsn.z, elrcs.z, 0.0,\n\n        0.0, 0.0, 1.0\n\n    );\n\n    mat3 rotmat = rotx * roty * rotz;\n\n    normal = rotmat[2];\n\n    \n\n    mat3 trrotm = mat3(\n\n        rotmat[0][0], rotmat[1][0], rotmat[2][0],\n\n        rotmat[0][1], rotmat[1][1], rotmat[2][1],\n\n        rotmat[0][2], rotmat[1][2], rotmat[2][2]\n\n    );\n\n    normX = trrotm[0];\n\n    normY = trrotm[1];\n\n    normZ = trrotm[2];\n\n    \n\n    const vec3 lit = vec3(0.6917144638660746, 0.6917144638660746, -0.20751433915982237);\n\n    \n\n    float tmpdfs = dot(lit, normal);\n\n    if(tmpdfs < 0.0) {\n\n        normal = -normal;\n\n        tmpdfs = dot(lit, normal);\n\n    }\n\n    diffuse = 0.4 + tmpdfs;\n\n    \n\n    vec3 eyev = normalize(-pos.xyz);\n\n    if(dot(eyev, normal) > 0.0) {\n\n        vec3 hv = normalize(eyev + lit);\n\n        specular = pow(max(dot(hv, normal), 0.0), 20.0);\n\n    }\n\n    else {\n\n        specular = 0.0;\n\n    }\n\n    \n\n    rstop = clamp((abs(pdist - uDOF.x) - uDOF.y) / uDOF.z, 0.0, 1.0);\n\n    rstop = pow(rstop, 0.5);\n\n    //-0.69315 = ln(0.5)\n\n    distancefade = min(1.0, exp((uFade.x - pdist) * 0.69315 / uFade.y));\n\n}\n\n</script>\n\n<script id=\"sakura_point_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\n\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\n\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\n\n\nconst vec3 fadeCol = vec3(0.08, 0.03, 0.06);\n\n\n\nvarying vec3 pposition;\n\nvarying float psize;\n\nvarying float palpha;\n\nvarying float pdist;\n\n\n\n//varying mat3 rotMat;\n\nvarying vec3 normX;\n\nvarying vec3 normY;\n\nvarying vec3 normZ;\n\nvarying vec3 normal;\n\n\n\nvarying float diffuse;\n\nvarying float specular;\n\nvarying float rstop;\n\nvarying float distancefade;\n\n\n\nfloat ellipse(vec2 p, vec2 o, vec2 r) {\n\n    vec2 lp = (p - o) / r;\n\n    return length(lp) - 1.0;\n\n}\n\n\n\nvoid main(void) {\n\n    vec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0;\n\n    vec3 d = vec3(0.0, 0.0, -1.0);\n\n    float nd = normZ.z; //dot(-normZ, d);\n\n    if(abs(nd) < 0.0001) discard;\n\n    \n\n    float np = dot(normZ, p);\n\n    vec3 tp = p + d * np / nd;\n\n    vec2 coord = vec2(dot(normX, tp), dot(normY, tp));\n\n    \n\n    //angle = 15 degree\n\n    const float flwrsn = 0.258819045102521;\n\n    const float flwrcs = 0.965925826289068;\n\n    mat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs);\n\n    vec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm;\n\n    \n\n    float r;\n\n    if(flwrp.x < 0.0) {\n\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5);\n\n    }\n\n    else {\n\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5);\n\n    }\n\n    \n\n    if(r > rstop) discard;\n\n    \n\n    vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r);\n\n    float grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35));\n\n    col *= vec3(1.0, grady, grady);\n\n    col *= mix(0.8, 1.0, pow(abs(coord.x), 0.3));\n\n    col = col * diffuse + specular;\n\n    \n\n    col = mix(fadeCol, col, distancefade);\n\n    \n\n    float alpha = (rstop > 0.001)? (0.5 - r / (rstop * 2.0)) : 1.0;\n\n    alpha = smoothstep(0.0, 1.0, alpha) * palpha;\n\n    \n\n    gl_FragColor = vec4(col * 0.5, alpha);\n\n}\n\n</script>\n\n<!-- effects -->\n\n<script id=\"fx_common_vsh\" type=\"x-shader/x_vertex\">\n\nuniform vec3 uResolution;\n\nattribute vec2 aPosition;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n\n}\n\n</script>\n\n<script id=\"bg_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\n\n\nuniform vec2 uTimes;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec3 col;\n\n    float c;\n\n    vec2 tmpv = texCoord * vec2(0.8, 1.0) - vec2(0.95, 1.0);\n\n    c = exp(-pow(length(tmpv) * 1.8, 2.0));\n\n    col = mix(vec3(0.02, 0.0, 0.03), vec3(0.96, 0.98, 1.0) * 1.5, c);\n\n    gl_FragColor = vec4(col * 0.5, 1.0);\n\n}\n\n</script>\n\n<script id=\"fx_brightbuf_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec4 col = texture2D(uSrc, texCoord);\n\n    gl_FragColor = vec4(col.rgb * 2.0 - vec3(0.5), 1.0);\n\n}\n\n</script>\n\n<script id=\"fx_dirblur_r4_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\nuniform vec4 uBlurDir; //dir(x, y), stride(z, w)\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec4 col = texture2D(uSrc, texCoord);\n\n    col = col + texture2D(uSrc, texCoord + uBlurDir.xy * uDelta);\n\n    col = col + texture2D(uSrc, texCoord - uBlurDir.xy * uDelta);\n\n    col = col + texture2D(uSrc, texCoord + (uBlurDir.xy + uBlurDir.zw) * uDelta);\n\n    col = col + texture2D(uSrc, texCoord - (uBlurDir.xy + uBlurDir.zw) * uDelta);\n\n    gl_FragColor = col / 5.0;\n\n}\n\n</script>\n\n<!-- effect fragment shader template -->\n\n<script id=\"fx_common_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    gl_FragColor = texture2D(uSrc, texCoord);\n\n}\n\n</script>\n\n<!-- post processing -->\n\n<script id=\"pp_final_vsh\" type=\"x-shader/x_vertex\">\n\nuniform vec3 uResolution;\n\nattribute vec2 aPosition;\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\nvoid main(void) {\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n\n}\n\n</script>\n\n<script id=\"pp_final_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform sampler2D uBloom;\n\nuniform vec2 uDelta;\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\nvoid main(void) {\n\n    vec4 srccol = texture2D(uSrc, texCoord) * 2.0;\n\n    vec4 bloomcol = texture2D(uBloom, texCoord);\n\n    vec4 col;\n\n    col = srccol + bloomcol * (vec4(1.0) + srccol);\n\n    col *= smoothstep(1.0, 0.0, pow(length((texCoord - vec2(0.5)) * 2.0), 1.2) * 0.5);\n\n    col = pow(col, vec4(0.45454545454545)); //(1.0 / 2.2)\n\n    \n\n    gl_FragColor = vec4(col.rgb, 1.0);\n\n    gl_FragColor.a = 1.0;\n\n}\n\n</script>\n\n</body>\n\n<script>\n\n// Utilities\n\nvar Vector3 = {};\n\nvar Matrix44 = {};\n\nVector3.create = function(x, y, z) {\n\n    return {'x':x, 'y':y, 'z':z};\n\n};\n\nVector3.dot = function (v0, v1) {\n\n    return v0.x * v1.x + v0.y * v1.y + v0.z * v1.z;\n\n};\n\nVector3.cross = function (v, v0, v1) {\n\n    v.x = v0.y * v1.z - v0.z * v1.y;\n\n    v.y = v0.z * v1.x - v0.x * v1.z;\n\n    v.z = v0.x * v1.y - v0.y * v1.x;\n\n};\n\nVector3.normalize = function (v) {\n\n    var l = v.x * v.x + v.y * v.y + v.z * v.z;\n\n    if(l > 0.00001) {\n\n        l = 1.0 / Math.sqrt(l);\n\n        v.x *= l;\n\n        v.y *= l;\n\n        v.z *= l;\n\n    }\n\n};\n\nVector3.arrayForm = function(v) {\n\n    if(v.array) {\n\n        v.array[0] = v.x;\n\n        v.array[1] = v.y;\n\n        v.array[2] = v.z;\n\n    }\n\n    else {\n\n        v.array = new Float32Array([v.x, v.y, v.z]);\n\n    }\n\n    return v.array;\n\n};\n\nMatrix44.createIdentity = function () {\n\n    return new Float32Array([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]);\n\n};\n\nMatrix44.loadProjection = function (m, aspect, vdeg, near, far) {\n\n    var h = near * Math.tan(vdeg * Math.PI / 180.0 * 0.5) * 2.0;\n\n    var w = h * aspect;\n\n    \n\n    m[0] = 2.0 * near / w;\n\n    m[1] = 0.0;\n\n    m[2] = 0.0;\n\n    m[3] = 0.0;\n\n    \n\n    m[4] = 0.0;\n\n    m[5] = 2.0 * near / h;\n\n    m[6] = 0.0;\n\n    m[7] = 0.0;\n\n    \n\n    m[8] = 0.0;\n\n    m[9] = 0.0;\n\n    m[10] = -(far + near) / (far - near);\n\n    m[11] = -1.0;\n\n    \n\n    m[12] = 0.0;\n\n    m[13] = 0.0;\n\n    m[14] = -2.0 * far * near / (far - near);\n\n    m[15] = 0.0;\n\n};\n\nMatrix44.loadLookAt = function (m, vpos, vlook, vup) {\n\n    var frontv = Vector3.create(vpos.x - vlook.x, vpos.y - vlook.y, vpos.z - vlook.z);\n\n    Vector3.normalize(frontv);\n\n    var sidev = Vector3.create(1.0, 0.0, 0.0);\n\n    Vector3.cross(sidev, vup, frontv);\n\n    Vector3.normalize(sidev);\n\n    var topv = Vector3.create(1.0, 0.0, 0.0);\n\n    Vector3.cross(topv, frontv, sidev);\n\n    Vector3.normalize(topv);\n\n    \n\n    m[0] = sidev.x;\n\n    m[1] = topv.x;\n\n    m[2] = frontv.x;\n\n    m[3] = 0.0;\n\n    \n\n    m[4] = sidev.y;\n\n    m[5] = topv.y;\n\n    m[6] = frontv.y;\n\n    m[7] = 0.0;\n\n    \n\n    m[8] = sidev.z;\n\n    m[9] = topv.z;\n\n    m[10] = frontv.z;\n\n    m[11] = 0.0;\n\n    \n\n    m[12] = -(vpos.x * m[0] + vpos.y * m[4] + vpos.z * m[8]);\n\n    m[13] = -(vpos.x * m[1] + vpos.y * m[5] + vpos.z * m[9]);\n\n    m[14] = -(vpos.x * m[2] + vpos.y * m[6] + vpos.z * m[10]);\n\n    m[15] = 1.0;\n\n};\n\n\n\n//\n\nvar timeInfo = {\n\n    'start':0, 'prev':0, // Date\n\n    'delta':0, 'elapsed':0 // Number(sec)\n\n};\n\n\n\n//\n\nvar gl;\n\nvar renderSpec = {\n\n    'width':0,\n\n    'height':0,\n\n    'aspect':1,\n\n    'array':new Float32Array(3),\n\n    'halfWidth':0,\n\n    'halfHeight':0,\n\n    'halfArray':new Float32Array(3)\n\n    // and some render targets. see setViewport()\n\n};\n\nrenderSpec.setSize = function(w, h) {\n\n    renderSpec.width = w;\n\n    renderSpec.height = h;\n\n    renderSpec.aspect = renderSpec.width / renderSpec.height;\n\n    renderSpec.array[0] = renderSpec.width;\n\n    renderSpec.array[1] = renderSpec.height;\n\n    renderSpec.array[2] = renderSpec.aspect;\n\n    \n\n    renderSpec.halfWidth = Math.floor(w / 2);\n\n    renderSpec.halfHeight = Math.floor(h / 2);\n\n    renderSpec.halfArray[0] = renderSpec.halfWidth;\n\n    renderSpec.halfArray[1] = renderSpec.halfHeight;\n\n    renderSpec.halfArray[2] = renderSpec.halfWidth / renderSpec.halfHeight;\n\n};\n\n\n\nfunction deleteRenderTarget(rt) {\n\n    gl.deleteFramebuffer(rt.frameBuffer);\n\n    gl.deleteRenderbuffer(rt.renderBuffer);\n\n    gl.deleteTexture(rt.texture);\n\n}\n\n\n\nfunction createRenderTarget(w, h) {\n\n    var ret = {\n\n        'width':w,\n\n        'height':h,\n\n        'sizeArray':new Float32Array([w, h, w / h]),\n\n        'dtxArray':new Float32Array([1.0 / w, 1.0 / h])\n\n    };\n\n    ret.frameBuffer = gl.createFramebuffer();\n\n    ret.renderBuffer = gl.createRenderbuffer();\n\n    ret.texture = gl.createTexture();\n\n    \n\n    gl.bindTexture(gl.TEXTURE_2D, ret.texture);\n\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, w, h, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\n    \n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, ret.frameBuffer);\n\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, ret.texture, 0);\n\n    \n\n    gl.bindRenderbuffer(gl.RENDERBUFFER, ret.renderBuffer);\n\n    gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, w, h);\n\n    gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, ret.renderBuffer);\n\n    \n\n    gl.bindTexture(gl.TEXTURE_2D, null);\n\n    gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    \n\n    return ret;\n\n}\n\n\n\nfunction compileShader(shtype, shsrc) {\n\n\tvar retsh = gl.createShader(shtype);\n\n\t\n\n\tgl.shaderSource(retsh, shsrc);\n\n\tgl.compileShader(retsh);\n\n\t\n\n\tif(!gl.getShaderParameter(retsh, gl.COMPILE_STATUS)) {\n\n\t\tvar errlog = gl.getShaderInfoLog(retsh);\n\n\t\tgl.deleteShader(retsh);\n\n\t\tconsole.error(errlog);\n\n\t\treturn null;\n\n\t}\n\n\treturn retsh;\n\n}\n\n\n\nfunction createShader(vtxsrc, frgsrc, uniformlist, attrlist) {\n\n    var vsh = compileShader(gl.VERTEX_SHADER, vtxsrc);\n\n    var fsh = compileShader(gl.FRAGMENT_SHADER, frgsrc);\n\n    \n\n    if(vsh == null || fsh == null) {\n\n        return null;\n\n    }\n\n    \n\n    var prog = gl.createProgram();\n\n    gl.attachShader(prog, vsh);\n\n    gl.attachShader(prog, fsh);\n\n    \n\n    gl.deleteShader(vsh);\n\n    gl.deleteShader(fsh);\n\n    \n\n    gl.linkProgram(prog);\n\n    if (!gl.getProgramParameter(prog, gl.LINK_STATUS)) {\n\n        var errlog = gl.getProgramInfoLog(prog);\n\n        console.error(errlog);\n\n        return null;\n\n    }\n\n    \n\n    if(uniformlist) {\n\n        prog.uniforms = {};\n\n        for(var i = 0; i < uniformlist.length; i++) {\n\n            prog.uniforms[uniformlist[i]] = gl.getUniformLocation(prog, uniformlist[i]);\n\n        }\n\n    }\n\n    \n\n    if(attrlist) {\n\n        prog.attributes = {};\n\n        for(var i = 0; i < attrlist.length; i++) {\n\n            var attr = attrlist[i];\n\n            prog.attributes[attr] = gl.getAttribLocation(prog, attr);\n\n        }\n\n    }\n\n    \n\n    return prog;\n\n}\n\n\n\nfunction useShader(prog) {\n\n    gl.useProgram(prog);\n\n    for(var attr in prog.attributes) {\n\n        gl.enableVertexAttribArray(prog.attributes[attr]);;\n\n    }\n\n}\n\n\n\nfunction unuseShader(prog) {\n\n    for(var attr in prog.attributes) {\n\n        gl.disableVertexAttribArray(prog.attributes[attr]);;\n\n    }\n\n    gl.useProgram(null);\n\n}\n\n\n\n/////\n\nvar projection = {\n\n    'angle':60,\n\n    'nearfar':new Float32Array([0.1, 100.0]),\n\n    'matrix':Matrix44.createIdentity()\n\n};\n\nvar camera = {\n\n    'position':Vector3.create(0, 0, 100),\n\n    'lookat':Vector3.create(0, 0, 0),\n\n    'up':Vector3.create(0, 1, 0),\n\n    'dof':Vector3.create(10.0, 4.0, 8.0),\n\n    'matrix':Matrix44.createIdentity()\n\n};\n\n\n\nvar pointFlower = {};\n\nvar meshFlower = {};\n\nvar sceneStandBy = false;\n\n\n\nvar BlossomParticle = function () {\n\n    this.velocity = new Array(3);\n\n    this.rotation = new Array(3);\n\n    this.position = new Array(3);\n\n    this.euler = new Array(3);\n\n    this.size = 1.0;\n\n    this.alpha = 1.0;\n\n    this.zkey = 0.0;\n\n};\n\n\n\nBlossomParticle.prototype.setVelocity = function (vx, vy, vz) {\n\n    this.velocity[0] = vx;\n\n    this.velocity[1] = vy;\n\n    this.velocity[2] = vz;\n\n};\n\n\n\nBlossomParticle.prototype.setRotation = function (rx, ry, rz) {\n\n    this.rotation[0] = rx;\n\n    this.rotation[1] = ry;\n\n    this.rotation[2] = rz;\n\n};\n\n\n\nBlossomParticle.prototype.setPosition = function (nx, ny, nz) {\n\n    this.position[0] = nx;\n\n    this.position[1] = ny;\n\n    this.position[2] = nz;\n\n};\n\n\n\nBlossomParticle.prototype.setEulerAngles = function (rx, ry, rz) {\n\n    this.euler[0] = rx;\n\n    this.euler[1] = ry;\n\n    this.euler[2] = rz;\n\n};\n\n\n\nBlossomParticle.prototype.setSize = function (s) {\n\n    this.size = s;\n\n};\n\n\n\nBlossomParticle.prototype.update = function (dt, et) {\n\n    this.position[0] += this.velocity[0] * dt;\n\n    this.position[1] += this.velocity[1] * dt;\n\n    this.position[2] += this.velocity[2] * dt;\n\n    \n\n    this.euler[0] += this.rotation[0] * dt;\n\n    this.euler[1] += this.rotation[1] * dt;\n\n    this.euler[2] += this.rotation[2] * dt;\n\n};\n\n\n\nfunction createPointFlowers() {\n\n    // get point sizes\n\n    var prm = gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);\n\n    renderSpec.pointSize = {'min':prm[0], 'max':prm[1]};\n\n    \n\n    var vtxsrc = document.getElementById(\"sakura_point_vsh\").textContent;\n\n    var frgsrc = document.getElementById(\"sakura_point_fsh\").textContent;\n\n    \n\n    pointFlower.program = createShader(\n\n        vtxsrc, frgsrc,\n\n        ['uProjection', 'uModelview', 'uResolution', 'uOffset', 'uDOF', 'uFade'],\n\n        ['aPosition', 'aEuler', 'aMisc']\n\n    );\n\n    \n\n    useShader(pointFlower.program);\n\n    pointFlower.offset = new Float32Array([0.0, 0.0, 0.0]);\n\n    pointFlower.fader = Vector3.create(0.0, 10.0, 0.0);\n\n    \n\n    // paramerters: velocity[3], rotate[3]\n\n    pointFlower.numFlowers = 1600;\n\n    pointFlower.particles = new Array(pointFlower.numFlowers);\n\n    // vertex attributes {position[3], euler_xyz[3], size[1]}\n\n    pointFlower.dataArray = new Float32Array(pointFlower.numFlowers * (3 + 3 + 2));\n\n    pointFlower.positionArrayOffset = 0;\n\n    pointFlower.eulerArrayOffset = pointFlower.numFlowers * 3;\n\n    pointFlower.miscArrayOffset = pointFlower.numFlowers * 6;\n\n    \n\n    pointFlower.buffer = gl.createBuffer();\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    \n\n    unuseShader(pointFlower.program);\n\n    \n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        pointFlower.particles[i] = new BlossomParticle();\n\n    }\n\n}\n\n\n\nfunction initPointFlowers() {\n\n    //area\n\n    pointFlower.area = Vector3.create(20.0, 20.0, 20.0);\n\n    pointFlower.area.x = pointFlower.area.y * renderSpec.aspect;\n\n    \n\n    pointFlower.fader.x = 10.0; //env fade start\n\n    pointFlower.fader.y = pointFlower.area.z; //env fade half\n\n    pointFlower.fader.z = 0.1;  //near fade start\n\n    \n\n    //particles\n\n    var PI2 = Math.PI * 2.0;\n\n    var tmpv3 = Vector3.create(0, 0, 0);\n\n    var tmpv = 0;\n\n    var symmetryrand = function() {return (Math.random() * 2.0 - 1.0);};\n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var tmpprtcl = pointFlower.particles[i];\n\n        \n\n        //velocity\n\n        tmpv3.x = symmetryrand() * 0.3 + 0.8;\n\n        tmpv3.y = symmetryrand() * 0.2 - 1.0;\n\n        tmpv3.z = symmetryrand() * 0.3 + 0.5;\n\n        Vector3.normalize(tmpv3);\n\n        tmpv = 2.0 + Math.random() * 1.0;\n\n        tmpprtcl.setVelocity(tmpv3.x * tmpv, tmpv3.y * tmpv, tmpv3.z * tmpv);\n\n        \n\n        //rotation\n\n        tmpprtcl.setRotation(\n\n            symmetryrand() * PI2 * 0.5,\n\n            symmetryrand() * PI2 * 0.5,\n\n            symmetryrand() * PI2 * 0.5\n\n        );\n\n        \n\n        //position\n\n        tmpprtcl.setPosition(\n\n            symmetryrand() * pointFlower.area.x,\n\n            symmetryrand() * pointFlower.area.y,\n\n            symmetryrand() * pointFlower.area.z\n\n        );\n\n        \n\n        //euler\n\n        tmpprtcl.setEulerAngles(\n\n            Math.random() * Math.PI * 2.0,\n\n            Math.random() * Math.PI * 2.0,\n\n            Math.random() * Math.PI * 2.0\n\n        );\n\n        \n\n        //size\n\n        tmpprtcl.setSize(0.9 + Math.random() * 0.1);\n\n    }\n\n}\n\n\n\nfunction renderPointFlowers() {\n\n    //update\n\n    var PI2 = Math.PI * 2.0;\n\n    var limit = [pointFlower.area.x, pointFlower.area.y, pointFlower.area.z];\n\n    var repeatPos = function (prt, cmp, limit) {\n\n        if(Math.abs(prt.position[cmp]) - prt.size * 0.5 > limit) {\n\n            //out of area\n\n            if(prt.position[cmp] > 0) {\n\n                prt.position[cmp] -= limit * 2.0;\n\n            }\n\n            else {\n\n                prt.position[cmp] += limit * 2.0;\n\n            }\n\n        }\n\n    };\n\n    var repeatEuler = function (prt, cmp) {\n\n        prt.euler[cmp] = prt.euler[cmp] % PI2;\n\n        if(prt.euler[cmp] < 0.0) {\n\n            prt.euler[cmp] += PI2;\n\n        }\n\n    };\n\n    \n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var prtcl = pointFlower.particles[i];\n\n        prtcl.update(timeInfo.delta, timeInfo.elapsed);\n\n        repeatPos(prtcl, 0, pointFlower.area.x);\n\n        repeatPos(prtcl, 1, pointFlower.area.y);\n\n        repeatPos(prtcl, 2, pointFlower.area.z);\n\n        repeatEuler(prtcl, 0);\n\n        repeatEuler(prtcl, 1);\n\n        repeatEuler(prtcl, 2);\n\n        \n\n        prtcl.alpha = 1.0;//(pointFlower.area.z - prtcl.position[2]) * 0.5;\n\n        \n\n        prtcl.zkey = (camera.matrix[2] * prtcl.position[0]\n\n                    + camera.matrix[6] * prtcl.position[1]\n\n                    + camera.matrix[10] * prtcl.position[2]\n\n                    + camera.matrix[14]);\n\n    }\n\n    \n\n    // sort\n\n    pointFlower.particles.sort(function(p0, p1){return p0.zkey - p1.zkey;});\n\n    \n\n    // update data\n\n    var ipos = pointFlower.positionArrayOffset;\n\n    var ieuler = pointFlower.eulerArrayOffset;\n\n    var imisc = pointFlower.miscArrayOffset;\n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var prtcl = pointFlower.particles[i];\n\n        pointFlower.dataArray[ipos] = prtcl.position[0];\n\n        pointFlower.dataArray[ipos + 1] = prtcl.position[1];\n\n        pointFlower.dataArray[ipos + 2] = prtcl.position[2];\n\n        ipos += 3;\n\n        pointFlower.dataArray[ieuler] = prtcl.euler[0];\n\n        pointFlower.dataArray[ieuler + 1] = prtcl.euler[1];\n\n        pointFlower.dataArray[ieuler + 2] = prtcl.euler[2];\n\n        ieuler += 3;\n\n        pointFlower.dataArray[imisc] = prtcl.size;\n\n        pointFlower.dataArray[imisc + 1] = prtcl.alpha;\n\n        imisc += 2;\n\n    }\n\n    \n\n    //draw\n\n    gl.enable(gl.BLEND);\n\n    //gl.disable(gl.DEPTH_TEST);\n\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n    \n\n    var prog = pointFlower.program;\n\n    useShader(prog);\n\n    \n\n    gl.uniformMatrix4fv(prog.uniforms.uProjection, false, projection.matrix);\n\n    gl.uniformMatrix4fv(prog.uniforms.uModelview, false, camera.matrix);\n\n    gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);\n\n    gl.uniform3fv(prog.uniforms.uDOF, Vector3.arrayForm(camera.dof));\n\n    gl.uniform3fv(prog.uniforms.uFade, Vector3.arrayForm(pointFlower.fader));\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);\n\n    \n\n    gl.vertexAttribPointer(prog.attributes.aPosition, 3, gl.FLOAT, false, 0, pointFlower.positionArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    gl.vertexAttribPointer(prog.attributes.aEuler, 3, gl.FLOAT, false, 0, pointFlower.eulerArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    gl.vertexAttribPointer(prog.attributes.aMisc, 2, gl.FLOAT, false, 0, pointFlower.miscArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    \n\n    // doubler\n\n    for(var i = 1; i < 2; i++) {\n\n        var zpos = i * -2.0;\n\n        pointFlower.offset[0] = pointFlower.area.x * -1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y * -1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x * -1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y *  1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x *  1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y * -1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x *  1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y *  1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n    }\n\n    \n\n    //main\n\n    pointFlower.offset[0] = 0.0;\n\n    pointFlower.offset[1] = 0.0;\n\n    pointFlower.offset[2] = 0.0;\n\n    gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n    gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    unuseShader(prog);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n    gl.disable(gl.BLEND);\n\n}\n\n\n\n// effects\n\n//common util\n\nfunction createEffectProgram(vtxsrc, frgsrc, exunifs, exattrs) {\n\n    var ret = {};\n\n    var unifs = ['uResolution', 'uSrc', 'uDelta'];\n\n    if(exunifs) {\n\n        unifs = unifs.concat(exunifs);\n\n    }\n\n    var attrs = ['aPosition'];\n\n    if(exattrs) {\n\n        attrs = attrs.concat(exattrs);\n\n    }\n\n    \n\n    ret.program = createShader(vtxsrc, frgsrc, unifs, attrs);\n\n    useShader(ret.program);\n\n    \n\n    ret.dataArray = new Float32Array([\n\n        -1.0, -1.0,\n\n         1.0, -1.0,\n\n        -1.0,  1.0,\n\n         1.0,  1.0\n\n    ]);\n\n    ret.buffer = gl.createBuffer();\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, ret.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, ret.dataArray, gl.STATIC_DRAW);\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    unuseShader(ret.program);\n\n    \n\n    return ret;\n\n}\n\n\n\n// basic usage\n\n// useEffect(prog, srctex({'texture':texid, 'dtxArray':(f32)[dtx, dty]})); //basic initialize\n\n// gl.uniform**(...); //additional uniforms\n\n// drawEffect()\n\n// unuseEffect(prog)\n\n// TEXTURE0 makes src\n\nfunction useEffect(fxobj, srctex) {\n\n    var prog = fxobj.program;\n\n    useShader(prog);\n\n    gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);\n\n    \n\n    if(srctex != null) {\n\n        gl.uniform2fv(prog.uniforms.uDelta, srctex.dtxArray);\n\n        gl.uniform1i(prog.uniforms.uSrc, 0);\n\n        \n\n        gl.activeTexture(gl.TEXTURE0);\n\n        gl.bindTexture(gl.TEXTURE_2D, srctex.texture);\n\n    }\n\n}\n\nfunction drawEffect(fxobj) {\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, fxobj.buffer);\n\n    gl.vertexAttribPointer(fxobj.program.attributes.aPosition, 2, gl.FLOAT, false, 0, 0);\n\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n}\n\nfunction unuseEffect(fxobj) {\n\n    unuseShader(fxobj.program);\n\n}\n\n\n\nvar effectLib = {};\n\nfunction createEffectLib() {\n\n    \n\n    var vtxsrc, frgsrc;\n\n    //common\n\n    var cmnvtxsrc = document.getElementById(\"fx_common_vsh\").textContent;\n\n    \n\n    //background\n\n    frgsrc = document.getElementById(\"bg_fsh\").textContent;\n\n    effectLib.sceneBg = createEffectProgram(cmnvtxsrc, frgsrc, ['uTimes'], null);\n\n    \n\n    // make brightpixels buffer\n\n    frgsrc = document.getElementById(\"fx_brightbuf_fsh\").textContent;\n\n    effectLib.mkBrightBuf = createEffectProgram(cmnvtxsrc, frgsrc, null, null);\n\n    \n\n    // direction blur\n\n    frgsrc = document.getElementById(\"fx_dirblur_r4_fsh\").textContent;\n\n    effectLib.dirBlur = createEffectProgram(cmnvtxsrc, frgsrc, ['uBlurDir'], null);\n\n    \n\n    //final composite\n\n    vtxsrc = document.getElementById(\"pp_final_vsh\").textContent;\n\n    frgsrc = document.getElementById(\"pp_final_fsh\").textContent;\n\n    effectLib.finalComp = createEffectProgram(vtxsrc, frgsrc, ['uBloom'], null);\n\n}\n\n\n\n// background\n\nfunction createBackground() {\n\n    //console.log(\"create background\");\n\n}\n\nfunction initBackground() {\n\n    //console.log(\"init background\");\n\n}\n\nfunction renderBackground() {\n\n    gl.disable(gl.DEPTH_TEST);\n\n    \n\n    useEffect(effectLib.sceneBg, null);\n\n    gl.uniform2f(effectLib.sceneBg.program.uniforms.uTimes, timeInfo.elapsed, timeInfo.delta);\n\n    drawEffect(effectLib.sceneBg);\n\n    unuseEffect(effectLib.sceneBg);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n}\n\n\n\n// post process\n\nvar postProcess = {};\n\nfunction createPostProcess() {\n\n    //console.log(\"create post process\");\n\n}\n\nfunction initPostProcess() {\n\n    //console.log(\"init post process\");\n\n}\n\n\n\nfunction renderPostProcess() {\n\n    gl.enable(gl.TEXTURE_2D);\n\n    gl.disable(gl.DEPTH_TEST);\n\n    var bindRT = function (rt, isclear) {\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, rt.frameBuffer);\n\n        gl.viewport(0, 0, rt.width, rt.height);\n\n        if(isclear) {\n\n            gl.clearColor(0, 0, 0, 0);\n\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n        }\n\n    };\n\n    \n\n    //make bright buff\n\n    bindRT(renderSpec.wHalfRT0, true);\n\n    useEffect(effectLib.mkBrightBuf, renderSpec.mainRT);\n\n    drawEffect(effectLib.mkBrightBuf);\n\n    unuseEffect(effectLib.mkBrightBuf);\n\n    \n\n    // make bloom\n\n    for(var i = 0; i < 2; i++) {\n\n        var p = 1.5 + 1 * i;\n\n        var s = 2.0 + 1 * i;\n\n        bindRT(renderSpec.wHalfRT1, true);\n\n        useEffect(effectLib.dirBlur, renderSpec.wHalfRT0);\n\n        gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir, p, 0.0, s, 0.0);\n\n        drawEffect(effectLib.dirBlur);\n\n        unuseEffect(effectLib.dirBlur);\n\n        \n\n        bindRT(renderSpec.wHalfRT0, true);\n\n        useEffect(effectLib.dirBlur, renderSpec.wHalfRT1);\n\n        gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir, 0.0, p, 0.0, s);\n\n        drawEffect(effectLib.dirBlur);\n\n        unuseEffect(effectLib.dirBlur);\n\n    }\n\n    \n\n    //display\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    gl.viewport(0, 0, renderSpec.width, renderSpec.height);\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    \n\n    useEffect(effectLib.finalComp, renderSpec.mainRT);\n\n    gl.uniform1i(effectLib.finalComp.program.uniforms.uBloom, 1);\n\n    gl.activeTexture(gl.TEXTURE1);\n\n    gl.bindTexture(gl.TEXTURE_2D, renderSpec.wHalfRT0.texture);\n\n    drawEffect(effectLib.finalComp);\n\n    unuseEffect(effectLib.finalComp);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n}\n\n\n\n/////\n\nvar SceneEnv = {};\n\nfunction createScene() {\n\n    createEffectLib();\n\n    createBackground();\n\n    createPointFlowers();\n\n    createPostProcess();\n\n    sceneStandBy = true;\n\n}\n\n\n\nfunction initScene() {\n\n    initBackground();\n\n    initPointFlowers();\n\n    initPostProcess();\n\n    \n\n    //camera.position.z = 17.320508;\n\n    camera.position.z = pointFlower.area.z + projection.nearfar[0];\n\n    projection.angle = Math.atan2(pointFlower.area.y, camera.position.z + pointFlower.area.z) * 180.0 / Math.PI * 2.0;\n\n    Matrix44.loadProjection(projection.matrix, renderSpec.aspect, projection.angle, projection.nearfar[0], projection.nearfar[1]);\n\n}\n\n\n\nfunction renderScene() {\n\n    //draw\n\n    Matrix44.loadLookAt(camera.matrix, camera.position, camera.lookat, camera.up);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n    \n\n    //gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, renderSpec.mainRT.frameBuffer);\n\n    gl.viewport(0, 0, renderSpec.mainRT.width, renderSpec.mainRT.height);\n\n    gl.clearColor(0.005, 0, 0.05, 0);\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    \n\n    renderBackground();\n\n    renderPointFlowers();\n\n    renderPostProcess();\n\n}\n\n\n\n/////\n\nfunction onResize(e) {\n\n    makeCanvasFullScreen(document.getElementById(\"sakura\"));\n\n    setViewports();\n\n    if(sceneStandBy) {\n\n        initScene();\n\n    }\n\n}\n\n\n\nfunction setViewports() {\n\n    renderSpec.setSize(gl.canvas.width, gl.canvas.height);\n\n    \n\n    gl.clearColor(0.2, 0.2, 0.5, 1.0);\n\n    gl.viewport(0, 0, renderSpec.width, renderSpec.height);\n\n    \n\n    var rtfunc = function (rtname, rtw, rth) {\n\n        var rt = renderSpec[rtname];\n\n        if(rt) deleteRenderTarget(rt);\n\n        renderSpec[rtname] = createRenderTarget(rtw, rth);\n\n    };\n\n    rtfunc('mainRT', renderSpec.width, renderSpec.height);\n\n    rtfunc('wFullRT0', renderSpec.width, renderSpec.height);\n\n    rtfunc('wFullRT1', renderSpec.width, renderSpec.height);\n\n    rtfunc('wHalfRT0', renderSpec.halfWidth, renderSpec.halfHeight);\n\n    rtfunc('wHalfRT1', renderSpec.halfWidth, renderSpec.halfHeight);\n\n}\n\n\n\nfunction render() {\n\n    renderScene();\n\n}\n\n\n\nvar animating = true;\n\nfunction toggleAnimation(elm) {\n\n    animating ^= true;\n\n    if(animating) animate();\n\n    if(elm) {\n\n        elm.innerHTML = animating? \"Stop\":\"Start\";\n\n    }\n\n}\n\n\n\nfunction stepAnimation() {\n\n    if(!animating) animate();\n\n}\n\n\n\nfunction animate() {\n\n    var curdate = new Date();\n\n    timeInfo.elapsed = (curdate - timeInfo.start) / 1000.0;\n\n    timeInfo.delta = (curdate - timeInfo.prev) / 1000.0;\n\n    timeInfo.prev = curdate;\n\n    \n\n    if(animating) requestAnimationFrame(animate);\n\n    render();\n\n}\n\n\n\nfunction makeCanvasFullScreen(canvas) {\n\n    var b = document.body;\n\n\tvar d = document.documentElement;\n\n\tfullw = Math.max(b.clientWidth , b.scrollWidth, d.scrollWidth, d.clientWidth);\n\n\tfullh = Math.max(b.clientHeight , b.scrollHeight, d.scrollHeight, d.clientHeight);\n\n\tcanvas.width = fullw;\n\n\tcanvas.height = fullh;\n\n}\n\n\n\nwindow.addEventListener('load', function(e) {\n\n    var canvas = document.getElementById(\"sakura\");\n\n    try {\n\n        makeCanvasFullScreen(canvas);\n\n        gl = canvas.getContext('experimental-webgl');\n\n    } catch(e) {\n\n        alert(\"WebGL not supported.\" + e);\n\n        console.error(e);\n\n        return;\n\n    }\n\n    \n\n    window.addEventListener('resize', onResize);\n\n    \n\n    setViewports();\n\n    createScene();\n\n    initScene();\n\n    \n\n    timeInfo.start = new Date();\n\n    timeInfo.prev = timeInfo.start;\n\n    animate();\n\n});\n\n\n\n//set window.requestAnimationFrame\n\n(function (w, r) {\n\n    w['r'+r] = w['r'+r] || w['webkitR'+r] || w['mozR'+r] || w['msR'+r] || w['oR'+r] || function(c){ w.setTimeout(c, 1000 / 60); };\n\n})(window, 'equestAnimationFrame');\n\n</script>\n\n</html>\n\n","date":"2021-04-24T12:19:28.021Z","updated":"2021-04-24T12:19:28.021Z","path":"assets/webpage/index.html","title":"","comments":1,"layout":"page","_id":"cknwz2szn000069xa2afr0fwa","content":"<!doctype html><html><head><meta charset=\"utf-8\"><title>无标题文档</title></head><style>body{padding:0;margin:0;overflow:hidden;height:600px}canvas{padding:0;margin:0}div.btnbg{position:fixed;left:0;top:0}</style><body><canvas id=\"sakura\"></canvas><div class=\"btnbg\"></div><script id=\"sakura_point_vsh\" type=\"x-shader/x_vertex\">uniform mat4 uProjection;\n\nuniform mat4 uModelview;\n\nuniform vec3 uResolution;\n\nuniform vec3 uOffset;\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\n\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\n\n\nattribute vec3 aPosition;\n\nattribute vec3 aEuler;\n\nattribute vec2 aMisc; //x:size, y:fade\n\n\n\nvarying vec3 pposition;\n\nvarying float psize;\n\nvarying float palpha;\n\nvarying float pdist;\n\n\n\n//varying mat3 rotMat;\n\nvarying vec3 normX;\n\nvarying vec3 normY;\n\nvarying vec3 normZ;\n\nvarying vec3 normal;\n\n\n\nvarying float diffuse;\n\nvarying float specular;\n\nvarying float rstop;\n\nvarying float distancefade;\n\n\n\nvoid main(void) {\n\n    // Projection is based on vertical angle\n\n    vec4 pos = uModelview * vec4(aPosition + uOffset, 1.0);\n\n    gl_Position = uProjection * pos;\n\n    gl_PointSize = aMisc.x * uProjection[1][1] / -pos.z * uResolution.y * 0.5;\n\n    \n\n    pposition = pos.xyz;\n\n    psize = aMisc.x;\n\n    pdist = length(pos.xyz);\n\n    palpha = smoothstep(0.0, 1.0, (pdist - 0.1) / uFade.z);\n\n    \n\n    vec3 elrsn = sin(aEuler);\n\n    vec3 elrcs = cos(aEuler);\n\n    mat3 rotx = mat3(\n\n        1.0, 0.0, 0.0,\n\n        0.0, elrcs.x, elrsn.x,\n\n        0.0, -elrsn.x, elrcs.x\n\n    );\n\n    mat3 roty = mat3(\n\n        elrcs.y, 0.0, -elrsn.y,\n\n        0.0, 1.0, 0.0,\n\n        elrsn.y, 0.0, elrcs.y\n\n    );\n\n    mat3 rotz = mat3(\n\n        elrcs.z, elrsn.z, 0.0, \n\n        -elrsn.z, elrcs.z, 0.0,\n\n        0.0, 0.0, 1.0\n\n    );\n\n    mat3 rotmat = rotx * roty * rotz;\n\n    normal = rotmat[2];\n\n    \n\n    mat3 trrotm = mat3(\n\n        rotmat[0][0], rotmat[1][0], rotmat[2][0],\n\n        rotmat[0][1], rotmat[1][1], rotmat[2][1],\n\n        rotmat[0][2], rotmat[1][2], rotmat[2][2]\n\n    );\n\n    normX = trrotm[0];\n\n    normY = trrotm[1];\n\n    normZ = trrotm[2];\n\n    \n\n    const vec3 lit = vec3(0.6917144638660746, 0.6917144638660746, -0.20751433915982237);\n\n    \n\n    float tmpdfs = dot(lit, normal);\n\n    if(tmpdfs < 0.0) {\n\n        normal = -normal;\n\n        tmpdfs = dot(lit, normal);\n\n    }\n\n    diffuse = 0.4 + tmpdfs;\n\n    \n\n    vec3 eyev = normalize(-pos.xyz);\n\n    if(dot(eyev, normal) > 0.0) {\n\n        vec3 hv = normalize(eyev + lit);\n\n        specular = pow(max(dot(hv, normal), 0.0), 20.0);\n\n    }\n\n    else {\n\n        specular = 0.0;\n\n    }\n\n    \n\n    rstop = clamp((abs(pdist - uDOF.x) - uDOF.y) / uDOF.z, 0.0, 1.0);\n\n    rstop = pow(rstop, 0.5);\n\n    //-0.69315 = ln(0.5)\n\n    distancefade = min(1.0, exp((uFade.x - pdist) * 0.69315 / uFade.y));\n\n}</script><script id=\"sakura_point_fsh\" type=\"x-shader/x_fragment\">#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\n\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\n\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\n\n\nconst vec3 fadeCol = vec3(0.08, 0.03, 0.06);\n\n\n\nvarying vec3 pposition;\n\nvarying float psize;\n\nvarying float palpha;\n\nvarying float pdist;\n\n\n\n//varying mat3 rotMat;\n\nvarying vec3 normX;\n\nvarying vec3 normY;\n\nvarying vec3 normZ;\n\nvarying vec3 normal;\n\n\n\nvarying float diffuse;\n\nvarying float specular;\n\nvarying float rstop;\n\nvarying float distancefade;\n\n\n\nfloat ellipse(vec2 p, vec2 o, vec2 r) {\n\n    vec2 lp = (p - o) / r;\n\n    return length(lp) - 1.0;\n\n}\n\n\n\nvoid main(void) {\n\n    vec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0;\n\n    vec3 d = vec3(0.0, 0.0, -1.0);\n\n    float nd = normZ.z; //dot(-normZ, d);\n\n    if(abs(nd) < 0.0001) discard;\n\n    \n\n    float np = dot(normZ, p);\n\n    vec3 tp = p + d * np / nd;\n\n    vec2 coord = vec2(dot(normX, tp), dot(normY, tp));\n\n    \n\n    //angle = 15 degree\n\n    const float flwrsn = 0.258819045102521;\n\n    const float flwrcs = 0.965925826289068;\n\n    mat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs);\n\n    vec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm;\n\n    \n\n    float r;\n\n    if(flwrp.x < 0.0) {\n\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5);\n\n    }\n\n    else {\n\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5);\n\n    }\n\n    \n\n    if(r > rstop) discard;\n\n    \n\n    vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r);\n\n    float grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35));\n\n    col *= vec3(1.0, grady, grady);\n\n    col *= mix(0.8, 1.0, pow(abs(coord.x), 0.3));\n\n    col = col * diffuse + specular;\n\n    \n\n    col = mix(fadeCol, col, distancefade);\n\n    \n\n    float alpha = (rstop > 0.001)? (0.5 - r / (rstop * 2.0)) : 1.0;\n\n    alpha = smoothstep(0.0, 1.0, alpha) * palpha;\n\n    \n\n    gl_FragColor = vec4(col * 0.5, alpha);\n\n}</script><script id=\"fx_common_vsh\" type=\"x-shader/x_vertex\">uniform vec3 uResolution;\n\nattribute vec2 aPosition;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n\n}</script><script id=\"bg_fsh\" type=\"x-shader/x_fragment\">#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\n\n\nuniform vec2 uTimes;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec3 col;\n\n    float c;\n\n    vec2 tmpv = texCoord * vec2(0.8, 1.0) - vec2(0.95, 1.0);\n\n    c = exp(-pow(length(tmpv) * 1.8, 2.0));\n\n    col = mix(vec3(0.02, 0.0, 0.03), vec3(0.96, 0.98, 1.0) * 1.5, c);\n\n    gl_FragColor = vec4(col * 0.5, 1.0);\n\n}</script><script id=\"fx_brightbuf_fsh\" type=\"x-shader/x_fragment\">#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec4 col = texture2D(uSrc, texCoord);\n\n    gl_FragColor = vec4(col.rgb * 2.0 - vec3(0.5), 1.0);\n\n}</script><script id=\"fx_dirblur_r4_fsh\" type=\"x-shader/x_fragment\">#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\nuniform vec4 uBlurDir; //dir(x, y), stride(z, w)\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec4 col = texture2D(uSrc, texCoord);\n\n    col = col + texture2D(uSrc, texCoord + uBlurDir.xy * uDelta);\n\n    col = col + texture2D(uSrc, texCoord - uBlurDir.xy * uDelta);\n\n    col = col + texture2D(uSrc, texCoord + (uBlurDir.xy + uBlurDir.zw) * uDelta);\n\n    col = col + texture2D(uSrc, texCoord - (uBlurDir.xy + uBlurDir.zw) * uDelta);\n\n    gl_FragColor = col / 5.0;\n\n}</script><script id=\"fx_common_fsh\" type=\"x-shader/x_fragment\">#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    gl_FragColor = texture2D(uSrc, texCoord);\n\n}</script><script id=\"pp_final_vsh\" type=\"x-shader/x_vertex\">uniform vec3 uResolution;\n\nattribute vec2 aPosition;\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\nvoid main(void) {\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n\n}</script><script id=\"pp_final_fsh\" type=\"x-shader/x_fragment\">#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform sampler2D uBloom;\n\nuniform vec2 uDelta;\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\nvoid main(void) {\n\n    vec4 srccol = texture2D(uSrc, texCoord) * 2.0;\n\n    vec4 bloomcol = texture2D(uBloom, texCoord);\n\n    vec4 col;\n\n    col = srccol + bloomcol * (vec4(1.0) + srccol);\n\n    col *= smoothstep(1.0, 0.0, pow(length((texCoord - vec2(0.5)) * 2.0), 1.2) * 0.5);\n\n    col = pow(col, vec4(0.45454545454545)); //(1.0 / 2.2)\n\n    \n\n    gl_FragColor = vec4(col.rgb, 1.0);\n\n    gl_FragColor.a = 1.0;\n\n}</script></body><script>function deleteRenderTarget(e){gl.deleteFramebuffer(e.frameBuffer),gl.deleteRenderbuffer(e.renderBuffer),gl.deleteTexture(e.texture)}function createRenderTarget(e,r){var t={width:e,height:r,sizeArray:new Float32Array([e,r,e/r]),dtxArray:new Float32Array([1/e,1/r])};return t.frameBuffer=gl.createFramebuffer(),t.renderBuffer=gl.createRenderbuffer(),t.texture=gl.createTexture(),gl.bindTexture(gl.TEXTURE_2D,t.texture),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,e,r,0,gl.RGBA,gl.UNSIGNED_BYTE,null),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.bindFramebuffer(gl.FRAMEBUFFER,t.frameBuffer),gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,t.texture,0),gl.bindRenderbuffer(gl.RENDERBUFFER,t.renderBuffer),gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_COMPONENT16,e,r),gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_ATTACHMENT,gl.RENDERBUFFER,t.renderBuffer),gl.bindTexture(gl.TEXTURE_2D,null),gl.bindRenderbuffer(gl.RENDERBUFFER,null),gl.bindFramebuffer(gl.FRAMEBUFFER,null),t}function compileShader(e,r){var t=gl.createShader(e);if(gl.shaderSource(t,r),gl.compileShader(t),!gl.getShaderParameter(t,gl.COMPILE_STATUS)){var o=gl.getShaderInfoLog(t);return gl.deleteShader(t),console.error(o),null}return t}function createShader(e,r,t,o){var n=compileShader(gl.VERTEX_SHADER,e),a=compileShader(gl.FRAGMENT_SHADER,r);if(null==n||null==a)return null;var i=gl.createProgram();if(gl.attachShader(i,n),gl.attachShader(i,a),gl.deleteShader(n),gl.deleteShader(a),gl.linkProgram(i),!gl.getProgramParameter(i,gl.LINK_STATUS)){var l=gl.getProgramInfoLog(i);return console.error(l),null}if(t){i.uniforms={};for(var f=0;f<t.length;f++)i.uniforms[t[f]]=gl.getUniformLocation(i,t[f])}if(o){i.attributes={};for(var f=0;f<o.length;f++){var c=o[f];i.attributes[c]=gl.getAttribLocation(i,c)}}return i}function useShader(e){gl.useProgram(e);for(var r in e.attributes)gl.enableVertexAttribArray(e.attributes[r])}function unuseShader(e){for(var r in e.attributes)gl.disableVertexAttribArray(e.attributes[r]);gl.useProgram(null)}function createPointFlowers(){var e=gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);renderSpec.pointSize={min:e[0],max:e[1]};var r=document.getElementById(\"sakura_point_vsh\").textContent,t=document.getElementById(\"sakura_point_fsh\").textContent;pointFlower.program=createShader(r,t,[\"uProjection\",\"uModelview\",\"uResolution\",\"uOffset\",\"uDOF\",\"uFade\"],[\"aPosition\",\"aEuler\",\"aMisc\"]),useShader(pointFlower.program),pointFlower.offset=new Float32Array([0,0,0]),pointFlower.fader=Vector3.create(0,10,0),pointFlower.numFlowers=1600,pointFlower.particles=new Array(pointFlower.numFlowers),pointFlower.dataArray=new Float32Array(8*pointFlower.numFlowers),pointFlower.positionArrayOffset=0,pointFlower.eulerArrayOffset=3*pointFlower.numFlowers,pointFlower.miscArrayOffset=6*pointFlower.numFlowers,pointFlower.buffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,pointFlower.buffer),gl.bufferData(gl.ARRAY_BUFFER,pointFlower.dataArray,gl.DYNAMIC_DRAW),gl.bindBuffer(gl.ARRAY_BUFFER,null),unuseShader(pointFlower.program);for(var o=0;o<pointFlower.numFlowers;o++)pointFlower.particles[o]=new BlossomParticle}function initPointFlowers(){pointFlower.area=Vector3.create(20,20,20),pointFlower.area.x=pointFlower.area.y*renderSpec.aspect,pointFlower.fader.x=10,pointFlower.fader.y=pointFlower.area.z,pointFlower.fader.z=.1;for(var e=2*Math.PI,r=Vector3.create(0,0,0),t=0,o=function(){return 2*Math.random()-1},n=0;n<pointFlower.numFlowers;n++){var a=pointFlower.particles[n];r.x=.3*o()+.8,r.y=.2*o()-1,r.z=.3*o()+.5,Vector3.normalize(r),t=2+1*Math.random(),a.setVelocity(r.x*t,r.y*t,r.z*t),a.setRotation(o()*e*.5,o()*e*.5,o()*e*.5),a.setPosition(o()*pointFlower.area.x,o()*pointFlower.area.y,o()*pointFlower.area.z),a.setEulerAngles(Math.random()*Math.PI*2,Math.random()*Math.PI*2,Math.random()*Math.PI*2),a.setSize(.9+.1*Math.random())}}function renderPointFlowers(){for(var e=2*Math.PI,r=(pointFlower.area.x,pointFlower.area.y,pointFlower.area.z,function(e,r,t){Math.abs(e.position[r])-.5*e.size>t&&(e.position[r]>0?e.position[r]-=2*t:e.position[r]+=2*t)}),t=function(r,t){r.euler[t]=r.euler[t]%e,r.euler[t]<0&&(r.euler[t]+=e)},o=0;o<pointFlower.numFlowers;o++){var n=pointFlower.particles[o];n.update(timeInfo.delta,timeInfo.elapsed),r(n,0,pointFlower.area.x),r(n,1,pointFlower.area.y),r(n,2,pointFlower.area.z),t(n,0),t(n,1),t(n,2),n.alpha=1,n.zkey=camera.matrix[2]*n.position[0]+camera.matrix[6]*n.position[1]+camera.matrix[10]*n.position[2]+camera.matrix[14]}pointFlower.particles.sort(function(e,r){return e.zkey-r.zkey});for(var a=pointFlower.positionArrayOffset,i=pointFlower.eulerArrayOffset,l=pointFlower.miscArrayOffset,o=0;o<pointFlower.numFlowers;o++){var n=pointFlower.particles[o];pointFlower.dataArray[a]=n.position[0],pointFlower.dataArray[a+1]=n.position[1],pointFlower.dataArray[a+2]=n.position[2],a+=3,pointFlower.dataArray[i]=n.euler[0],pointFlower.dataArray[i+1]=n.euler[1],pointFlower.dataArray[i+2]=n.euler[2],i+=3,pointFlower.dataArray[l]=n.size,pointFlower.dataArray[l+1]=n.alpha,l+=2}gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA);var f=pointFlower.program;useShader(f),gl.uniformMatrix4fv(f.uniforms.uProjection,!1,projection.matrix),gl.uniformMatrix4fv(f.uniforms.uModelview,!1,camera.matrix),gl.uniform3fv(f.uniforms.uResolution,renderSpec.array),gl.uniform3fv(f.uniforms.uDOF,Vector3.arrayForm(camera.dof)),gl.uniform3fv(f.uniforms.uFade,Vector3.arrayForm(pointFlower.fader)),gl.bindBuffer(gl.ARRAY_BUFFER,pointFlower.buffer),gl.bufferData(gl.ARRAY_BUFFER,pointFlower.dataArray,gl.DYNAMIC_DRAW),gl.vertexAttribPointer(f.attributes.aPosition,3,gl.FLOAT,!1,0,pointFlower.positionArrayOffset*Float32Array.BYTES_PER_ELEMENT),gl.vertexAttribPointer(f.attributes.aEuler,3,gl.FLOAT,!1,0,pointFlower.eulerArrayOffset*Float32Array.BYTES_PER_ELEMENT),gl.vertexAttribPointer(f.attributes.aMisc,2,gl.FLOAT,!1,0,pointFlower.miscArrayOffset*Float32Array.BYTES_PER_ELEMENT);for(var o=1;o<2;o++){var c=-2*o;pointFlower.offset[0]=-1*pointFlower.area.x,pointFlower.offset[1]=-1*pointFlower.area.y,pointFlower.offset[2]=pointFlower.area.z*c,gl.uniform3fv(f.uniforms.uOffset,pointFlower.offset),gl.drawArrays(gl.POINT,0,pointFlower.numFlowers),pointFlower.offset[0]=-1*pointFlower.area.x,pointFlower.offset[1]=1*pointFlower.area.y,pointFlower.offset[2]=pointFlower.area.z*c,gl.uniform3fv(f.uniforms.uOffset,pointFlower.offset),gl.drawArrays(gl.POINT,0,pointFlower.numFlowers),pointFlower.offset[0]=1*pointFlower.area.x,pointFlower.offset[1]=-1*pointFlower.area.y,pointFlower.offset[2]=pointFlower.area.z*c,gl.uniform3fv(f.uniforms.uOffset,pointFlower.offset),gl.drawArrays(gl.POINT,0,pointFlower.numFlowers),pointFlower.offset[0]=1*pointFlower.area.x,pointFlower.offset[1]=1*pointFlower.area.y,pointFlower.offset[2]=pointFlower.area.z*c,gl.uniform3fv(f.uniforms.uOffset,pointFlower.offset),gl.drawArrays(gl.POINT,0,pointFlower.numFlowers)}pointFlower.offset[0]=0,pointFlower.offset[1]=0,pointFlower.offset[2]=0,gl.uniform3fv(f.uniforms.uOffset,pointFlower.offset),gl.drawArrays(gl.POINT,0,pointFlower.numFlowers),gl.bindBuffer(gl.ARRAY_BUFFER,null),unuseShader(f),gl.enable(gl.DEPTH_TEST),gl.disable(gl.BLEND)}function createEffectProgram(e,r,t,o){var n={},a=[\"uResolution\",\"uSrc\",\"uDelta\"];t&&(a=a.concat(t));var i=[\"aPosition\"];return o&&(i=i.concat(o)),n.program=createShader(e,r,a,i),useShader(n.program),n.dataArray=new Float32Array([-1,-1,1,-1,-1,1,1,1]),n.buffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,n.buffer),gl.bufferData(gl.ARRAY_BUFFER,n.dataArray,gl.STATIC_DRAW),gl.bindBuffer(gl.ARRAY_BUFFER,null),unuseShader(n.program),n}function useEffect(e,r){var t=e.program;useShader(t),gl.uniform3fv(t.uniforms.uResolution,renderSpec.array),null!=r&&(gl.uniform2fv(t.uniforms.uDelta,r.dtxArray),gl.uniform1i(t.uniforms.uSrc,0),gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,r.texture))}function drawEffect(e){gl.bindBuffer(gl.ARRAY_BUFFER,e.buffer),gl.vertexAttribPointer(e.program.attributes.aPosition,2,gl.FLOAT,!1,0,0),gl.drawArrays(gl.TRIANGLE_STRIP,0,4)}function unuseEffect(e){unuseShader(e.program)}function createEffectLib(){var e,r,t=document.getElementById(\"fx_common_vsh\").textContent;r=document.getElementById(\"bg_fsh\").textContent,effectLib.sceneBg=createEffectProgram(t,r,[\"uTimes\"],null),r=document.getElementById(\"fx_brightbuf_fsh\").textContent,effectLib.mkBrightBuf=createEffectProgram(t,r,null,null),r=document.getElementById(\"fx_dirblur_r4_fsh\").textContent,effectLib.dirBlur=createEffectProgram(t,r,[\"uBlurDir\"],null),e=document.getElementById(\"pp_final_vsh\").textContent,r=document.getElementById(\"pp_final_fsh\").textContent,effectLib.finalComp=createEffectProgram(e,r,[\"uBloom\"],null)}function createBackground(){}function initBackground(){}function renderBackground(){gl.disable(gl.DEPTH_TEST),useEffect(effectLib.sceneBg,null),gl.uniform2f(effectLib.sceneBg.program.uniforms.uTimes,timeInfo.elapsed,timeInfo.delta),drawEffect(effectLib.sceneBg),unuseEffect(effectLib.sceneBg),gl.enable(gl.DEPTH_TEST)}function createPostProcess(){}function initPostProcess(){}function renderPostProcess(){gl.enable(gl.TEXTURE_2D),gl.disable(gl.DEPTH_TEST);var e=function(e,r){gl.bindFramebuffer(gl.FRAMEBUFFER,e.frameBuffer),gl.viewport(0,0,e.width,e.height),r&&(gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT))};e(renderSpec.wHalfRT0,!0),useEffect(effectLib.mkBrightBuf,renderSpec.mainRT),drawEffect(effectLib.mkBrightBuf),unuseEffect(effectLib.mkBrightBuf);for(var r=0;r<2;r++){var t=1.5+1*r,o=2+1*r;e(renderSpec.wHalfRT1,!0),useEffect(effectLib.dirBlur,renderSpec.wHalfRT0),gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir,t,0,o,0),drawEffect(effectLib.dirBlur),unuseEffect(effectLib.dirBlur),e(renderSpec.wHalfRT0,!0),useEffect(effectLib.dirBlur,renderSpec.wHalfRT1),gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir,0,t,0,o),drawEffect(effectLib.dirBlur),unuseEffect(effectLib.dirBlur)}gl.bindFramebuffer(gl.FRAMEBUFFER,null),gl.viewport(0,0,renderSpec.width,renderSpec.height),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),useEffect(effectLib.finalComp,renderSpec.mainRT),gl.uniform1i(effectLib.finalComp.program.uniforms.uBloom,1),gl.activeTexture(gl.TEXTURE1),gl.bindTexture(gl.TEXTURE_2D,renderSpec.wHalfRT0.texture),drawEffect(effectLib.finalComp),unuseEffect(effectLib.finalComp),gl.enable(gl.DEPTH_TEST)}function createScene(){createEffectLib(),createBackground(),createPointFlowers(),createPostProcess(),sceneStandBy=!0}function initScene(){initBackground(),initPointFlowers(),initPostProcess(),camera.position.z=pointFlower.area.z+projection.nearfar[0],projection.angle=180*Math.atan2(pointFlower.area.y,camera.position.z+pointFlower.area.z)/Math.PI*2,Matrix44.loadProjection(projection.matrix,renderSpec.aspect,projection.angle,projection.nearfar[0],projection.nearfar[1])}function renderScene(){Matrix44.loadLookAt(camera.matrix,camera.position,camera.lookat,camera.up),gl.enable(gl.DEPTH_TEST),gl.bindFramebuffer(gl.FRAMEBUFFER,renderSpec.mainRT.frameBuffer),gl.viewport(0,0,renderSpec.mainRT.width,renderSpec.mainRT.height),gl.clearColor(.005,0,.05,0),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),renderBackground(),renderPointFlowers(),renderPostProcess()}function onResize(e){makeCanvasFullScreen(document.getElementById(\"sakura\")),setViewports(),sceneStandBy&&initScene()}function setViewports(){renderSpec.setSize(gl.canvas.width,gl.canvas.height),gl.clearColor(.2,.2,.5,1),gl.viewport(0,0,renderSpec.width,renderSpec.height);var e=function(e,r,t){var o=renderSpec[e];o&&deleteRenderTarget(o),renderSpec[e]=createRenderTarget(r,t)};e(\"mainRT\",renderSpec.width,renderSpec.height),e(\"wFullRT0\",renderSpec.width,renderSpec.height),e(\"wFullRT1\",renderSpec.width,renderSpec.height),e(\"wHalfRT0\",renderSpec.halfWidth,renderSpec.halfHeight),e(\"wHalfRT1\",renderSpec.halfWidth,renderSpec.halfHeight)}function render(){renderScene()}function toggleAnimation(e){animating^=!0,animating&&animate(),e&&(e.innerHTML=animating?\"Stop\":\"Start\")}function stepAnimation(){animating||animate()}function animate(){var e=new Date;timeInfo.elapsed=(e-timeInfo.start)/1e3,timeInfo.delta=(e-timeInfo.prev)/1e3,timeInfo.prev=e,animating&&requestAnimationFrame(animate),render()}function makeCanvasFullScreen(e){var r=document.body,t=document.documentElement;fullw=Math.max(r.clientWidth,r.scrollWidth,t.scrollWidth,t.clientWidth),fullh=Math.max(r.clientHeight,r.scrollHeight,t.scrollHeight,t.clientHeight),e.width=fullw,e.height=fullh}var Vector3={},Matrix44={};Vector3.create=function(e,r,t){return{x:e,y:r,z:t}},Vector3.dot=function(e,r){return e.x*r.x+e.y*r.y+e.z*r.z},Vector3.cross=function(e,r,t){e.x=r.y*t.z-r.z*t.y,e.y=r.z*t.x-r.x*t.z,e.z=r.x*t.y-r.y*t.x},Vector3.normalize=function(e){var r=e.x*e.x+e.y*e.y+e.z*e.z;r>1e-5&&(r=1/Math.sqrt(r),e.x*=r,e.y*=r,e.z*=r)},Vector3.arrayForm=function(e){return e.array?(e.array[0]=e.x,e.array[1]=e.y,e.array[2]=e.z):e.array=new Float32Array([e.x,e.y,e.z]),e.array},Matrix44.createIdentity=function(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},Matrix44.loadProjection=function(e,r,t,o,n){var a=o*Math.tan(t*Math.PI/180*.5)*2,i=a*r;e[0]=2*o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o/a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=-(n+o)/(n-o),e[11]=-1,e[12]=0,e[13]=0,e[14]=-2*n*o/(n-o),e[15]=0},Matrix44.loadLookAt=function(e,r,t,o){var n=Vector3.create(r.x-t.x,r.y-t.y,r.z-t.z);Vector3.normalize(n);var a=Vector3.create(1,0,0);Vector3.cross(a,o,n),Vector3.normalize(a);var i=Vector3.create(1,0,0);Vector3.cross(i,n,a),Vector3.normalize(i),e[0]=a.x,e[1]=i.x,e[2]=n.x,e[3]=0,e[4]=a.y,e[5]=i.y,e[6]=n.y,e[7]=0,e[8]=a.z,e[9]=i.z,e[10]=n.z,e[11]=0,e[12]=-(r.x*e[0]+r.y*e[4]+r.z*e[8]),e[13]=-(r.x*e[1]+r.y*e[5]+r.z*e[9]),e[14]=-(r.x*e[2]+r.y*e[6]+r.z*e[10]),e[15]=1};var timeInfo={start:0,prev:0,delta:0,elapsed:0},gl,renderSpec={width:0,height:0,aspect:1,array:new Float32Array(3),halfWidth:0,halfHeight:0,halfArray:new Float32Array(3)};renderSpec.setSize=function(e,r){renderSpec.width=e,renderSpec.height=r,renderSpec.aspect=renderSpec.width/renderSpec.height,renderSpec.array[0]=renderSpec.width,renderSpec.array[1]=renderSpec.height,renderSpec.array[2]=renderSpec.aspect,renderSpec.halfWidth=Math.floor(e/2),renderSpec.halfHeight=Math.floor(r/2),renderSpec.halfArray[0]=renderSpec.halfWidth,renderSpec.halfArray[1]=renderSpec.halfHeight,renderSpec.halfArray[2]=renderSpec.halfWidth/renderSpec.halfHeight};var projection={angle:60,nearfar:new Float32Array([.1,100]),matrix:Matrix44.createIdentity()},camera={position:Vector3.create(0,0,100),lookat:Vector3.create(0,0,0),up:Vector3.create(0,1,0),dof:Vector3.create(10,4,8),matrix:Matrix44.createIdentity()},pointFlower={},meshFlower={},sceneStandBy=!1,BlossomParticle=function(){this.velocity=new Array(3),this.rotation=new Array(3),this.position=new Array(3),this.euler=new Array(3),this.size=1,this.alpha=1,this.zkey=0};BlossomParticle.prototype.setVelocity=function(e,r,t){this.velocity[0]=e,this.velocity[1]=r,this.velocity[2]=t},BlossomParticle.prototype.setRotation=function(e,r,t){this.rotation[0]=e,this.rotation[1]=r,this.rotation[2]=t},BlossomParticle.prototype.setPosition=function(e,r,t){this.position[0]=e,this.position[1]=r,this.position[2]=t},BlossomParticle.prototype.setEulerAngles=function(e,r,t){this.euler[0]=e,this.euler[1]=r,this.euler[2]=t},BlossomParticle.prototype.setSize=function(e){this.size=e},BlossomParticle.prototype.update=function(e,r){this.position[0]+=this.velocity[0]*e,this.position[1]+=this.velocity[1]*e,this.position[2]+=this.velocity[2]*e,this.euler[0]+=this.rotation[0]*e,this.euler[1]+=this.rotation[1]*e,this.euler[2]+=this.rotation[2]*e};var effectLib={},postProcess={},SceneEnv={},animating=!0;window.addEventListener(\"load\",function(e){var r=document.getElementById(\"sakura\");try{makeCanvasFullScreen(r),gl=r.getContext(\"experimental-webgl\")}catch(e){return alert(\"WebGL not supported.\"+e),void console.error(e)}window.addEventListener(\"resize\",onResize),setViewports(),createScene(),initScene(),timeInfo.start=new Date,timeInfo.prev=timeInfo.start,animate()}),function(e,r){e[\"r\"+r]=e[\"r\"+r]||e[\"webkitR\"+r]||e[\"mozR\"+r]||e[\"msR\"+r]||e[\"oR\"+r]||function(r){e.setTimeout(r,1e3/60)}}(window,\"equestAnimationFrame\")</script></html>","site":{"data":{}},"excerpt":"","more":"<!doctype html><html><head><meta charset=\"utf-8\"><title>无标题文档</title></head><style>body{padding:0;margin:0;overflow:hidden;height:600px}canvas{padding:0;margin:0}div.btnbg{position:fixed;left:0;top:0}</style><body><canvas id=\"sakura\"></canvas><div class=\"btnbg\"></div><script id=\"sakura_point_vsh\" type=\"x-shader/x_vertex\">uniform mat4 uProjection;\n\nuniform mat4 uModelview;\n\nuniform vec3 uResolution;\n\nuniform vec3 uOffset;\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\n\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\n\n\nattribute vec3 aPosition;\n\nattribute vec3 aEuler;\n\nattribute vec2 aMisc; //x:size, y:fade\n\n\n\nvarying vec3 pposition;\n\nvarying float psize;\n\nvarying float palpha;\n\nvarying float pdist;\n\n\n\n//varying mat3 rotMat;\n\nvarying vec3 normX;\n\nvarying vec3 normY;\n\nvarying vec3 normZ;\n\nvarying vec3 normal;\n\n\n\nvarying float diffuse;\n\nvarying float specular;\n\nvarying float rstop;\n\nvarying float distancefade;\n\n\n\nvoid main(void) {\n\n    // Projection is based on vertical angle\n\n    vec4 pos = uModelview * vec4(aPosition + uOffset, 1.0);\n\n    gl_Position = uProjection * pos;\n\n    gl_PointSize = aMisc.x * uProjection[1][1] / -pos.z * uResolution.y * 0.5;\n\n    \n\n    pposition = pos.xyz;\n\n    psize = aMisc.x;\n\n    pdist = length(pos.xyz);\n\n    palpha = smoothstep(0.0, 1.0, (pdist - 0.1) / uFade.z);\n\n    \n\n    vec3 elrsn = sin(aEuler);\n\n    vec3 elrcs = cos(aEuler);\n\n    mat3 rotx = mat3(\n\n        1.0, 0.0, 0.0,\n\n        0.0, elrcs.x, elrsn.x,\n\n        0.0, -elrsn.x, elrcs.x\n\n    );\n\n    mat3 roty = mat3(\n\n        elrcs.y, 0.0, -elrsn.y,\n\n        0.0, 1.0, 0.0,\n\n        elrsn.y, 0.0, elrcs.y\n\n    );\n\n    mat3 rotz = mat3(\n\n        elrcs.z, elrsn.z, 0.0, \n\n        -elrsn.z, elrcs.z, 0.0,\n\n        0.0, 0.0, 1.0\n\n    );\n\n    mat3 rotmat = rotx * roty * rotz;\n\n    normal = rotmat[2];\n\n    \n\n    mat3 trrotm = mat3(\n\n        rotmat[0][0], rotmat[1][0], rotmat[2][0],\n\n        rotmat[0][1], rotmat[1][1], rotmat[2][1],\n\n        rotmat[0][2], rotmat[1][2], rotmat[2][2]\n\n    );\n\n    normX = trrotm[0];\n\n    normY = trrotm[1];\n\n    normZ = trrotm[2];\n\n    \n\n    const vec3 lit = vec3(0.6917144638660746, 0.6917144638660746, -0.20751433915982237);\n\n    \n\n    float tmpdfs = dot(lit, normal);\n\n    if(tmpdfs < 0.0) {\n\n        normal = -normal;\n\n        tmpdfs = dot(lit, normal);\n\n    }\n\n    diffuse = 0.4 + tmpdfs;\n\n    \n\n    vec3 eyev = normalize(-pos.xyz);\n\n    if(dot(eyev, normal) > 0.0) {\n\n        vec3 hv = normalize(eyev + lit);\n\n        specular = pow(max(dot(hv, normal), 0.0), 20.0);\n\n    }\n\n    else {\n\n        specular = 0.0;\n\n    }\n\n    \n\n    rstop = clamp((abs(pdist - uDOF.x) - uDOF.y) / uDOF.z, 0.0, 1.0);\n\n    rstop = pow(rstop, 0.5);\n\n    //-0.69315 = ln(0.5)\n\n    distancefade = min(1.0, exp((uFade.x - pdist) * 0.69315 / uFade.y));\n\n}</script><script id=\"sakura_point_fsh\" type=\"x-shader/x_fragment\">#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\n\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\n\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\n\n\nconst vec3 fadeCol = vec3(0.08, 0.03, 0.06);\n\n\n\nvarying vec3 pposition;\n\nvarying float psize;\n\nvarying float palpha;\n\nvarying float pdist;\n\n\n\n//varying mat3 rotMat;\n\nvarying vec3 normX;\n\nvarying vec3 normY;\n\nvarying vec3 normZ;\n\nvarying vec3 normal;\n\n\n\nvarying float diffuse;\n\nvarying float specular;\n\nvarying float rstop;\n\nvarying float distancefade;\n\n\n\nfloat ellipse(vec2 p, vec2 o, vec2 r) {\n\n    vec2 lp = (p - o) / r;\n\n    return length(lp) - 1.0;\n\n}\n\n\n\nvoid main(void) {\n\n    vec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0;\n\n    vec3 d = vec3(0.0, 0.0, -1.0);\n\n    float nd = normZ.z; //dot(-normZ, d);\n\n    if(abs(nd) < 0.0001) discard;\n\n    \n\n    float np = dot(normZ, p);\n\n    vec3 tp = p + d * np / nd;\n\n    vec2 coord = vec2(dot(normX, tp), dot(normY, tp));\n\n    \n\n    //angle = 15 degree\n\n    const float flwrsn = 0.258819045102521;\n\n    const float flwrcs = 0.965925826289068;\n\n    mat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs);\n\n    vec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm;\n\n    \n\n    float r;\n\n    if(flwrp.x < 0.0) {\n\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5);\n\n    }\n\n    else {\n\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5);\n\n    }\n\n    \n\n    if(r > rstop) discard;\n\n    \n\n    vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r);\n\n    float grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35));\n\n    col *= vec3(1.0, grady, grady);\n\n    col *= mix(0.8, 1.0, pow(abs(coord.x), 0.3));\n\n    col = col * diffuse + specular;\n\n    \n\n    col = mix(fadeCol, col, distancefade);\n\n    \n\n    float alpha = (rstop > 0.001)? (0.5 - r / (rstop * 2.0)) : 1.0;\n\n    alpha = smoothstep(0.0, 1.0, alpha) * palpha;\n\n    \n\n    gl_FragColor = vec4(col * 0.5, alpha);\n\n}</script><script id=\"fx_common_vsh\" type=\"x-shader/x_vertex\">uniform vec3 uResolution;\n\nattribute vec2 aPosition;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n\n}</script><script id=\"bg_fsh\" type=\"x-shader/x_fragment\">#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\n\n\nuniform vec2 uTimes;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec3 col;\n\n    float c;\n\n    vec2 tmpv = texCoord * vec2(0.8, 1.0) - vec2(0.95, 1.0);\n\n    c = exp(-pow(length(tmpv) * 1.8, 2.0));\n\n    col = mix(vec3(0.02, 0.0, 0.03), vec3(0.96, 0.98, 1.0) * 1.5, c);\n\n    gl_FragColor = vec4(col * 0.5, 1.0);\n\n}</script><script id=\"fx_brightbuf_fsh\" type=\"x-shader/x_fragment\">#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec4 col = texture2D(uSrc, texCoord);\n\n    gl_FragColor = vec4(col.rgb * 2.0 - vec3(0.5), 1.0);\n\n}</script><script id=\"fx_dirblur_r4_fsh\" type=\"x-shader/x_fragment\">#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\nuniform vec4 uBlurDir; //dir(x, y), stride(z, w)\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec4 col = texture2D(uSrc, texCoord);\n\n    col = col + texture2D(uSrc, texCoord + uBlurDir.xy * uDelta);\n\n    col = col + texture2D(uSrc, texCoord - uBlurDir.xy * uDelta);\n\n    col = col + texture2D(uSrc, texCoord + (uBlurDir.xy + uBlurDir.zw) * uDelta);\n\n    col = col + texture2D(uSrc, texCoord - (uBlurDir.xy + uBlurDir.zw) * uDelta);\n\n    gl_FragColor = col / 5.0;\n\n}</script><script id=\"fx_common_fsh\" type=\"x-shader/x_fragment\">#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    gl_FragColor = texture2D(uSrc, texCoord);\n\n}</script><script id=\"pp_final_vsh\" type=\"x-shader/x_vertex\">uniform vec3 uResolution;\n\nattribute vec2 aPosition;\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\nvoid main(void) {\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n\n}</script><script id=\"pp_final_fsh\" type=\"x-shader/x_fragment\">#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform sampler2D uBloom;\n\nuniform vec2 uDelta;\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\nvoid main(void) {\n\n    vec4 srccol = texture2D(uSrc, texCoord) * 2.0;\n\n    vec4 bloomcol = texture2D(uBloom, texCoord);\n\n    vec4 col;\n\n    col = srccol + bloomcol * (vec4(1.0) + srccol);\n\n    col *= smoothstep(1.0, 0.0, pow(length((texCoord - vec2(0.5)) * 2.0), 1.2) * 0.5);\n\n    col = pow(col, vec4(0.45454545454545)); //(1.0 / 2.2)\n\n    \n\n    gl_FragColor = vec4(col.rgb, 1.0);\n\n    gl_FragColor.a = 1.0;\n\n}</script></body><script>function deleteRenderTarget(e){gl.deleteFramebuffer(e.frameBuffer),gl.deleteRenderbuffer(e.renderBuffer),gl.deleteTexture(e.texture)}function createRenderTarget(e,r){var t={width:e,height:r,sizeArray:new Float32Array([e,r,e/r]),dtxArray:new Float32Array([1/e,1/r])};return t.frameBuffer=gl.createFramebuffer(),t.renderBuffer=gl.createRenderbuffer(),t.texture=gl.createTexture(),gl.bindTexture(gl.TEXTURE_2D,t.texture),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,e,r,0,gl.RGBA,gl.UNSIGNED_BYTE,null),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.bindFramebuffer(gl.FRAMEBUFFER,t.frameBuffer),gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,t.texture,0),gl.bindRenderbuffer(gl.RENDERBUFFER,t.renderBuffer),gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_COMPONENT16,e,r),gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_ATTACHMENT,gl.RENDERBUFFER,t.renderBuffer),gl.bindTexture(gl.TEXTURE_2D,null),gl.bindRenderbuffer(gl.RENDERBUFFER,null),gl.bindFramebuffer(gl.FRAMEBUFFER,null),t}function compileShader(e,r){var t=gl.createShader(e);if(gl.shaderSource(t,r),gl.compileShader(t),!gl.getShaderParameter(t,gl.COMPILE_STATUS)){var o=gl.getShaderInfoLog(t);return gl.deleteShader(t),console.error(o),null}return t}function createShader(e,r,t,o){var n=compileShader(gl.VERTEX_SHADER,e),a=compileShader(gl.FRAGMENT_SHADER,r);if(null==n||null==a)return null;var i=gl.createProgram();if(gl.attachShader(i,n),gl.attachShader(i,a),gl.deleteShader(n),gl.deleteShader(a),gl.linkProgram(i),!gl.getProgramParameter(i,gl.LINK_STATUS)){var l=gl.getProgramInfoLog(i);return console.error(l),null}if(t){i.uniforms={};for(var f=0;f<t.length;f++)i.uniforms[t[f]]=gl.getUniformLocation(i,t[f])}if(o){i.attributes={};for(var f=0;f<o.length;f++){var c=o[f];i.attributes[c]=gl.getAttribLocation(i,c)}}return i}function useShader(e){gl.useProgram(e);for(var r in e.attributes)gl.enableVertexAttribArray(e.attributes[r])}function unuseShader(e){for(var r in e.attributes)gl.disableVertexAttribArray(e.attributes[r]);gl.useProgram(null)}function createPointFlowers(){var e=gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);renderSpec.pointSize={min:e[0],max:e[1]};var r=document.getElementById(\"sakura_point_vsh\").textContent,t=document.getElementById(\"sakura_point_fsh\").textContent;pointFlower.program=createShader(r,t,[\"uProjection\",\"uModelview\",\"uResolution\",\"uOffset\",\"uDOF\",\"uFade\"],[\"aPosition\",\"aEuler\",\"aMisc\"]),useShader(pointFlower.program),pointFlower.offset=new Float32Array([0,0,0]),pointFlower.fader=Vector3.create(0,10,0),pointFlower.numFlowers=1600,pointFlower.particles=new Array(pointFlower.numFlowers),pointFlower.dataArray=new Float32Array(8*pointFlower.numFlowers),pointFlower.positionArrayOffset=0,pointFlower.eulerArrayOffset=3*pointFlower.numFlowers,pointFlower.miscArrayOffset=6*pointFlower.numFlowers,pointFlower.buffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,pointFlower.buffer),gl.bufferData(gl.ARRAY_BUFFER,pointFlower.dataArray,gl.DYNAMIC_DRAW),gl.bindBuffer(gl.ARRAY_BUFFER,null),unuseShader(pointFlower.program);for(var o=0;o<pointFlower.numFlowers;o++)pointFlower.particles[o]=new BlossomParticle}function initPointFlowers(){pointFlower.area=Vector3.create(20,20,20),pointFlower.area.x=pointFlower.area.y*renderSpec.aspect,pointFlower.fader.x=10,pointFlower.fader.y=pointFlower.area.z,pointFlower.fader.z=.1;for(var e=2*Math.PI,r=Vector3.create(0,0,0),t=0,o=function(){return 2*Math.random()-1},n=0;n<pointFlower.numFlowers;n++){var a=pointFlower.particles[n];r.x=.3*o()+.8,r.y=.2*o()-1,r.z=.3*o()+.5,Vector3.normalize(r),t=2+1*Math.random(),a.setVelocity(r.x*t,r.y*t,r.z*t),a.setRotation(o()*e*.5,o()*e*.5,o()*e*.5),a.setPosition(o()*pointFlower.area.x,o()*pointFlower.area.y,o()*pointFlower.area.z),a.setEulerAngles(Math.random()*Math.PI*2,Math.random()*Math.PI*2,Math.random()*Math.PI*2),a.setSize(.9+.1*Math.random())}}function renderPointFlowers(){for(var e=2*Math.PI,r=(pointFlower.area.x,pointFlower.area.y,pointFlower.area.z,function(e,r,t){Math.abs(e.position[r])-.5*e.size>t&&(e.position[r]>0?e.position[r]-=2*t:e.position[r]+=2*t)}),t=function(r,t){r.euler[t]=r.euler[t]%e,r.euler[t]<0&&(r.euler[t]+=e)},o=0;o<pointFlower.numFlowers;o++){var n=pointFlower.particles[o];n.update(timeInfo.delta,timeInfo.elapsed),r(n,0,pointFlower.area.x),r(n,1,pointFlower.area.y),r(n,2,pointFlower.area.z),t(n,0),t(n,1),t(n,2),n.alpha=1,n.zkey=camera.matrix[2]*n.position[0]+camera.matrix[6]*n.position[1]+camera.matrix[10]*n.position[2]+camera.matrix[14]}pointFlower.particles.sort(function(e,r){return e.zkey-r.zkey});for(var a=pointFlower.positionArrayOffset,i=pointFlower.eulerArrayOffset,l=pointFlower.miscArrayOffset,o=0;o<pointFlower.numFlowers;o++){var n=pointFlower.particles[o];pointFlower.dataArray[a]=n.position[0],pointFlower.dataArray[a+1]=n.position[1],pointFlower.dataArray[a+2]=n.position[2],a+=3,pointFlower.dataArray[i]=n.euler[0],pointFlower.dataArray[i+1]=n.euler[1],pointFlower.dataArray[i+2]=n.euler[2],i+=3,pointFlower.dataArray[l]=n.size,pointFlower.dataArray[l+1]=n.alpha,l+=2}gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA);var f=pointFlower.program;useShader(f),gl.uniformMatrix4fv(f.uniforms.uProjection,!1,projection.matrix),gl.uniformMatrix4fv(f.uniforms.uModelview,!1,camera.matrix),gl.uniform3fv(f.uniforms.uResolution,renderSpec.array),gl.uniform3fv(f.uniforms.uDOF,Vector3.arrayForm(camera.dof)),gl.uniform3fv(f.uniforms.uFade,Vector3.arrayForm(pointFlower.fader)),gl.bindBuffer(gl.ARRAY_BUFFER,pointFlower.buffer),gl.bufferData(gl.ARRAY_BUFFER,pointFlower.dataArray,gl.DYNAMIC_DRAW),gl.vertexAttribPointer(f.attributes.aPosition,3,gl.FLOAT,!1,0,pointFlower.positionArrayOffset*Float32Array.BYTES_PER_ELEMENT),gl.vertexAttribPointer(f.attributes.aEuler,3,gl.FLOAT,!1,0,pointFlower.eulerArrayOffset*Float32Array.BYTES_PER_ELEMENT),gl.vertexAttribPointer(f.attributes.aMisc,2,gl.FLOAT,!1,0,pointFlower.miscArrayOffset*Float32Array.BYTES_PER_ELEMENT);for(var o=1;o<2;o++){var c=-2*o;pointFlower.offset[0]=-1*pointFlower.area.x,pointFlower.offset[1]=-1*pointFlower.area.y,pointFlower.offset[2]=pointFlower.area.z*c,gl.uniform3fv(f.uniforms.uOffset,pointFlower.offset),gl.drawArrays(gl.POINT,0,pointFlower.numFlowers),pointFlower.offset[0]=-1*pointFlower.area.x,pointFlower.offset[1]=1*pointFlower.area.y,pointFlower.offset[2]=pointFlower.area.z*c,gl.uniform3fv(f.uniforms.uOffset,pointFlower.offset),gl.drawArrays(gl.POINT,0,pointFlower.numFlowers),pointFlower.offset[0]=1*pointFlower.area.x,pointFlower.offset[1]=-1*pointFlower.area.y,pointFlower.offset[2]=pointFlower.area.z*c,gl.uniform3fv(f.uniforms.uOffset,pointFlower.offset),gl.drawArrays(gl.POINT,0,pointFlower.numFlowers),pointFlower.offset[0]=1*pointFlower.area.x,pointFlower.offset[1]=1*pointFlower.area.y,pointFlower.offset[2]=pointFlower.area.z*c,gl.uniform3fv(f.uniforms.uOffset,pointFlower.offset),gl.drawArrays(gl.POINT,0,pointFlower.numFlowers)}pointFlower.offset[0]=0,pointFlower.offset[1]=0,pointFlower.offset[2]=0,gl.uniform3fv(f.uniforms.uOffset,pointFlower.offset),gl.drawArrays(gl.POINT,0,pointFlower.numFlowers),gl.bindBuffer(gl.ARRAY_BUFFER,null),unuseShader(f),gl.enable(gl.DEPTH_TEST),gl.disable(gl.BLEND)}function createEffectProgram(e,r,t,o){var n={},a=[\"uResolution\",\"uSrc\",\"uDelta\"];t&&(a=a.concat(t));var i=[\"aPosition\"];return o&&(i=i.concat(o)),n.program=createShader(e,r,a,i),useShader(n.program),n.dataArray=new Float32Array([-1,-1,1,-1,-1,1,1,1]),n.buffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,n.buffer),gl.bufferData(gl.ARRAY_BUFFER,n.dataArray,gl.STATIC_DRAW),gl.bindBuffer(gl.ARRAY_BUFFER,null),unuseShader(n.program),n}function useEffect(e,r){var t=e.program;useShader(t),gl.uniform3fv(t.uniforms.uResolution,renderSpec.array),null!=r&&(gl.uniform2fv(t.uniforms.uDelta,r.dtxArray),gl.uniform1i(t.uniforms.uSrc,0),gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,r.texture))}function drawEffect(e){gl.bindBuffer(gl.ARRAY_BUFFER,e.buffer),gl.vertexAttribPointer(e.program.attributes.aPosition,2,gl.FLOAT,!1,0,0),gl.drawArrays(gl.TRIANGLE_STRIP,0,4)}function unuseEffect(e){unuseShader(e.program)}function createEffectLib(){var e,r,t=document.getElementById(\"fx_common_vsh\").textContent;r=document.getElementById(\"bg_fsh\").textContent,effectLib.sceneBg=createEffectProgram(t,r,[\"uTimes\"],null),r=document.getElementById(\"fx_brightbuf_fsh\").textContent,effectLib.mkBrightBuf=createEffectProgram(t,r,null,null),r=document.getElementById(\"fx_dirblur_r4_fsh\").textContent,effectLib.dirBlur=createEffectProgram(t,r,[\"uBlurDir\"],null),e=document.getElementById(\"pp_final_vsh\").textContent,r=document.getElementById(\"pp_final_fsh\").textContent,effectLib.finalComp=createEffectProgram(e,r,[\"uBloom\"],null)}function createBackground(){}function initBackground(){}function renderBackground(){gl.disable(gl.DEPTH_TEST),useEffect(effectLib.sceneBg,null),gl.uniform2f(effectLib.sceneBg.program.uniforms.uTimes,timeInfo.elapsed,timeInfo.delta),drawEffect(effectLib.sceneBg),unuseEffect(effectLib.sceneBg),gl.enable(gl.DEPTH_TEST)}function createPostProcess(){}function initPostProcess(){}function renderPostProcess(){gl.enable(gl.TEXTURE_2D),gl.disable(gl.DEPTH_TEST);var e=function(e,r){gl.bindFramebuffer(gl.FRAMEBUFFER,e.frameBuffer),gl.viewport(0,0,e.width,e.height),r&&(gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT))};e(renderSpec.wHalfRT0,!0),useEffect(effectLib.mkBrightBuf,renderSpec.mainRT),drawEffect(effectLib.mkBrightBuf),unuseEffect(effectLib.mkBrightBuf);for(var r=0;r<2;r++){var t=1.5+1*r,o=2+1*r;e(renderSpec.wHalfRT1,!0),useEffect(effectLib.dirBlur,renderSpec.wHalfRT0),gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir,t,0,o,0),drawEffect(effectLib.dirBlur),unuseEffect(effectLib.dirBlur),e(renderSpec.wHalfRT0,!0),useEffect(effectLib.dirBlur,renderSpec.wHalfRT1),gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir,0,t,0,o),drawEffect(effectLib.dirBlur),unuseEffect(effectLib.dirBlur)}gl.bindFramebuffer(gl.FRAMEBUFFER,null),gl.viewport(0,0,renderSpec.width,renderSpec.height),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),useEffect(effectLib.finalComp,renderSpec.mainRT),gl.uniform1i(effectLib.finalComp.program.uniforms.uBloom,1),gl.activeTexture(gl.TEXTURE1),gl.bindTexture(gl.TEXTURE_2D,renderSpec.wHalfRT0.texture),drawEffect(effectLib.finalComp),unuseEffect(effectLib.finalComp),gl.enable(gl.DEPTH_TEST)}function createScene(){createEffectLib(),createBackground(),createPointFlowers(),createPostProcess(),sceneStandBy=!0}function initScene(){initBackground(),initPointFlowers(),initPostProcess(),camera.position.z=pointFlower.area.z+projection.nearfar[0],projection.angle=180*Math.atan2(pointFlower.area.y,camera.position.z+pointFlower.area.z)/Math.PI*2,Matrix44.loadProjection(projection.matrix,renderSpec.aspect,projection.angle,projection.nearfar[0],projection.nearfar[1])}function renderScene(){Matrix44.loadLookAt(camera.matrix,camera.position,camera.lookat,camera.up),gl.enable(gl.DEPTH_TEST),gl.bindFramebuffer(gl.FRAMEBUFFER,renderSpec.mainRT.frameBuffer),gl.viewport(0,0,renderSpec.mainRT.width,renderSpec.mainRT.height),gl.clearColor(.005,0,.05,0),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),renderBackground(),renderPointFlowers(),renderPostProcess()}function onResize(e){makeCanvasFullScreen(document.getElementById(\"sakura\")),setViewports(),sceneStandBy&&initScene()}function setViewports(){renderSpec.setSize(gl.canvas.width,gl.canvas.height),gl.clearColor(.2,.2,.5,1),gl.viewport(0,0,renderSpec.width,renderSpec.height);var e=function(e,r,t){var o=renderSpec[e];o&&deleteRenderTarget(o),renderSpec[e]=createRenderTarget(r,t)};e(\"mainRT\",renderSpec.width,renderSpec.height),e(\"wFullRT0\",renderSpec.width,renderSpec.height),e(\"wFullRT1\",renderSpec.width,renderSpec.height),e(\"wHalfRT0\",renderSpec.halfWidth,renderSpec.halfHeight),e(\"wHalfRT1\",renderSpec.halfWidth,renderSpec.halfHeight)}function render(){renderScene()}function toggleAnimation(e){animating^=!0,animating&&animate(),e&&(e.innerHTML=animating?\"Stop\":\"Start\")}function stepAnimation(){animating||animate()}function animate(){var e=new Date;timeInfo.elapsed=(e-timeInfo.start)/1e3,timeInfo.delta=(e-timeInfo.prev)/1e3,timeInfo.prev=e,animating&&requestAnimationFrame(animate),render()}function makeCanvasFullScreen(e){var r=document.body,t=document.documentElement;fullw=Math.max(r.clientWidth,r.scrollWidth,t.scrollWidth,t.clientWidth),fullh=Math.max(r.clientHeight,r.scrollHeight,t.scrollHeight,t.clientHeight),e.width=fullw,e.height=fullh}var Vector3={},Matrix44={};Vector3.create=function(e,r,t){return{x:e,y:r,z:t}},Vector3.dot=function(e,r){return e.x*r.x+e.y*r.y+e.z*r.z},Vector3.cross=function(e,r,t){e.x=r.y*t.z-r.z*t.y,e.y=r.z*t.x-r.x*t.z,e.z=r.x*t.y-r.y*t.x},Vector3.normalize=function(e){var r=e.x*e.x+e.y*e.y+e.z*e.z;r>1e-5&&(r=1/Math.sqrt(r),e.x*=r,e.y*=r,e.z*=r)},Vector3.arrayForm=function(e){return e.array?(e.array[0]=e.x,e.array[1]=e.y,e.array[2]=e.z):e.array=new Float32Array([e.x,e.y,e.z]),e.array},Matrix44.createIdentity=function(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},Matrix44.loadProjection=function(e,r,t,o,n){var a=o*Math.tan(t*Math.PI/180*.5)*2,i=a*r;e[0]=2*o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o/a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=-(n+o)/(n-o),e[11]=-1,e[12]=0,e[13]=0,e[14]=-2*n*o/(n-o),e[15]=0},Matrix44.loadLookAt=function(e,r,t,o){var n=Vector3.create(r.x-t.x,r.y-t.y,r.z-t.z);Vector3.normalize(n);var a=Vector3.create(1,0,0);Vector3.cross(a,o,n),Vector3.normalize(a);var i=Vector3.create(1,0,0);Vector3.cross(i,n,a),Vector3.normalize(i),e[0]=a.x,e[1]=i.x,e[2]=n.x,e[3]=0,e[4]=a.y,e[5]=i.y,e[6]=n.y,e[7]=0,e[8]=a.z,e[9]=i.z,e[10]=n.z,e[11]=0,e[12]=-(r.x*e[0]+r.y*e[4]+r.z*e[8]),e[13]=-(r.x*e[1]+r.y*e[5]+r.z*e[9]),e[14]=-(r.x*e[2]+r.y*e[6]+r.z*e[10]),e[15]=1};var timeInfo={start:0,prev:0,delta:0,elapsed:0},gl,renderSpec={width:0,height:0,aspect:1,array:new Float32Array(3),halfWidth:0,halfHeight:0,halfArray:new Float32Array(3)};renderSpec.setSize=function(e,r){renderSpec.width=e,renderSpec.height=r,renderSpec.aspect=renderSpec.width/renderSpec.height,renderSpec.array[0]=renderSpec.width,renderSpec.array[1]=renderSpec.height,renderSpec.array[2]=renderSpec.aspect,renderSpec.halfWidth=Math.floor(e/2),renderSpec.halfHeight=Math.floor(r/2),renderSpec.halfArray[0]=renderSpec.halfWidth,renderSpec.halfArray[1]=renderSpec.halfHeight,renderSpec.halfArray[2]=renderSpec.halfWidth/renderSpec.halfHeight};var projection={angle:60,nearfar:new Float32Array([.1,100]),matrix:Matrix44.createIdentity()},camera={position:Vector3.create(0,0,100),lookat:Vector3.create(0,0,0),up:Vector3.create(0,1,0),dof:Vector3.create(10,4,8),matrix:Matrix44.createIdentity()},pointFlower={},meshFlower={},sceneStandBy=!1,BlossomParticle=function(){this.velocity=new Array(3),this.rotation=new Array(3),this.position=new Array(3),this.euler=new Array(3),this.size=1,this.alpha=1,this.zkey=0};BlossomParticle.prototype.setVelocity=function(e,r,t){this.velocity[0]=e,this.velocity[1]=r,this.velocity[2]=t},BlossomParticle.prototype.setRotation=function(e,r,t){this.rotation[0]=e,this.rotation[1]=r,this.rotation[2]=t},BlossomParticle.prototype.setPosition=function(e,r,t){this.position[0]=e,this.position[1]=r,this.position[2]=t},BlossomParticle.prototype.setEulerAngles=function(e,r,t){this.euler[0]=e,this.euler[1]=r,this.euler[2]=t},BlossomParticle.prototype.setSize=function(e){this.size=e},BlossomParticle.prototype.update=function(e,r){this.position[0]+=this.velocity[0]*e,this.position[1]+=this.velocity[1]*e,this.position[2]+=this.velocity[2]*e,this.euler[0]+=this.rotation[0]*e,this.euler[1]+=this.rotation[1]*e,this.euler[2]+=this.rotation[2]*e};var effectLib={},postProcess={},SceneEnv={},animating=!0;window.addEventListener(\"load\",function(e){var r=document.getElementById(\"sakura\");try{makeCanvasFullScreen(r),gl=r.getContext(\"experimental-webgl\")}catch(e){return alert(\"WebGL not supported.\"+e),void console.error(e)}window.addEventListener(\"resize\",onResize),setViewports(),createScene(),initScene(),timeInfo.start=new Date,timeInfo.prev=timeInfo.start,animate()}),function(e,r){e[\"r\"+r]=e[\"r\"+r]||e[\"webkitR\"+r]||e[\"mozR\"+r]||e[\"msR\"+r]||e[\"oR\"+r]||function(r){e.setTimeout(r,1e3/60)}}(window,\"equestAnimationFrame\")</script></html>"}],"Post":[{"title":"markdown语法总结","date":"2017-04-12T17:59:51.000Z","description":"这只是一个语言描述的测试","_content":"\n生成目录：\n[TOC]\n\n<h2>字体\n\n粗体字：**粗体字**\n__double underscores__\n<strong>double asterisks</strong>\n\n斜体字：_斜体字_\n *single asterisks*\n<em>single asterisks</em>\n<!--more-->\n> 这是Blockquotes\n\n>> 这是二级\n\n>>> 这是三级\n\n##水平线\n\n水平线：\n\n***（*  *  *）：\n* * * \n\n- - -\n\n-----------------------------\n\n##虚线\n\n浅虚线（中文：shift + -）：\n\n————————————————————————————————————\n\n中虚线（中文：shift + - & ----）\n—————————————————————————————\n----------------------------- \n\n\n重虚线(中文：shift + - + =)：\n-——————————————————\n===================\n\n\n##着重表示\n\n带有“\\”的转义字符：\n\\*literal asterisks\\*\n\n带有下划线的二号粗体字：\n##带有下划线的二号粗体字\n\n文件类型着重表示: `*.ddd.txt`\n``There is a literal backtick (`) here.``\n<p><code>There is a literal backtick (`) here.</code></p>\n\n代码文件着重表示：<kbd>tableviewController<kbd>\n\n@(这是着重表示吗？)\n\n###`也曾醉酒鞭名马，唯恐多情累美人`\n### \n\n##链接\n\n简单链接：See my [About](/about/) page for details. \n\n网址链接：<http://www.baidu.com>\n\nqq号码：[11112121211](qq:11112121211)\n\n邮箱： 网易邮箱: <livjunjie@163.com>\n\n新浪微博： [@阳光下的向日葵](http://weibo.com/luttemars)\n\n带有文字说明的链接：[百度](http://www.baidu.com)\n\n\n\n插入图片：\n![Alt text](/assets/img/1.jpeg)\n![Alt text](/assets/img/personalimage.jpeg)\n\n\n范围文字说明：\n\n##引用\n\n```\noptions space=20\ntabstave notation=true key=A time=4/4\nnotes :q =|: (5/2.5/3.7/4) :8 7-5h6/3 ^3^ 5h6-7/5 ^3^ :q 7V/4 |\nnotes :8 t12p7/4 s5s3/4 :8 3s:16:5-7/5 :h p5/4\ntext :w, |#segno, ,|, :hd, , #tr\n```\n##列表\n\n列表1（-）：\n\n- 第一条\n- 第二条\n- 第三条\n\n列表2：\n<ul>\n<li>1</li>\n<li>2</li>\n<li>3</li>\n</ul>\n\n列表3（+）：\n\n+ 1\n+ 2\n+ 3\n\n列表4（*）：\n\n* 1\n* 2\n* 3\n\n列表5（数字.）：\n\n1. tom\n2. jerry\n3. jack\n\n##表格\n\n简单表格：\n\n|列1|列2|\n|------|-----|\n|是什么样的感觉|我不懂|\n|只是一路上|我们都在沉默|\n|其实我不要|太多的承诺|\n|只要你能说声|爱我|\n\n\n```flow\nst=>start: Start\ne=>end\nop=>operation: My Operation\ncond=>condition: Yes or No?\n\nst->op->cond\ncond(yes)->e\ncond(no)->op\n```\n\n以及时序图:\n\n```sequence\nAlice->Bob: Hello Bob, how are you?\nNote right of Bob: Bob thinks\nBob-->Alice: I am good thanks!\n```\n\n\n##代码块\n\n程序设计语言：\n\n```python\nimport os\nprint \"hello world\"\n```\n```java\nimport java.io.*;\n```\n\n\n\n","source":"_posts/markdown语法总结.md","raw":"---\ntitle: markdown语法总结\ndate: 2017-04-13 01:59:51\ntags: [脚本语言,编程,程序设计,思考总结,前端,效率]\ndescription: 这只是一个语言描述的测试\n---\n\n生成目录：\n[TOC]\n\n<h2>字体\n\n粗体字：**粗体字**\n__double underscores__\n<strong>double asterisks</strong>\n\n斜体字：_斜体字_\n *single asterisks*\n<em>single asterisks</em>\n<!--more-->\n> 这是Blockquotes\n\n>> 这是二级\n\n>>> 这是三级\n\n##水平线\n\n水平线：\n\n***（*  *  *）：\n* * * \n\n- - -\n\n-----------------------------\n\n##虚线\n\n浅虚线（中文：shift + -）：\n\n————————————————————————————————————\n\n中虚线（中文：shift + - & ----）\n—————————————————————————————\n----------------------------- \n\n\n重虚线(中文：shift + - + =)：\n-——————————————————\n===================\n\n\n##着重表示\n\n带有“\\”的转义字符：\n\\*literal asterisks\\*\n\n带有下划线的二号粗体字：\n##带有下划线的二号粗体字\n\n文件类型着重表示: `*.ddd.txt`\n``There is a literal backtick (`) here.``\n<p><code>There is a literal backtick (`) here.</code></p>\n\n代码文件着重表示：<kbd>tableviewController<kbd>\n\n@(这是着重表示吗？)\n\n###`也曾醉酒鞭名马，唯恐多情累美人`\n### \n\n##链接\n\n简单链接：See my [About](/about/) page for details. \n\n网址链接：<http://www.baidu.com>\n\nqq号码：[11112121211](qq:11112121211)\n\n邮箱： 网易邮箱: <livjunjie@163.com>\n\n新浪微博： [@阳光下的向日葵](http://weibo.com/luttemars)\n\n带有文字说明的链接：[百度](http://www.baidu.com)\n\n\n\n插入图片：\n![Alt text](/assets/img/1.jpeg)\n![Alt text](/assets/img/personalimage.jpeg)\n\n\n范围文字说明：\n\n##引用\n\n```\noptions space=20\ntabstave notation=true key=A time=4/4\nnotes :q =|: (5/2.5/3.7/4) :8 7-5h6/3 ^3^ 5h6-7/5 ^3^ :q 7V/4 |\nnotes :8 t12p7/4 s5s3/4 :8 3s:16:5-7/5 :h p5/4\ntext :w, |#segno, ,|, :hd, , #tr\n```\n##列表\n\n列表1（-）：\n\n- 第一条\n- 第二条\n- 第三条\n\n列表2：\n<ul>\n<li>1</li>\n<li>2</li>\n<li>3</li>\n</ul>\n\n列表3（+）：\n\n+ 1\n+ 2\n+ 3\n\n列表4（*）：\n\n* 1\n* 2\n* 3\n\n列表5（数字.）：\n\n1. tom\n2. jerry\n3. jack\n\n##表格\n\n简单表格：\n\n|列1|列2|\n|------|-----|\n|是什么样的感觉|我不懂|\n|只是一路上|我们都在沉默|\n|其实我不要|太多的承诺|\n|只要你能说声|爱我|\n\n\n```flow\nst=>start: Start\ne=>end\nop=>operation: My Operation\ncond=>condition: Yes or No?\n\nst->op->cond\ncond(yes)->e\ncond(no)->op\n```\n\n以及时序图:\n\n```sequence\nAlice->Bob: Hello Bob, how are you?\nNote right of Bob: Bob thinks\nBob-->Alice: I am good thanks!\n```\n\n\n##代码块\n\n程序设计语言：\n\n```python\nimport os\nprint \"hello world\"\n```\n```java\nimport java.io.*;\n```\n\n\n\n","slug":"markdown语法总结","published":1,"updated":"2017-04-19T18:15:12.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj1w3v7m000009xxa6gkq2q5q","content":"<p>生成目录：<br>[TOC]</p><p></p><h2>字体<p></p><p>粗体字：<strong>粗体字</strong><br><strong>double underscores</strong><br><strong>double asterisks</strong></p><p>斜体字：<em>斜体字</em><br><em>single asterisks</em><br><em>single asterisks</em><br><a id=\"more\"></a></p><blockquote><p>这是Blockquotes</p><blockquote><p>这是二级</p><blockquote><p>这是三级</p></blockquote></blockquote></blockquote><p>##水平线</p><p>水平线：</p><p><em>**（</em> <em></em>）：</p><hr><hr><hr><p>##虚线</p><p>浅虚线（中文：shift + -）：</p><p>————————————————————————————————————</p><p>中虚线（中文：shift + - &amp; —-）</p><h2 id=\"—————————————————————————————\"><a href=\"#—————————————————————————————\" class=\"headerlink\" title=\"—————————————————————————————\"></a>—————————————————————————————</h2><p>重虚线(中文：shift + - + =)：</p><h1 id=\"——————————————————\"><a href=\"#——————————————————\" class=\"headerlink\" title=\"-——————————————————\"></a>-——————————————————</h1><p>##着重表示</p><p>带有“\\”的转义字符：<br>*literal asterisks*</p><p>带有下划线的二号粗体字：</p><p>##带有下划线的二号粗体字</p><p>文件类型着重表示: <code>*.ddd.txt</code><br><code>There is a literal backtick (`) here.</code></p><p><code>There is a literal backtick (`) here.</code></p><p>代码文件着重表示：<kbd>tableviewController<kbd></kbd></kbd></p><p>@(这是着重表示吗？)</p><p>###<code>也曾醉酒鞭名马，唯恐多情累美人</code></p><p>###</p><p>##链接</p><p>简单链接：See my <a href=\"/about/\">About</a> page for details.</p><p>网址链接：<a href=\"http://www.baidu.com\">http://www.baidu.com</a></p><p>qq号码：<a href=\"qq:11112121211\">11112121211</a></p><p>邮箱： 网易邮箱: <a href=\"&#x6d;&#x61;&#x69;&#x6c;&#116;&#111;&#58;&#108;&#x69;&#x76;&#106;&#x75;&#x6e;&#x6a;&#105;&#x65;&#64;&#49;&#x36;&#x33;&#x2e;&#x63;&#111;&#109;\">&#108;&#x69;&#x76;&#106;&#x75;&#x6e;&#x6a;&#105;&#x65;&#64;&#49;&#x36;&#x33;&#x2e;&#x63;&#111;&#109;</a></p><p>新浪微博： <a href=\"http://weibo.com/luttemars\">@阳光下的向日葵</a></p><p>带有文字说明的链接：<a href=\"http://www.baidu.com\">百度</a></p><p>插入图片：<br><img src=\"/assets/img/1.jpeg\" alt=\"Alt text\"><br><img src=\"/assets/img/personalimage.jpeg\" alt=\"Alt text\"></p><p>范围文字说明：</p><p>##引用</p><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">options space=<span class=\"number\">20</span></div><div class=\"line\">tabstave notation=<span class=\"literal\">true</span> key=A time=<span class=\"number\">4</span>/<span class=\"number\">4</span></div><div class=\"line\">notes <span class=\"symbol\">:q</span> =<span class=\"params\">|: (5/2.5/3.7/4) :8 7-5h6/3 ^3^ 5h6-7/5 ^3^ :q 7V/4 |</span></div><div class=\"line\">notes <span class=\"symbol\">:</span><span class=\"number\">8</span> t12p7/<span class=\"number\">4</span> s5s3/<span class=\"number\">4</span> <span class=\"symbol\">:</span><span class=\"number\">8</span> <span class=\"number\">3</span><span class=\"symbol\">s:</span><span class=\"number\">16</span><span class=\"symbol\">:</span><span class=\"number\">5</span>-<span class=\"number\">7</span>/<span class=\"number\">5</span> <span class=\"symbol\">:h</span> p5/<span class=\"number\">4</span></div><div class=\"line\">text <span class=\"symbol\">:w</span>, <span class=\"params\">|#segno, ,|</span>, <span class=\"symbol\">:hd</span>, , <span class=\"comment\">#tr</span></div></pre></td></tr></table></figure><p>##列表</p><p>列表1（-）：</p><ul><li>第一条</li><li>第二条</li><li>第三条</li></ul><p>列表2：</p><ul><br><li>1</li><br><li>2</li><br><li>3</li><br></ul><p>列表3（+）：</p><ul><li>1</li><li>2</li><li>3</li></ul><p>列表4（*）：</p><ul><li>1</li><li>2</li><li>3</li></ul><p>列表5（数字.）：</p><ol><li>tom</li><li>jerry</li><li>jack</li></ol><p>##表格</p><p>简单表格：</p><table><thead><tr><th>列1</th><th>列2</th></tr></thead><tbody><tr><td>是什么样的感觉</td><td>我不懂</td></tr><tr><td>只是一路上</td><td>我们都在沉默</td></tr><tr><td>其实我不要</td><td>太多的承诺</td></tr><tr><td>只要你能说声</td><td>爱我</td></tr></tbody></table><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">st=&gt;start: Start</div><div class=\"line\">e=&gt;end</div><div class=\"line\">op=&gt;operation: My Operation</div><div class=\"line\">cond=&gt;condition: Yes or No?</div><div class=\"line\"></div><div class=\"line\">st-&gt;op-&gt;cond</div><div class=\"line\">cond(yes)-&gt;e</div><div class=\"line\">cond(no)-&gt;op</div></pre></td></tr></table></figure><p>以及时序图:</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Alice-&gt;Bob: Hello Bob, how are you?</div><div class=\"line\">Note right of Bob: Bob thinks</div><div class=\"line\">Bob--&gt;Alice: I am good thanks!</div></pre></td></tr></table></figure><p>##代码块</p><p>程序设计语言：</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> os</div><div class=\"line\"><span class=\"keyword\">print</span> <span class=\"string\">\"hello world\"</span></div></pre></td></tr></table></figure><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> java.io.*;</div></pre></td></tr></table></figure></h2>","site":{"data":{}},"excerpt":"<p>生成目录：<br>[TOC]</p><p></p><h2>字体<p></p><p>粗体字：<strong>粗体字</strong><br><strong>double underscores</strong><br><strong>double asterisks</strong></p><p>斜体字：<em>斜体字</em><br><em>single asterisks</em><br><em>single asterisks</em><br>","more":"</p><blockquote><p>这是Blockquotes</p><blockquote><p>这是二级</p><blockquote><p>这是三级</p></blockquote></blockquote></blockquote><p>##水平线</p><p>水平线：</p><p><em>**（</em> <em></em>）：</p><hr><hr><hr><p>##虚线</p><p>浅虚线（中文：shift + -）：</p><p>————————————————————————————————————</p><p>中虚线（中文：shift + - &amp; —-）</p><h2 id=\"—————————————————————————————\"><a href=\"#—————————————————————————————\" class=\"headerlink\" title=\"—————————————————————————————\"></a>—————————————————————————————</h2><p>重虚线(中文：shift + - + =)：</p><h1 id=\"——————————————————\"><a href=\"#——————————————————\" class=\"headerlink\" title=\"-——————————————————\"></a>-——————————————————</h1><p>##着重表示</p><p>带有“\\”的转义字符：<br>*literal asterisks*</p><p>带有下划线的二号粗体字：</p><p>##带有下划线的二号粗体字</p><p>文件类型着重表示: <code>*.ddd.txt</code><br><code>There is a literal backtick (`) here.</code></p><p><code>There is a literal backtick (`) here.</code></p><p>代码文件着重表示：<kbd>tableviewController<kbd></kbd></kbd></p><p>@(这是着重表示吗？)</p><p>###<code>也曾醉酒鞭名马，唯恐多情累美人</code></p><p>###</p><p>##链接</p><p>简单链接：See my <a href=\"/about/\">About</a> page for details.</p><p>网址链接：<a href=\"http://www.baidu.com\">http://www.baidu.com</a></p><p>qq号码：<a href=\"qq:11112121211\">11112121211</a></p><p>邮箱： 网易邮箱: <a href=\"&#x6d;&#x61;&#x69;&#x6c;&#116;&#111;&#58;&#108;&#x69;&#x76;&#106;&#x75;&#x6e;&#x6a;&#105;&#x65;&#64;&#49;&#x36;&#x33;&#x2e;&#x63;&#111;&#109;\">&#108;&#x69;&#x76;&#106;&#x75;&#x6e;&#x6a;&#105;&#x65;&#64;&#49;&#x36;&#x33;&#x2e;&#x63;&#111;&#109;</a></p><p>新浪微博： <a href=\"http://weibo.com/luttemars\">@阳光下的向日葵</a></p><p>带有文字说明的链接：<a href=\"http://www.baidu.com\">百度</a></p><p>插入图片：<br><img src=\"/assets/img/1.jpeg\" alt=\"Alt text\"><br><img src=\"/assets/img/personalimage.jpeg\" alt=\"Alt text\"></p><p>范围文字说明：</p><p>##引用</p><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">options space=<span class=\"number\">20</span></div><div class=\"line\">tabstave notation=<span class=\"literal\">true</span> key=A time=<span class=\"number\">4</span>/<span class=\"number\">4</span></div><div class=\"line\">notes <span class=\"symbol\">:q</span> =<span class=\"params\">|: (5/2.5/3.7/4) :8 7-5h6/3 ^3^ 5h6-7/5 ^3^ :q 7V/4 |</span></div><div class=\"line\">notes <span class=\"symbol\">:</span><span class=\"number\">8</span> t12p7/<span class=\"number\">4</span> s5s3/<span class=\"number\">4</span> <span class=\"symbol\">:</span><span class=\"number\">8</span> <span class=\"number\">3</span><span class=\"symbol\">s:</span><span class=\"number\">16</span><span class=\"symbol\">:</span><span class=\"number\">5</span>-<span class=\"number\">7</span>/<span class=\"number\">5</span> <span class=\"symbol\">:h</span> p5/<span class=\"number\">4</span></div><div class=\"line\">text <span class=\"symbol\">:w</span>, <span class=\"params\">|#segno, ,|</span>, <span class=\"symbol\">:hd</span>, , <span class=\"comment\">#tr</span></div></pre></td></tr></table></figure><p>##列表</p><p>列表1（-）：</p><ul><li>第一条</li><li>第二条</li><li>第三条</li></ul><p>列表2：</p><ul><br><li>1</li><br><li>2</li><br><li>3</li><br></ul><p>列表3（+）：</p><ul><li>1</li><li>2</li><li>3</li></ul><p>列表4（*）：</p><ul><li>1</li><li>2</li><li>3</li></ul><p>列表5（数字.）：</p><ol><li>tom</li><li>jerry</li><li>jack</li></ol><p>##表格</p><p>简单表格：</p><table><thead><tr><th>列1</th><th>列2</th></tr></thead><tbody><tr><td>是什么样的感觉</td><td>我不懂</td></tr><tr><td>只是一路上</td><td>我们都在沉默</td></tr><tr><td>其实我不要</td><td>太多的承诺</td></tr><tr><td>只要你能说声</td><td>爱我</td></tr></tbody></table><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">st=&gt;start: Start</div><div class=\"line\">e=&gt;end</div><div class=\"line\">op=&gt;operation: My Operation</div><div class=\"line\">cond=&gt;condition: Yes or No?</div><div class=\"line\"></div><div class=\"line\">st-&gt;op-&gt;cond</div><div class=\"line\">cond(yes)-&gt;e</div><div class=\"line\">cond(no)-&gt;op</div></pre></td></tr></table></figure><p>以及时序图:</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Alice-&gt;Bob: Hello Bob, how are you?</div><div class=\"line\">Note right of Bob: Bob thinks</div><div class=\"line\">Bob--&gt;Alice: I am good thanks!</div></pre></td></tr></table></figure><p>##代码块</p><p>程序设计语言：</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> os</div><div class=\"line\"><span class=\"keyword\">print</span> <span class=\"string\">\"hello world\"</span></div></pre></td></tr></table></figure><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> java.io.*;</div></pre></td></tr></table></figure></h2>"},{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"date":"2017-04-12T10:12:39.000Z","updated":"2017-04-12T10:12:39.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj1w3v7m700019xxasf7ab9db","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p><h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></div></pre></td></tr></table></figure><p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p><h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo server</div></pre></td></tr></table></figure><p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p><h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo generate</div></pre></td></tr></table></figure><p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p><h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo deploy</div></pre></td></tr></table></figure><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p><h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></div></pre></td></tr></table></figure><p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p><h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo server</div></pre></td></tr></table></figure><p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p><h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo generate</div></pre></td></tr></table></figure><p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p><h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo deploy</div></pre></td></tr></table></figure><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>"},{"title":"标签测试","date":"2017-04-15T17:12:32.000Z","description":null,"_content":"","source":"_posts/标签测试.md","raw":"---\ntitle: 标签测试\ndate: 2017-04-16 01:12:32\ncategories: 测试\ntags: [编程,人生,学习,总结,思考,c,C++,Jave,测试]\ndescription:\n---\n","slug":"标签测试","published":1,"updated":"2017-04-15T17:14:15.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj1w3v7mf00039xxanvvpdwy1","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"photo","title":"照片文章测试","date":"2017-04-13T08:26:31.000Z","photos":[],"_content":"","source":"_posts/照片文章测试.md","raw":"---\nlayout: photo\ntitle: 照片文章测试\ndate: 2017-04-13 16:26:31\ncategories: life\ntags:\nphotos:\n---\n","slug":"照片文章测试","published":1,"updated":"2017-04-13T13:40:09.000Z","comments":1,"link":"","_id":"cj1w3v7mh00049xxayfi0gbmh","content":"","site":{"data":{}},"excerpt":"","more":""}],"PostAsset":[],"PostCategory":[{"post_id":"cj1w3v7mf00039xxanvvpdwy1","category_id":"cj1w3v7ml00059xxahlrnm9tm","_id":"cj1w3v7mo00099xxajp4fbwtc"},{"post_id":"cj1w3v7mh00049xxayfi0gbmh","category_id":"cj1w3v7mm00079xxaqj7jtlfb","_id":"cj1w3v7mp000b9xxal49oi6hm"}],"PostTag":[{"post_id":"cj1w3v7m000009xxa6gkq2q5q","tag_id":"cj1w3v7mb00029xxa9d4q2o4w","_id":"cj1w3v7mr000f9xxabolqa9hi"},{"post_id":"cj1w3v7m000009xxa6gkq2q5q","tag_id":"cj1w3v7mm00069xxanexuet6t","_id":"cj1w3v7ms000g9xxafi7697kl"},{"post_id":"cj1w3v7m000009xxa6gkq2q5q","tag_id":"cj1w3v7mn00089xxa9zg8x0az","_id":"cj1w3v7ms000i9xxa6oezknn9"},{"post_id":"cj1w3v7m000009xxa6gkq2q5q","tag_id":"cj1w3v7mo000a9xxax73xnw6d","_id":"cj1w3v7ms000j9xxagtma941o"},{"post_id":"cj1w3v7m000009xxa6gkq2q5q","tag_id":"cj1w3v7mp000c9xxa39kswjy8","_id":"cj1w3v7mt000l9xxansdpbicj"},{"post_id":"cj1w3v7m000009xxa6gkq2q5q","tag_id":"cj1w3v7mq000d9xxaesp71xin","_id":"cj1w3v7mt000m9xxalu6k0ohr"},{"post_id":"cj1w3v7mf00039xxanvvpdwy1","tag_id":"cj1w3v7mm00069xxanexuet6t","_id":"cj1w3v7n0000t9xxay699jcfq"},{"post_id":"cj1w3v7mf00039xxanvvpdwy1","tag_id":"cj1w3v7ms000h9xxa5ponu6xf","_id":"cj1w3v7n0000u9xxajd18mmun"},{"post_id":"cj1w3v7mf00039xxanvvpdwy1","tag_id":"cj1w3v7mt000k9xxao909v5fc","_id":"cj1w3v7n1000v9xxa9f5otitl"},{"post_id":"cj1w3v7mf00039xxanvvpdwy1","tag_id":"cj1w3v7mt000n9xxa1zzwaxw5","_id":"cj1w3v7n1000w9xxa3meayb0w"},{"post_id":"cj1w3v7mf00039xxanvvpdwy1","tag_id":"cj1w3v7mu000o9xxahd9emgmd","_id":"cj1w3v7n1000x9xxa9xjv9p5n"},{"post_id":"cj1w3v7mf00039xxanvvpdwy1","tag_id":"cj1w3v7mw000p9xxad9n9oepk","_id":"cj1w3v7n1000y9xxauixy3m01"},{"post_id":"cj1w3v7mf00039xxanvvpdwy1","tag_id":"cj1w3v7mx000q9xxa2gj2bwam","_id":"cj1w3v7n1000z9xxahf9kcnby"},{"post_id":"cj1w3v7mf00039xxanvvpdwy1","tag_id":"cj1w3v7mz000r9xxajenbwr6o","_id":"cj1w3v7n100109xxafticf8ul"},{"post_id":"cj1w3v7mf00039xxanvvpdwy1","tag_id":"cj1w3v7n0000s9xxaj5gqfx1c","_id":"cj1w3v7n100119xxal8ffj0re"}],"Tag":[{"name":"脚本语言","_id":"cj1w3v7mb00029xxa9d4q2o4w"},{"name":"编程","_id":"cj1w3v7mm00069xxanexuet6t"},{"name":"程序设计","_id":"cj1w3v7mn00089xxa9zg8x0az"},{"name":"思考总结","_id":"cj1w3v7mo000a9xxax73xnw6d"},{"name":"前端","_id":"cj1w3v7mp000c9xxa39kswjy8"},{"name":"效率","_id":"cj1w3v7mq000d9xxaesp71xin"},{"name":"人生","_id":"cj1w3v7ms000h9xxa5ponu6xf"},{"name":"学习","_id":"cj1w3v7mt000k9xxao909v5fc"},{"name":"总结","_id":"cj1w3v7mt000n9xxa1zzwaxw5"},{"name":"思考","_id":"cj1w3v7mu000o9xxahd9emgmd"},{"name":"c","_id":"cj1w3v7mw000p9xxad9n9oepk"},{"name":"C++","_id":"cj1w3v7mx000q9xxa2gj2bwam"},{"name":"Jave","_id":"cj1w3v7mz000r9xxajenbwr6o"},{"name":"测试","_id":"cj1w3v7n0000s9xxaj5gqfx1c"}]}}