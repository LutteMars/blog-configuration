{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"source/assets/img/1.jpeg","path":"assets/img/1.jpeg","modified":1,"renderable":0},{"_id":"source/assets/img/empty.png","path":"assets/img/empty.png","modified":1,"renderable":0},{"_id":"source/assets/img/personalimage.jpeg","path":"assets/img/personalimage.jpeg","modified":1,"renderable":0}],"Cache":[{"_id":"source/photos/lazyload.min.js","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1501213868000},{"_id":"source/.DS_Store","hash":"0bc83eccfbc9dc09858192a736675a6377fbeb28","modified":1619819686615},{"_id":"source/_posts/FlutterGO.md","hash":"5d1b2a924ab9bebc806be7f780ddf278a97fd4e1","modified":1619356069313},{"_id":"source/_posts/markdown语法总结.md","hash":"6829f6b81012aa1eb47e05bc2691416538778629","modified":1619434620551},{"_id":"source/_posts/hello-world.md","hash":"8a02477044e2b77f1b262da2c48c01429e4a32e4","modified":1491991959000},{"_id":"source/_posts/标签测试.md","hash":"dbb74eb2d4adcbfe1b63843e91ef248ec01dbaf4","modified":1492276455000},{"_id":"source/categories/index.md","hash":"792c614cb997c421093aee9330560ca41097b126","modified":1619615328819},{"_id":"source/_posts/照片文章测试.md","hash":"a345e81e2cee2fce27d09db43fd8944168130bf7","modified":1492090809000},{"_id":"source/assets/.DS_Store","hash":"483523c2f4e693b27cb3f3a2f018324df42936b8","modified":1619818645265},{"_id":"source/photos/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1619818755278},{"_id":"source/photos/index.ejs","hash":"f78099961f03e6e38abd18a99df680102ba38847","modified":1619700336387},{"_id":"source/photos/data.json","hash":"a53406f1f0b7007dea5d25497353d70039b7dccb","modified":1619821352173},{"_id":"source/photos/ins.js","hash":"b78217f012fd4b19a0c0174917030fb4071315f3","modified":1619818610765},{"_id":"source/photos/videos.ejs","hash":"f78099961f03e6e38abd18a99df680102ba38847","modified":1619700336387},{"_id":"source/photos/ins.css","hash":"33e8d71e3daf8048e10027cc28b3264a0b23d597","modified":1619700429416},{"_id":"source/assets/img/1.jpeg","hash":"24204ed9a3242f30671cf8947be5bf78bf60ddb8","modified":1491996785000},{"_id":"source/assets/img/empty.png","hash":"0af552e0228f6013066e06106270a8cd04e936e9","modified":1619821991159},{"_id":"source/assets/webpage/index.html","hash":"51fa5bd82cf6e196b8a0b77467a6e1e74200ef6e","modified":1492338263000},{"_id":"source/assets/img/personalimage.jpeg","hash":"27e1873bde055df34276753eb5c279822b8678e1","modified":1492179724000},{"_id":"public/photos/ins.css","hash":"33e8d71e3daf8048e10027cc28b3264a0b23d597","modified":1619822604098},{"_id":"public/photos/data.json","hash":"768f5edf596239ecb27cc6273d0f63da59101ff7","modified":1619822604098},{"_id":"public/photos/ins.js","hash":"b78217f012fd4b19a0c0174917030fb4071315f3","modified":1619822604098},{"_id":"public/photos/lazyload.min.js","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/atom.xml","hash":"21d44eccf60dcb80cf276d7be83d00e5b21839dd","modified":1619822604098},{"_id":"public/content.json","hash":"fb698425035969b893bf7cd6dead3132b25108cb","modified":1619822604098},{"_id":"public/sitemap.xml","hash":"063cc96de87a769495604e4a4efaa28d39a51d9d","modified":1619822604098},{"_id":"public/categories/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/photos/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/photos/videos.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/assets/webpage/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/2017/04/16/标签测试/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/2017/04/14/FlutterGO/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/2017/04/13/照片文章测试/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/2017/04/12/hello-world/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/2017/04/13/markdown语法总结/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/archives/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/archives/2017/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/archives/2017/04/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/categories/脚本语言/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/categories/脚本语言/编程/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/categories/脚本语言/编程/程序设计/思考总结/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/categories/脚本语言/编程/程序设计/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/categories/脚本语言/编程/程序设计/思考总结/前端/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/categories/脚本语言/编程/程序设计/思考总结/前端/效率/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/categories/测试/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/categories/life/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/tags/编程/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/tags/程序设计/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/tags/脚本语言/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/tags/思考总结/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/tags/前端/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/tags/效率/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/tags/人生/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/tags/学习/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/tags/总结/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/tags/思考/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/tags/c/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/tags/C/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/tags/Jave/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/tags/测试/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619822604098},{"_id":"public/assets/img/1.jpeg","hash":"24204ed9a3242f30671cf8947be5bf78bf60ddb8","modified":1619822604098},{"_id":"public/assets/img/empty.png","hash":"0af552e0228f6013066e06106270a8cd04e936e9","modified":1619822604098},{"_id":"public/css/prism.css","hash":"f1f64f4a26b715edbd65391def53322611df75cf","modified":1619822604098},{"_id":"public/css/prism-line-numbers.css","hash":"a1692758d22c6cdf6fd1a8dafc9b4b98e41d3138","modified":1619822604098},{"_id":"public/assets/img/personalimage.jpeg","hash":"27e1873bde055df34276753eb5c279822b8678e1","modified":1619822604098}],"Category":[{"name":"脚本语言","_id":"cko4wk0yb00040vxa2luy5nmg"},{"name":"编程","parent":"cko4wk0yb00040vxa2luy5nmg","_id":"cko4wk0yg000b0vxac33acr2a"},{"name":"程序设计","parent":"cko4wk0yg000b0vxac33acr2a","_id":"cko4wk0yi000f0vxafzyo1ca1"},{"name":"思考总结","parent":"cko4wk0yi000f0vxafzyo1ca1","_id":"cko4wk0yj000i0vxa23fffmfd"},{"name":"前端","parent":"cko4wk0yj000i0vxa23fffmfd","_id":"cko4wk0yk000k0vxa8vxx1vov"},{"name":"效率","parent":"cko4wk0yk000k0vxa8vxx1vov","_id":"cko4wk0ym000p0vxa70o7ak6h"},{"name":"测试","_id":"cko4wk0yt001c0vxa3xnj12af"},{"name":"life","_id":"cko4wk0yy001f0vxa62ih8z38"}],"Data":[],"Page":[{"title":"文章分类","date":"2021-04-28T12:37:09.000Z","toc":false,"comment":false,"layout":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: 文章分类\ndate: 2021-04-28 20:37:09\ntoc: false\ncomment: false\nlayout: categories\n---\n","updated":"2021-04-28T13:08:48.819Z","path":"categories/index.html","comments":1,"_id":"cko4wk0y000000vxa2is80aml","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"post","slug":"photos","title":"相册","noDate":"true","comments":0,"_content":"<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\">photos</a>\n\t<a class=\"photos-btn\" href=\"/photos/videos.html\">视频</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/ethan\" target=\"_blank\" class=\"open-ins\">图片来自instagram，正在加载中…</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>\n","source":"photos/index.ejs","raw":"---\nlayout: post\nslug: \"photos\"\ntitle: \"相册\"\nnoDate: \"true\"\ncomments: \"false\"\n---\n<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\">photos</a>\n\t<a class=\"photos-btn\" href=\"/photos/videos.html\">视频</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/ethan\" target=\"_blank\" class=\"open-ins\">图片来自instagram，正在加载中…</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>\n","date":"2021-04-30T21:54:48.413Z","updated":"2021-04-29T12:45:36.387Z","path":"photos/index.html","_id":"cko4wk0y800020vxaainm44j8","content":"<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\">photos</a>\n\t<a class=\"photos-btn\" href=\"/photos/videos.html\">视频</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/ethan\" target=\"_blank\" class=\"open-ins\">图片来自instagram，正在加载中…</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>\n","site":{"data":{}},"excerpt":"","more":"<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\">photos</a>\n\t<a class=\"photos-btn\" href=\"/photos/videos.html\">视频</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/ethan\" target=\"_blank\" class=\"open-ins\">图片来自instagram，正在加载中…</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>\n"},{"_content":"#post-instagram{\n\tpadding: 30px;\n}\n#post-instagram .article-entry{\n\tpadding-right: 0;\n}\n.instagram{\n\tposition: relative;\n\tmin-height: 500px;\n}\n.instagram img {\n\twidth: 100%;\n}\n.instagram .year {\n\tfont-size: 16px;\n}\n.instagram .open-ins{\n\tpadding: 10px 0;\n\tcolor: #cdcdcd;\n}\n.instagram .open-ins:hover{\n\tcolor: #657b83;\n}\n.instagram .year{\n\tdisplay: inline;\n}\n.instagram .thumb {\n\twidth: 25%;\n\theight: 0;\n\tpadding-bottom: 25%;\n\tposition: relative;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tbackground: #ededed;\n}\n.instagram .thumb a {\n\tposition: relative;\n}\n.instagram .album h1 em{\n\tfont-style: normal;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n}\n.instagram .album ul{\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tclear: both;\n\twidth: 100%;\n\ttext-align: left;\n}\n.instagram .album li{\n\tlist-style: none;\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 5px;\n\tmargin-bottom: -10px;\n\theight: 0;\n\twidth: 25%;\n\tposition: relative;\n\tpadding-bottom: 25%;\n}\n.instagram .album li:before{\n\tdisplay: none;\n}\n.instagram .album div.img-box{\n\tposition: absolute;\n\twidth: 90%;\n\theight: 90%;\n\t-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\t-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\tbox-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n}\n.instagram .album div.img-box img{\n\twidth: 100%;\n\theight: 100%;\n    position: absolute;\n    z-index: 2;\n}\n.instagram .album div.img-box .img-bg{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0px;\n\twidth: 100%;\n\tmargin: -5px;\n\tpadding: 5px;\n\t-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\tbox-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-webkit-transition: all 0.15s ease-out 0.1s;\n\t-moz-transition: all 0.15s ease-out 0.1s;\n\t-o-transition: all 0.15s ease-out 0.1s;\n\ttransition: all 0.15s ease-out 0.1s;\n\topacity: 0.2;\n\tcursor: pointer;\n\tdisplay: block;\n\tz-index: 3;\n}\n.instagram .album div.img-box .icon {\n    font-size: 14px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    color: #999;\n    z-index: 1;\n}\n.instagram .album div.img-box .img-bg:hover{\n\topacity: 0;\n}\n.photos-btn-wrap {\n\tborder-bottom: 1px solid #e5e5e5;\n\tmargin-bottom: 20px;\n}\n.photos-btn {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-bottom: -4px;\n\tpadding: 5px 8px 3px;\n}\n.photos-btn.active {\n\tcolor: #08c;\n\tborder: 1px solid #e5e5e5;\n\tborder-bottom: 5px solid #fff;\n}\n\n@media screen and (max-width:600px) {\n\t.instagram .thumb {\n\t\twidth: 50%;\n\t\tpadding-bottom: 50%;\n\t}\n\t.instagram .album li {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding-bottom: 100%;\n\t\ttext-align: center;\n\t}\n\t.instagram .album div.img-box{\n\t\tmargin: 0;\n\t\twidth: 90%;\n\t\theight: 90%;\n\t}\n}\n\n/* ====== video ===== */\n.video-container {\n    z-index: 1;\n    position: relative;\n    padding-bottom: 56.25%;\n    margin: 0 auto;\n}\n.video-container iframe, .video-container object, .video-container embed {\n    z-index: 1;\n    position: absolute;\n    top: 0;\n    left: 7%;\n    width: 85%;\n    height: 85%;\n    box-shadow: 0px 0px 20px 2px #888888;\n}","source":"photos/ins.css","raw":"#post-instagram{\n\tpadding: 30px;\n}\n#post-instagram .article-entry{\n\tpadding-right: 0;\n}\n.instagram{\n\tposition: relative;\n\tmin-height: 500px;\n}\n.instagram img {\n\twidth: 100%;\n}\n.instagram .year {\n\tfont-size: 16px;\n}\n.instagram .open-ins{\n\tpadding: 10px 0;\n\tcolor: #cdcdcd;\n}\n.instagram .open-ins:hover{\n\tcolor: #657b83;\n}\n.instagram .year{\n\tdisplay: inline;\n}\n.instagram .thumb {\n\twidth: 25%;\n\theight: 0;\n\tpadding-bottom: 25%;\n\tposition: relative;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tbackground: #ededed;\n}\n.instagram .thumb a {\n\tposition: relative;\n}\n.instagram .album h1 em{\n\tfont-style: normal;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n}\n.instagram .album ul{\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tclear: both;\n\twidth: 100%;\n\ttext-align: left;\n}\n.instagram .album li{\n\tlist-style: none;\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 5px;\n\tmargin-bottom: -10px;\n\theight: 0;\n\twidth: 25%;\n\tposition: relative;\n\tpadding-bottom: 25%;\n}\n.instagram .album li:before{\n\tdisplay: none;\n}\n.instagram .album div.img-box{\n\tposition: absolute;\n\twidth: 90%;\n\theight: 90%;\n\t-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\t-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\tbox-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n}\n.instagram .album div.img-box img{\n\twidth: 100%;\n\theight: 100%;\n    position: absolute;\n    z-index: 2;\n}\n.instagram .album div.img-box .img-bg{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0px;\n\twidth: 100%;\n\tmargin: -5px;\n\tpadding: 5px;\n\t-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\tbox-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-webkit-transition: all 0.15s ease-out 0.1s;\n\t-moz-transition: all 0.15s ease-out 0.1s;\n\t-o-transition: all 0.15s ease-out 0.1s;\n\ttransition: all 0.15s ease-out 0.1s;\n\topacity: 0.2;\n\tcursor: pointer;\n\tdisplay: block;\n\tz-index: 3;\n}\n.instagram .album div.img-box .icon {\n    font-size: 14px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    color: #999;\n    z-index: 1;\n}\n.instagram .album div.img-box .img-bg:hover{\n\topacity: 0;\n}\n.photos-btn-wrap {\n\tborder-bottom: 1px solid #e5e5e5;\n\tmargin-bottom: 20px;\n}\n.photos-btn {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-bottom: -4px;\n\tpadding: 5px 8px 3px;\n}\n.photos-btn.active {\n\tcolor: #08c;\n\tborder: 1px solid #e5e5e5;\n\tborder-bottom: 5px solid #fff;\n}\n\n@media screen and (max-width:600px) {\n\t.instagram .thumb {\n\t\twidth: 50%;\n\t\tpadding-bottom: 50%;\n\t}\n\t.instagram .album li {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding-bottom: 100%;\n\t\ttext-align: center;\n\t}\n\t.instagram .album div.img-box{\n\t\tmargin: 0;\n\t\twidth: 90%;\n\t\theight: 90%;\n\t}\n}\n\n/* ====== video ===== */\n.video-container {\n    z-index: 1;\n    position: relative;\n    padding-bottom: 56.25%;\n    margin: 0 auto;\n}\n.video-container iframe, .video-container object, .video-container embed {\n    z-index: 1;\n    position: absolute;\n    top: 0;\n    left: 7%;\n    width: 85%;\n    height: 85%;\n    box-shadow: 0px 0px 20px 2px #888888;\n}","date":"2021-04-30T21:54:48.426Z","updated":"2021-04-29T12:47:09.416Z","path":"photos/ins.css","layout":"false","title":"","comments":1,"_id":"cko4wk0yd00060vxa8b9cgb1j","content":"#post-instagram{\n\tpadding: 30px;\n}\n#post-instagram .article-entry{\n\tpadding-right: 0;\n}\n.instagram{\n\tposition: relative;\n\tmin-height: 500px;\n}\n.instagram img {\n\twidth: 100%;\n}\n.instagram .year {\n\tfont-size: 16px;\n}\n.instagram .open-ins{\n\tpadding: 10px 0;\n\tcolor: #cdcdcd;\n}\n.instagram .open-ins:hover{\n\tcolor: #657b83;\n}\n.instagram .year{\n\tdisplay: inline;\n}\n.instagram .thumb {\n\twidth: 25%;\n\theight: 0;\n\tpadding-bottom: 25%;\n\tposition: relative;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tbackground: #ededed;\n}\n.instagram .thumb a {\n\tposition: relative;\n}\n.instagram .album h1 em{\n\tfont-style: normal;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n}\n.instagram .album ul{\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tclear: both;\n\twidth: 100%;\n\ttext-align: left;\n}\n.instagram .album li{\n\tlist-style: none;\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 5px;\n\tmargin-bottom: -10px;\n\theight: 0;\n\twidth: 25%;\n\tposition: relative;\n\tpadding-bottom: 25%;\n}\n.instagram .album li:before{\n\tdisplay: none;\n}\n.instagram .album div.img-box{\n\tposition: absolute;\n\twidth: 90%;\n\theight: 90%;\n\t-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\t-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\tbox-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n}\n.instagram .album div.img-box img{\n\twidth: 100%;\n\theight: 100%;\n    position: absolute;\n    z-index: 2;\n}\n.instagram .album div.img-box .img-bg{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0px;\n\twidth: 100%;\n\tmargin: -5px;\n\tpadding: 5px;\n\t-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\tbox-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-webkit-transition: all 0.15s ease-out 0.1s;\n\t-moz-transition: all 0.15s ease-out 0.1s;\n\t-o-transition: all 0.15s ease-out 0.1s;\n\ttransition: all 0.15s ease-out 0.1s;\n\topacity: 0.2;\n\tcursor: pointer;\n\tdisplay: block;\n\tz-index: 3;\n}\n.instagram .album div.img-box .icon {\n    font-size: 14px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    color: #999;\n    z-index: 1;\n}\n.instagram .album div.img-box .img-bg:hover{\n\topacity: 0;\n}\n.photos-btn-wrap {\n\tborder-bottom: 1px solid #e5e5e5;\n\tmargin-bottom: 20px;\n}\n.photos-btn {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-bottom: -4px;\n\tpadding: 5px 8px 3px;\n}\n.photos-btn.active {\n\tcolor: #08c;\n\tborder: 1px solid #e5e5e5;\n\tborder-bottom: 5px solid #fff;\n}\n\n@media screen and (max-width:600px) {\n\t.instagram .thumb {\n\t\twidth: 50%;\n\t\tpadding-bottom: 50%;\n\t}\n\t.instagram .album li {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding-bottom: 100%;\n\t\ttext-align: center;\n\t}\n\t.instagram .album div.img-box{\n\t\tmargin: 0;\n\t\twidth: 90%;\n\t\theight: 90%;\n\t}\n}\n\n/* ====== video ===== */\n.video-container {\n    z-index: 1;\n    position: relative;\n    padding-bottom: 56.25%;\n    margin: 0 auto;\n}\n.video-container iframe, .video-container object, .video-container embed {\n    z-index: 1;\n    position: absolute;\n    top: 0;\n    left: 7%;\n    width: 85%;\n    height: 85%;\n    box-shadow: 0px 0px 20px 2px #888888;\n}","site":{"data":{}},"excerpt":"","more":"#post-instagram{\n\tpadding: 30px;\n}\n#post-instagram .article-entry{\n\tpadding-right: 0;\n}\n.instagram{\n\tposition: relative;\n\tmin-height: 500px;\n}\n.instagram img {\n\twidth: 100%;\n}\n.instagram .year {\n\tfont-size: 16px;\n}\n.instagram .open-ins{\n\tpadding: 10px 0;\n\tcolor: #cdcdcd;\n}\n.instagram .open-ins:hover{\n\tcolor: #657b83;\n}\n.instagram .year{\n\tdisplay: inline;\n}\n.instagram .thumb {\n\twidth: 25%;\n\theight: 0;\n\tpadding-bottom: 25%;\n\tposition: relative;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tbackground: #ededed;\n}\n.instagram .thumb a {\n\tposition: relative;\n}\n.instagram .album h1 em{\n\tfont-style: normal;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n}\n.instagram .album ul{\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tclear: both;\n\twidth: 100%;\n\ttext-align: left;\n}\n.instagram .album li{\n\tlist-style: none;\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 5px;\n\tmargin-bottom: -10px;\n\theight: 0;\n\twidth: 25%;\n\tposition: relative;\n\tpadding-bottom: 25%;\n}\n.instagram .album li:before{\n\tdisplay: none;\n}\n.instagram .album div.img-box{\n\tposition: absolute;\n\twidth: 90%;\n\theight: 90%;\n\t-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\t-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\tbox-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n}\n.instagram .album div.img-box img{\n\twidth: 100%;\n\theight: 100%;\n    position: absolute;\n    z-index: 2;\n}\n.instagram .album div.img-box .img-bg{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0px;\n\twidth: 100%;\n\tmargin: -5px;\n\tpadding: 5px;\n\t-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\tbox-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-webkit-transition: all 0.15s ease-out 0.1s;\n\t-moz-transition: all 0.15s ease-out 0.1s;\n\t-o-transition: all 0.15s ease-out 0.1s;\n\ttransition: all 0.15s ease-out 0.1s;\n\topacity: 0.2;\n\tcursor: pointer;\n\tdisplay: block;\n\tz-index: 3;\n}\n.instagram .album div.img-box .icon {\n    font-size: 14px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    color: #999;\n    z-index: 1;\n}\n.instagram .album div.img-box .img-bg:hover{\n\topacity: 0;\n}\n.photos-btn-wrap {\n\tborder-bottom: 1px solid #e5e5e5;\n\tmargin-bottom: 20px;\n}\n.photos-btn {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-bottom: -4px;\n\tpadding: 5px 8px 3px;\n}\n.photos-btn.active {\n\tcolor: #08c;\n\tborder: 1px solid #e5e5e5;\n\tborder-bottom: 5px solid #fff;\n}\n\n@media screen and (max-width:600px) {\n\t.instagram .thumb {\n\t\twidth: 50%;\n\t\tpadding-bottom: 50%;\n\t}\n\t.instagram .album li {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding-bottom: 100%;\n\t\ttext-align: center;\n\t}\n\t.instagram .album div.img-box{\n\t\tmargin: 0;\n\t\twidth: 90%;\n\t\theight: 90%;\n\t}\n}\n\n/* ====== video ===== */\n.video-container {\n    z-index: 1;\n    position: relative;\n    padding-bottom: 56.25%;\n    margin: 0 auto;\n}\n.video-container iframe, .video-container object, .video-container embed {\n    z-index: 1;\n    position: absolute;\n    top: 0;\n    left: 7%;\n    width: 85%;\n    height: 85%;\n    box-shadow: 0px 0px 20px 2px #888888;\n}"},{"_content":"{\n    \"list\": [\n        {\n            \"date\": \"2019-08\",\n            \"arr\": {\n                \"year\": 2019,\n                \"month\": 8,\n                \"link\": [\n                    \"2019-08-01_\\u68a6\\u5e7b.jpg\",\n                    \"2019-08-11_\\u94f6\\u6cb3.jpg\"\n                ],\n                \"text\": [\n                    \"\\u68a6\\u5e7b\",\n                    \"\\u94f6\\u6cb3\"\n                ],\n                \"type\": [\n                    \"image\",\n                    \"image\"\n                ]\n            }\n        },\n        {\n            \"date\": \"2017-07\",\n            \"arr\": {\n                \"year\": 2017,\n                \"month\": 7,\n                \"link\": [\n                    \"2017-07-01_blue sky.jpg\"\n                ],\n                \"text\": [\n                    \"blue sky\"\n                ],\n                \"type\": [\n                    \"image\"\n                ]\n            }\n        }\n    ]\n}","source":"photos/data.json","raw":"{\n    \"list\": [\n        {\n            \"date\": \"2019-08\",\n            \"arr\": {\n                \"year\": 2019,\n                \"month\": 8,\n                \"link\": [\n                    \"2019-08-01_\\u68a6\\u5e7b.jpg\",\n                    \"2019-08-11_\\u94f6\\u6cb3.jpg\"\n                ],\n                \"text\": [\n                    \"\\u68a6\\u5e7b\",\n                    \"\\u94f6\\u6cb3\"\n                ],\n                \"type\": [\n                    \"image\",\n                    \"image\"\n                ]\n            }\n        },\n        {\n            \"date\": \"2017-07\",\n            \"arr\": {\n                \"year\": 2017,\n                \"month\": 7,\n                \"link\": [\n                    \"2017-07-01_blue sky.jpg\"\n                ],\n                \"text\": [\n                    \"blue sky\"\n                ],\n                \"type\": [\n                    \"image\"\n                ]\n            }\n        }\n    ]\n}","date":"2021-04-30T22:22:32.173Z","updated":"2021-04-30T22:22:32.173Z","path":"photos/data.json","layout":"false","title":"","comments":1,"_id":"cko4wk0ye00070vxae2qnc07g","content":"{\"list\":[{\"date\":\"2019-08\",\"arr\":{\"year\":2019,\"month\":8,\"link\":[\"2019-08-01_梦幻.jpg\",\"2019-08-11_银河.jpg\"],\"text\":[\"梦幻\",\"银河\"],\"type\":[\"image\",\"image\"]}},{\"date\":\"2017-07\",\"arr\":{\"year\":2017,\"month\":7,\"link\":[\"2017-07-01_blue sky.jpg\"],\"text\":[\"blue sky\"],\"type\":[\"image\"]}}]}","site":{"data":{}},"excerpt":"","more":"{\"list\":[{\"date\":\"2019-08\",\"arr\":{\"year\":2019,\"month\":8,\"link\":[\"2019-08-01_梦幻.jpg\",\"2019-08-11_银河.jpg\"],\"text\":[\"梦幻\",\"银河\"],\"type\":[\"image\",\"image\"]}},{\"date\":\"2017-07\",\"arr\":{\"year\":2017,\"month\":7,\"link\":[\"2017-07-01_blue sky.jpg\"],\"text\":[\"blue sky\"],\"type\":[\"image\"]}}]}"},{"_content":"/******/\n(function(modules) { // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/\n    if (installedModules[moduleId])\n    /******/\n      return installedModules[moduleId].exports;\n    /******/\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/\n      exports: {},\n      /******/\n      id: moduleId,\n      /******/\n      loaded: false\n        /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.loaded = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"/dist/\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(0);\n  /******/\n})\n/************************************************************************/\n/******/\n([\n  /* 0 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    'use strict';\n\n    __webpack_require__(1);\n\n    var _view = __webpack_require__(2);\n\n    var _view2 = _interopRequireDefault(_view);\n\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n\n    /**\n     * @name impush-client \n     * @description 这个项目让我发家致富…\n     * @date 2016-12-1\n     */\n\n    var _collection = [];\n    var _count = 0;\n    var searchData;\n\n    function addMask(elem) {\n      var rect = elem.getBoundingClientRect();\n      var style = getComputedStyle(elem, null);\n\n      var mask = document.createElement('i');\n      mask.className = 'icon-film';\n      mask.style.color = '#fff';\n      mask.style.fontSize = '26px';\n      mask.style.position = 'absolute';\n      mask.style.right = '10px';\n      mask.style.bottom = '10px';\n      mask.style.zIndex = 1;\n      elem.parentNode.appendChild(mask);\n    }\n\n    var createVideoIncon = function createVideoIncon() {\n      var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]');\n      for (var i = 0, len = $videoImg.length; i < len; i++) {\n        addMask($videoImg[i]);\n      }\n    };\n    var render = function render(res) {\n      var ulTmpl = \"\";\n      for (var j = 0, len2 = res.list.length; j < len2; j++) {\n        var data = res.list[j].arr;\n        var liTmpl = \"\";\n        for (var i = 0, len = data.link.length; i < len; i++) {\n          // var minSrc = 'https://github.com/LutteMars/blog-configuration/blob/master/min_photos/' + data.link[i];\n          // var src = 'https://github.com/LutteMars/blog-configuration/blob/master/photos/' + data.link[i];\n          var minSrc = 'https://raw.githubusercontent.com/LutteMars/blog-configuration/blob/master/min_photos/' + data.link[i];\n          var src = 'https://raw.githubusercontent.com/LutteMars/blog-configuration/master/photos/' + data.link[i];\n          var type = data.type[i];\n          var target = src + (type === 'video' ? '.mp4' : '');\n          src += '';\n\n          liTmpl += '<figure class=\"thumb\" itemprop=\"associatedMedia\" itemscope=\"\" itemtype=\"http://schema.org/ImageObject\">\\\n                <a href=\"' + src + '\" itemprop=\"contentUrl\" data-size=\"1080x1080\" data-type=\"' + type + '\" data-target=\"' + src + '\">\\\n                  <img class=\"reward-img\" data-type=\"' + type + '\" data-src=\"' + minSrc + '\" src=\"/assets/img/empty.png\" itemprop=\"thumbnail\" onload=\"lzld(this)\">\\\n                </a>\\\n                <figcaption style=\"display:none\" itemprop=\"caption description\">' + data.text[i] + '</figcaption>\\\n            </figure>';\n        }\n        ulTmpl = ulTmpl + '<section class=\"archives album\"><h1 class=\"year\">' + data.year + '年<em>' + data.month + '月</em></h1>\\\n        <ul class=\"img-box-ul\">' + liTmpl + '</ul>\\\n        </section>';\n      }\n      document.querySelector('.instagram').innerHTML = '<div class=\"photos\" itemscope=\"\" itemtype=\"http://schema.org/ImageGallery\">' + ulTmpl + '</div>';\n      createVideoIncon();\n      _view2.default.init();\n    };\n\n    var replacer = function replacer(str) {\n      var arr = str.split(\"/\");\n      return \"/assets/photos/\" + arr[arr.length - 1];\n    };\n\n    var ctrler = function ctrler(data) {\n      var imgObj = {};\n      for (var i = 0, len = data.length; i < len; i++) {\n        var y = data[i].y;\n        var m = data[i].m;\n        var src = replacer(data[i].src);\n        var text = data[i].text;\n        var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m);\n        if (imgObj[key]) {\n          imgObj[key].srclist.push(src);\n          imgObj[key].text.push(text);\n        } else {\n          imgObj[key] = {\n            year: y,\n            month: m,\n            srclist: [src],\n            text: [text]\n          };\n        }\n      }\n      render(imgObj);\n    };\n\n    function loadData(success) {\n      if (!searchData) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', './data.json?t=' + +new Date(), true);\n\n        xhr.onload = function() {\n          if (this.status >= 200 && this.status < 300) {\n            var res = JSON.parse(this.response);\n            searchData = res;\n            success(searchData);\n          } else {\n            console.error(this.statusText);\n          }\n        };\n\n        xhr.onerror = function() {\n          console.error(this.statusText);\n        };\n\n        xhr.send();\n      } else {\n        success(searchData);\n      }\n    }\n\n    var Ins = {\n      init: function init() {\n        loadData(function(data) {\n          render(data);\n        });\n      }\n    };\n\n    Ins.init();\n\n    // export default impush;\n\n    /***/\n  },\n  /* 1 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      'use strict';\n\n      var inViewport = __webpack_require__(3);\n      var lazyAttrs = ['data-src'];\n\n      global.lzld = lazyload();\n\n      // Provide libs using getAttribute early to get the good src\n      // and not the fake data-src\n      replaceGetAttribute('Image');\n      replaceGetAttribute('IFrame');\n\n      function registerLazyAttr(attr) {\n        if (indexOf.call(lazyAttrs, attr) === -1) {\n          lazyAttrs.push(attr);\n        }\n      }\n\n      function lazyload(opts) {\n        opts = merge({\n          'offset': 333,\n          'src': 'data-src',\n          'container': false\n        }, opts || {});\n\n        if (typeof opts.src === 'string') {\n          registerLazyAttr(opts.src);\n        }\n\n        var elts = [];\n\n        function show(elt) {\n          var src = findRealSrc(elt);\n\n          if (src) {\n            elt.src = src;\n          }\n\n          elt.setAttribute('data-lzled', true);\n          elts[indexOf.call(elts, elt)] = null;\n        }\n\n        function findRealSrc(elt) {\n          if (typeof opts.src === 'function') {\n            return opts.src(elt);\n          }\n\n          return elt.getAttribute(opts.src);\n        }\n\n        function register(elt) {\n          elt.onload = null;\n          elt.removeAttribute('onload');\n          elt.onerror = null;\n          elt.removeAttribute('onerror');\n\n          if (indexOf.call(elts, elt) === -1) {\n            inViewport(elt, opts, show);\n          }\n        }\n\n        return register;\n      }\n\n      function replaceGetAttribute(elementName) {\n        var fullname = 'HTML' + elementName + 'Element';\n        if (fullname in global === false) {\n          return;\n        }\n\n        var original = global[fullname].prototype.getAttribute;\n        global[fullname].prototype.getAttribute = function(name) {\n          if (name === 'src') {\n            var realSrc;\n            for (var i = 0, max = lazyAttrs.length; i < max; i++) {\n              realSrc = original.call(this, lazyAttrs[i]);\n              if (realSrc) {\n                break;\n              }\n            }\n\n            return realSrc || original.call(this, name);\n          }\n\n          // our own lazyloader will go through theses lines\n          // because we use getAttribute(opts.src)\n          return original.call(this, name);\n        };\n      }\n\n      function merge(defaults, opts) {\n        for (var name in defaults) {\n          if (opts[name] === undefined) {\n            opts[name] = defaults[name];\n          }\n        }\n\n        return opts;\n      }\n\n      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html\n      function indexOf(value) {\n        for (var i = this.length; i-- && this[i] !== value;) {}\n        return i;\n      }\n\n      module.exports = lazyload;\n\n      // export default impush;\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  },\n  /* 2 */\n  /***/\n  function(module, exports) {\n\n    'use strict';\n\n    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {\n\n      // parse slide data (url, title, size ...) from DOM elements \n      // (children of gallerySelector)\n      var parseThumbnailElements = function parseThumbnailElements(el) {\n        el = el.parentNode.parentNode;\n        var thumbElements = el.getElementsByClassName('thumb'),\n          numNodes = thumbElements.length,\n          items = [],\n          figureEl,\n          linkEl,\n          size,\n          type,\n          // video or not\n          target,\n          item;\n\n        for (var i = 0; i < numNodes; i++) {\n\n          figureEl = thumbElements[i]; // \n\n          // include only element nodes \n          if (figureEl.nodeType !== 1) {\n            continue;\n          }\n\n          linkEl = figureEl.children[0]; // \n\n          size = linkEl.getAttribute('data-size').split('x');\n          type = linkEl.getAttribute('data-type');\n          target = linkEl.getAttribute('data-target');\n          // create slide object\n          item = {\n            src: linkEl.getAttribute('href'),\n            w: parseInt(size[0], 10),\n            h: parseInt(size[1], 10)\n          };\n\n          if (figureEl.children.length > 1) {\n            item.title = figureEl.children[1].innerHTML;\n          }\n\n          if (linkEl.children.length > 0) {\n            item.msrc = linkEl.children[0].getAttribute('src');\n            item.type = type;\n            item.target = target;\n            item.html = '<video src=\"' + target + '\" controls=\"controls\" autoplay=\"autoplay\"></video>';\n            if (type === 'video') {\n              //item.src = null;\n            }\n          }\n\n          item.el = figureEl; // save link to element for getThumbBoundsFn\n          items.push(item);\n        }\n\n        return items;\n      };\n\n      // find nearest parent element\n      var closest = function closest(el, fn) {\n        return el && (fn(el) ? el : closest(el.parentNode, fn));\n      };\n\n      // triggers when user clicks on thumbnail\n      var onThumbnailsClick = function onThumbnailsClick(e) {\n        e = e || window.event;\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n        var eTarget = e.target || e.srcElement;\n\n        // find root element of slide\n        var clickedListItem = closest(eTarget, function(el) {\n          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';\n        });\n\n        if (!clickedListItem) {\n          return;\n        }\n\n        // find index of clicked item by looping through all child nodes\n        // alternatively, you may define index via data- attribute\n        var clickedGallery = clickedListItem.parentNode,\n\n          // childNodes = clickedListItem.parentNode.childNodes,\n          // numChildNodes = childNodes.length,\n          childNodes = document.getElementsByClassName('thumb'),\n          numChildNodes = childNodes.length,\n          nodeIndex = 0,\n          index;\n\n        for (var i = 0; i < numChildNodes; i++) {\n          if (childNodes[i].nodeType !== 1) {\n            continue;\n          }\n\n          if (childNodes[i] === clickedListItem) {\n            index = nodeIndex;\n            break;\n          }\n          nodeIndex++;\n        }\n\n        if (index >= 0) {\n          // open PhotoSwipe if valid index found\n          openPhotoSwipe(index, clickedGallery);\n        }\n        return false;\n      };\n\n      // parse picture index and gallery index from URL (#&pid=1&gid=2)\n      var photoswipeParseHash = function photoswipeParseHash() {\n        var hash = window.location.hash.substring(1),\n          params = {};\n\n        if (hash.length < 5) {\n          return params;\n        }\n\n        var vars = hash.split('&');\n        for (var i = 0; i < vars.length; i++) {\n          if (!vars[i]) {\n            continue;\n          }\n          var pair = vars[i].split('=');\n          if (pair.length < 2) {\n            continue;\n          }\n          params[pair[0]] = pair[1];\n        }\n\n        if (params.gid) {\n          params.gid = parseInt(params.gid, 10);\n        }\n\n        return params;\n      };\n\n      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n        var pswpElement = document.querySelectorAll('.pswp')[0],\n          gallery,\n          options,\n          items;\n\n        items = parseThumbnailElements(galleryElement);\n        // define options (if needed)\n        options = {\n\n          // define gallery index (for URL)\n          galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n          getThumbBoundsFn: function getThumbBoundsFn(index) {\n            // See Options -> getThumbBoundsFn section of documentation for more info\n            var thumbnail = items[index].el.getElementsByTagName('img')[0],\n              // find thumbnail\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return {\n              x: rect.left,\n              y: rect.top + pageYScroll,\n              w: rect.width\n            };\n          }\n\n        };\n\n        // PhotoSwipe opened from URL\n        if (fromURL) {\n          if (options.galleryPIDs) {\n            // parse real index when custom PIDs are used \n            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n            for (var j = 0; j < items.length; j++) {\n              if (items[j].pid == index) {\n                options.index = j;\n                break;\n              }\n            }\n          } else {\n            // in URL indexes start from 1\n            options.index = parseInt(index, 10) - 1;\n          }\n        } else {\n          options.index = parseInt(index, 10);\n        }\n\n        // exit if index not found\n        if (isNaN(options.index)) {\n          return;\n        }\n\n        if (disableAnimation) {\n          options.showAnimationDuration = 0;\n        }\n\n        // Pass data to PhotoSwipe and initialize it\n        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        var $tempVideo;\n        var stopVideoHandle = function stopVideoHandle() {\n          if ($tempVideo) {\n            $tempVideo.remove();\n            $tempVideo = null;\n          }\n        };\n        var changeHandle = function changeHandle() {\n          var item = gallery.currItem;\n          stopVideoHandle();\n          if (item.type === 'video') {\n            var $ctn = item.container;\n            var style = $ctn.getElementsByClassName('pswp__img')[0].style;\n            var $video = document.createElement('video');\n            $video.setAttribute('autoplay', 'autoplay');\n            $video.setAttribute('controls', 'controls');\n            $video.setAttribute('src', item.target);\n            $video.style.width = style.width;\n            $video.style.height = style.height;\n            $video.style.position = 'absolute';\n            $video.style.zIndex = 2;\n            $tempVideo = $video;\n            $ctn.appendChild($video);\n          }\n        };\n        gallery.listen('initialZoomIn', changeHandle);\n        gallery.listen('afterChange', changeHandle);\n        gallery.listen('initialZoomOut', stopVideoHandle);\n      };\n\n      // loop through all gallery elements and bind events\n      var galleryElements = document.querySelectorAll(gallerySelector);\n      for (var i = 0, l = galleryElements.length; i < l; i++) {\n        galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n        galleryElements[i].onclick = onThumbnailsClick;\n      }\n\n      // Parse URL and open gallery if it contains #&pid=3&gid=1\n      var hashData = photoswipeParseHash();\n      if (hashData.pid && hashData.gid) {\n        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n      }\n    };\n\n    var Viewer = function() {\n      function init() {\n        initPhotoSwipeFromDOM('.photos');\n      }\n      return {\n        init: init\n      };\n    }();\n\n    module.exports = Viewer;\n\n    /***/\n  },\n  /* 3 */\n  /***/\n  function(module, exports) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      module.exports = inViewport;\n\n      var instances = [];\n      var supportsMutationObserver = typeof global.MutationObserver === 'function';\n\n      function inViewport(elt, params, cb) {\n        var opts = {\n          container: global.document.body,\n          offset: 0\n        };\n\n        if (params === undefined || typeof params === 'function') {\n          cb = params;\n          params = {};\n        }\n\n        var container = opts.container = params.container || opts.container;\n        var offset = opts.offset = params.offset || opts.offset;\n\n        for (var i = 0; i < instances.length; i++) {\n          if (instances[i].container === container) {\n            return instances[i].isInViewport(elt, offset, cb);\n          }\n        }\n\n        return instances[\n          instances.push(createInViewport(container)) - 1\n        ].isInViewport(elt, offset, cb);\n      }\n\n      function addEvent(el, type, fn) {\n        if (el.attachEvent) {\n          el.attachEvent('on' + type, fn);\n        } else {\n          el.addEventListener(type, fn, false);\n        }\n      }\n\n      function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n          var context = this,\n            args = arguments;\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n\n          function later() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n          }\n        };\n      }\n\n      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708\n      var contains = function() {\n        if (!global.document) {\n          return true;\n        }\n        return global.document.documentElement.compareDocumentPosition ?\n          function(a, b) {\n            return !!(a.compareDocumentPosition(b) & 16);\n          } :\n          global.document.documentElement.contains ?\n          function(a, b) {\n            return a !== b && (a.contains ? a.contains(b) : false);\n          } :\n          function(a, b) {\n            while (b = b.parentNode) {\n              if (b === a) {\n                return true;\n              }\n            }\n            return false;\n          };\n      }\n\n      function createInViewport(container) {\n        var watches = createWatches();\n\n        var scrollContainer = container === global.document.body ? global : container;\n        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);\n\n        addEvent(scrollContainer, 'scroll', debouncedCheck);\n\n        if (scrollContainer === global) {\n          addEvent(global, 'resize', debouncedCheck);\n        }\n\n        if (supportsMutationObserver) {\n          observeDOM(watches, container, debouncedCheck);\n        }\n\n        // failsafe check, every 200ms we check for visible images\n        // usecase: a hidden parent containing eleements\n        // when the parent becomes visible, we have no event that the children\n        // became visible\n        setInterval(debouncedCheck, 150);\n\n        function isInViewport(elt, offset, cb) {\n          if (!cb) {\n            return isVisible(elt, offset);\n          }\n\n          var remote = createRemote(elt, offset, cb);\n          remote.watch();\n          return remote;\n        }\n\n        function createRemote(elt, offset, cb) {\n          function watch() {\n            watches.add(elt, offset, cb);\n          }\n\n          function dispose() {\n            watches.remove(elt);\n          }\n\n          return {\n            watch: watch,\n            dispose: dispose\n          };\n        }\n\n        function watchInViewport(elt, offset, cb) {\n          if (isVisible(elt, offset)) {\n            watches.remove(elt);\n            cb(elt);\n          }\n        }\n\n        function isVisible(elt, offset) {\n          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {\n            return false;\n          }\n\n          // Check if the element is visible\n          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js\n          if (!elt.offsetWidth || !elt.offsetHeight) {\n            return false;\n          }\n\n          var eltRect = elt.getBoundingClientRect();\n          var viewport = {};\n\n          if (container === global.document.body) {\n            viewport = {\n              top: -offset,\n              left: -offset,\n              right: global.document.documentElement.clientWidth + offset,\n              bottom: global.document.documentElement.clientHeight + offset\n            };\n          } else {\n            var containerRect = container.getBoundingClientRect();\n            viewport = {\n              top: containerRect.top - offset,\n              left: containerRect.left - offset,\n              right: containerRect.right + offset,\n              bottom: containerRect.bottom + offset\n            };\n          }\n\n          // The element must overlap with the visible part of the viewport\n          var visible =\n            (\n              (eltRect.right > viewport.left) &&\n              (eltRect.left < viewport.right) &&\n              (eltRect.bottom > viewport.top) &&\n              (eltRect.top < viewport.bottom)\n            );\n\n          return visible;\n        }\n\n        return {\n          container: container,\n          isInViewport: isInViewport\n        };\n      }\n\n      function createWatches() {\n        var watches = [];\n\n        function add(elt, offset, cb) {\n          if (!isWatched(elt)) {\n            watches.push([elt, offset, cb]);\n          }\n        }\n\n        function remove(elt) {\n          var pos = indexOf(elt);\n          if (pos !== -1) {\n            watches.splice(pos, 1);\n          }\n        }\n\n        function indexOf(elt) {\n          for (var i = watches.length - 1; i >= 0; i--) {\n            if (watches[i][0] === elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function isWatched(elt) {\n          return indexOf(elt) !== -1;\n        }\n\n        function checkAll(cb) {\n          return function() {\n            for (var i = watches.length - 1; i >= 0; i--) {\n              cb.apply(this, watches[i]);\n            }\n          };\n        }\n\n        return {\n          add: add,\n          remove: remove,\n          isWatched: isWatched,\n          checkAll: checkAll\n        };\n      }\n\n      function observeDOM(watches, container, cb) {\n        var observer = new MutationObserver(watch);\n        var filter = Array.prototype.filter;\n        var concat = Array.prototype.concat;\n\n        observer.observe(container, {\n          childList: true,\n          subtree: true,\n          // changes like style/width/height/display will be catched\n          attributes: true\n        });\n\n        function watch(mutations) {\n          // some new DOM nodes where previously watched\n          // we should check their positions\n          if (mutations.some(knownNodes) === true) {\n            setTimeout(cb, 0);\n          }\n        }\n\n        function knownNodes(mutation) {\n          var nodes = concat.call([],\n            Array.prototype.slice.call(mutation.addedNodes),\n            mutation.target\n          );\n          return filter.call(nodes, watches.isWatched).length > 0;\n        }\n      }\n\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  }\n  /******/\n]);","source":"photos/ins.js","raw":"/******/\n(function(modules) { // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/\n    if (installedModules[moduleId])\n    /******/\n      return installedModules[moduleId].exports;\n    /******/\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/\n      exports: {},\n      /******/\n      id: moduleId,\n      /******/\n      loaded: false\n        /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.loaded = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"/dist/\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(0);\n  /******/\n})\n/************************************************************************/\n/******/\n([\n  /* 0 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    'use strict';\n\n    __webpack_require__(1);\n\n    var _view = __webpack_require__(2);\n\n    var _view2 = _interopRequireDefault(_view);\n\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n\n    /**\n     * @name impush-client \n     * @description 这个项目让我发家致富…\n     * @date 2016-12-1\n     */\n\n    var _collection = [];\n    var _count = 0;\n    var searchData;\n\n    function addMask(elem) {\n      var rect = elem.getBoundingClientRect();\n      var style = getComputedStyle(elem, null);\n\n      var mask = document.createElement('i');\n      mask.className = 'icon-film';\n      mask.style.color = '#fff';\n      mask.style.fontSize = '26px';\n      mask.style.position = 'absolute';\n      mask.style.right = '10px';\n      mask.style.bottom = '10px';\n      mask.style.zIndex = 1;\n      elem.parentNode.appendChild(mask);\n    }\n\n    var createVideoIncon = function createVideoIncon() {\n      var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]');\n      for (var i = 0, len = $videoImg.length; i < len; i++) {\n        addMask($videoImg[i]);\n      }\n    };\n    var render = function render(res) {\n      var ulTmpl = \"\";\n      for (var j = 0, len2 = res.list.length; j < len2; j++) {\n        var data = res.list[j].arr;\n        var liTmpl = \"\";\n        for (var i = 0, len = data.link.length; i < len; i++) {\n          // var minSrc = 'https://github.com/LutteMars/blog-configuration/blob/master/min_photos/' + data.link[i];\n          // var src = 'https://github.com/LutteMars/blog-configuration/blob/master/photos/' + data.link[i];\n          var minSrc = 'https://raw.githubusercontent.com/LutteMars/blog-configuration/blob/master/min_photos/' + data.link[i];\n          var src = 'https://raw.githubusercontent.com/LutteMars/blog-configuration/master/photos/' + data.link[i];\n          var type = data.type[i];\n          var target = src + (type === 'video' ? '.mp4' : '');\n          src += '';\n\n          liTmpl += '<figure class=\"thumb\" itemprop=\"associatedMedia\" itemscope=\"\" itemtype=\"http://schema.org/ImageObject\">\\\n                <a href=\"' + src + '\" itemprop=\"contentUrl\" data-size=\"1080x1080\" data-type=\"' + type + '\" data-target=\"' + src + '\">\\\n                  <img class=\"reward-img\" data-type=\"' + type + '\" data-src=\"' + minSrc + '\" src=\"/assets/img/empty.png\" itemprop=\"thumbnail\" onload=\"lzld(this)\">\\\n                </a>\\\n                <figcaption style=\"display:none\" itemprop=\"caption description\">' + data.text[i] + '</figcaption>\\\n            </figure>';\n        }\n        ulTmpl = ulTmpl + '<section class=\"archives album\"><h1 class=\"year\">' + data.year + '年<em>' + data.month + '月</em></h1>\\\n        <ul class=\"img-box-ul\">' + liTmpl + '</ul>\\\n        </section>';\n      }\n      document.querySelector('.instagram').innerHTML = '<div class=\"photos\" itemscope=\"\" itemtype=\"http://schema.org/ImageGallery\">' + ulTmpl + '</div>';\n      createVideoIncon();\n      _view2.default.init();\n    };\n\n    var replacer = function replacer(str) {\n      var arr = str.split(\"/\");\n      return \"/assets/photos/\" + arr[arr.length - 1];\n    };\n\n    var ctrler = function ctrler(data) {\n      var imgObj = {};\n      for (var i = 0, len = data.length; i < len; i++) {\n        var y = data[i].y;\n        var m = data[i].m;\n        var src = replacer(data[i].src);\n        var text = data[i].text;\n        var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m);\n        if (imgObj[key]) {\n          imgObj[key].srclist.push(src);\n          imgObj[key].text.push(text);\n        } else {\n          imgObj[key] = {\n            year: y,\n            month: m,\n            srclist: [src],\n            text: [text]\n          };\n        }\n      }\n      render(imgObj);\n    };\n\n    function loadData(success) {\n      if (!searchData) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', './data.json?t=' + +new Date(), true);\n\n        xhr.onload = function() {\n          if (this.status >= 200 && this.status < 300) {\n            var res = JSON.parse(this.response);\n            searchData = res;\n            success(searchData);\n          } else {\n            console.error(this.statusText);\n          }\n        };\n\n        xhr.onerror = function() {\n          console.error(this.statusText);\n        };\n\n        xhr.send();\n      } else {\n        success(searchData);\n      }\n    }\n\n    var Ins = {\n      init: function init() {\n        loadData(function(data) {\n          render(data);\n        });\n      }\n    };\n\n    Ins.init();\n\n    // export default impush;\n\n    /***/\n  },\n  /* 1 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      'use strict';\n\n      var inViewport = __webpack_require__(3);\n      var lazyAttrs = ['data-src'];\n\n      global.lzld = lazyload();\n\n      // Provide libs using getAttribute early to get the good src\n      // and not the fake data-src\n      replaceGetAttribute('Image');\n      replaceGetAttribute('IFrame');\n\n      function registerLazyAttr(attr) {\n        if (indexOf.call(lazyAttrs, attr) === -1) {\n          lazyAttrs.push(attr);\n        }\n      }\n\n      function lazyload(opts) {\n        opts = merge({\n          'offset': 333,\n          'src': 'data-src',\n          'container': false\n        }, opts || {});\n\n        if (typeof opts.src === 'string') {\n          registerLazyAttr(opts.src);\n        }\n\n        var elts = [];\n\n        function show(elt) {\n          var src = findRealSrc(elt);\n\n          if (src) {\n            elt.src = src;\n          }\n\n          elt.setAttribute('data-lzled', true);\n          elts[indexOf.call(elts, elt)] = null;\n        }\n\n        function findRealSrc(elt) {\n          if (typeof opts.src === 'function') {\n            return opts.src(elt);\n          }\n\n          return elt.getAttribute(opts.src);\n        }\n\n        function register(elt) {\n          elt.onload = null;\n          elt.removeAttribute('onload');\n          elt.onerror = null;\n          elt.removeAttribute('onerror');\n\n          if (indexOf.call(elts, elt) === -1) {\n            inViewport(elt, opts, show);\n          }\n        }\n\n        return register;\n      }\n\n      function replaceGetAttribute(elementName) {\n        var fullname = 'HTML' + elementName + 'Element';\n        if (fullname in global === false) {\n          return;\n        }\n\n        var original = global[fullname].prototype.getAttribute;\n        global[fullname].prototype.getAttribute = function(name) {\n          if (name === 'src') {\n            var realSrc;\n            for (var i = 0, max = lazyAttrs.length; i < max; i++) {\n              realSrc = original.call(this, lazyAttrs[i]);\n              if (realSrc) {\n                break;\n              }\n            }\n\n            return realSrc || original.call(this, name);\n          }\n\n          // our own lazyloader will go through theses lines\n          // because we use getAttribute(opts.src)\n          return original.call(this, name);\n        };\n      }\n\n      function merge(defaults, opts) {\n        for (var name in defaults) {\n          if (opts[name] === undefined) {\n            opts[name] = defaults[name];\n          }\n        }\n\n        return opts;\n      }\n\n      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html\n      function indexOf(value) {\n        for (var i = this.length; i-- && this[i] !== value;) {}\n        return i;\n      }\n\n      module.exports = lazyload;\n\n      // export default impush;\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  },\n  /* 2 */\n  /***/\n  function(module, exports) {\n\n    'use strict';\n\n    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {\n\n      // parse slide data (url, title, size ...) from DOM elements \n      // (children of gallerySelector)\n      var parseThumbnailElements = function parseThumbnailElements(el) {\n        el = el.parentNode.parentNode;\n        var thumbElements = el.getElementsByClassName('thumb'),\n          numNodes = thumbElements.length,\n          items = [],\n          figureEl,\n          linkEl,\n          size,\n          type,\n          // video or not\n          target,\n          item;\n\n        for (var i = 0; i < numNodes; i++) {\n\n          figureEl = thumbElements[i]; // \n\n          // include only element nodes \n          if (figureEl.nodeType !== 1) {\n            continue;\n          }\n\n          linkEl = figureEl.children[0]; // \n\n          size = linkEl.getAttribute('data-size').split('x');\n          type = linkEl.getAttribute('data-type');\n          target = linkEl.getAttribute('data-target');\n          // create slide object\n          item = {\n            src: linkEl.getAttribute('href'),\n            w: parseInt(size[0], 10),\n            h: parseInt(size[1], 10)\n          };\n\n          if (figureEl.children.length > 1) {\n            item.title = figureEl.children[1].innerHTML;\n          }\n\n          if (linkEl.children.length > 0) {\n            item.msrc = linkEl.children[0].getAttribute('src');\n            item.type = type;\n            item.target = target;\n            item.html = '<video src=\"' + target + '\" controls=\"controls\" autoplay=\"autoplay\"></video>';\n            if (type === 'video') {\n              //item.src = null;\n            }\n          }\n\n          item.el = figureEl; // save link to element for getThumbBoundsFn\n          items.push(item);\n        }\n\n        return items;\n      };\n\n      // find nearest parent element\n      var closest = function closest(el, fn) {\n        return el && (fn(el) ? el : closest(el.parentNode, fn));\n      };\n\n      // triggers when user clicks on thumbnail\n      var onThumbnailsClick = function onThumbnailsClick(e) {\n        e = e || window.event;\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n        var eTarget = e.target || e.srcElement;\n\n        // find root element of slide\n        var clickedListItem = closest(eTarget, function(el) {\n          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';\n        });\n\n        if (!clickedListItem) {\n          return;\n        }\n\n        // find index of clicked item by looping through all child nodes\n        // alternatively, you may define index via data- attribute\n        var clickedGallery = clickedListItem.parentNode,\n\n          // childNodes = clickedListItem.parentNode.childNodes,\n          // numChildNodes = childNodes.length,\n          childNodes = document.getElementsByClassName('thumb'),\n          numChildNodes = childNodes.length,\n          nodeIndex = 0,\n          index;\n\n        for (var i = 0; i < numChildNodes; i++) {\n          if (childNodes[i].nodeType !== 1) {\n            continue;\n          }\n\n          if (childNodes[i] === clickedListItem) {\n            index = nodeIndex;\n            break;\n          }\n          nodeIndex++;\n        }\n\n        if (index >= 0) {\n          // open PhotoSwipe if valid index found\n          openPhotoSwipe(index, clickedGallery);\n        }\n        return false;\n      };\n\n      // parse picture index and gallery index from URL (#&pid=1&gid=2)\n      var photoswipeParseHash = function photoswipeParseHash() {\n        var hash = window.location.hash.substring(1),\n          params = {};\n\n        if (hash.length < 5) {\n          return params;\n        }\n\n        var vars = hash.split('&');\n        for (var i = 0; i < vars.length; i++) {\n          if (!vars[i]) {\n            continue;\n          }\n          var pair = vars[i].split('=');\n          if (pair.length < 2) {\n            continue;\n          }\n          params[pair[0]] = pair[1];\n        }\n\n        if (params.gid) {\n          params.gid = parseInt(params.gid, 10);\n        }\n\n        return params;\n      };\n\n      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n        var pswpElement = document.querySelectorAll('.pswp')[0],\n          gallery,\n          options,\n          items;\n\n        items = parseThumbnailElements(galleryElement);\n        // define options (if needed)\n        options = {\n\n          // define gallery index (for URL)\n          galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n          getThumbBoundsFn: function getThumbBoundsFn(index) {\n            // See Options -> getThumbBoundsFn section of documentation for more info\n            var thumbnail = items[index].el.getElementsByTagName('img')[0],\n              // find thumbnail\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return {\n              x: rect.left,\n              y: rect.top + pageYScroll,\n              w: rect.width\n            };\n          }\n\n        };\n\n        // PhotoSwipe opened from URL\n        if (fromURL) {\n          if (options.galleryPIDs) {\n            // parse real index when custom PIDs are used \n            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n            for (var j = 0; j < items.length; j++) {\n              if (items[j].pid == index) {\n                options.index = j;\n                break;\n              }\n            }\n          } else {\n            // in URL indexes start from 1\n            options.index = parseInt(index, 10) - 1;\n          }\n        } else {\n          options.index = parseInt(index, 10);\n        }\n\n        // exit if index not found\n        if (isNaN(options.index)) {\n          return;\n        }\n\n        if (disableAnimation) {\n          options.showAnimationDuration = 0;\n        }\n\n        // Pass data to PhotoSwipe and initialize it\n        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        var $tempVideo;\n        var stopVideoHandle = function stopVideoHandle() {\n          if ($tempVideo) {\n            $tempVideo.remove();\n            $tempVideo = null;\n          }\n        };\n        var changeHandle = function changeHandle() {\n          var item = gallery.currItem;\n          stopVideoHandle();\n          if (item.type === 'video') {\n            var $ctn = item.container;\n            var style = $ctn.getElementsByClassName('pswp__img')[0].style;\n            var $video = document.createElement('video');\n            $video.setAttribute('autoplay', 'autoplay');\n            $video.setAttribute('controls', 'controls');\n            $video.setAttribute('src', item.target);\n            $video.style.width = style.width;\n            $video.style.height = style.height;\n            $video.style.position = 'absolute';\n            $video.style.zIndex = 2;\n            $tempVideo = $video;\n            $ctn.appendChild($video);\n          }\n        };\n        gallery.listen('initialZoomIn', changeHandle);\n        gallery.listen('afterChange', changeHandle);\n        gallery.listen('initialZoomOut', stopVideoHandle);\n      };\n\n      // loop through all gallery elements and bind events\n      var galleryElements = document.querySelectorAll(gallerySelector);\n      for (var i = 0, l = galleryElements.length; i < l; i++) {\n        galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n        galleryElements[i].onclick = onThumbnailsClick;\n      }\n\n      // Parse URL and open gallery if it contains #&pid=3&gid=1\n      var hashData = photoswipeParseHash();\n      if (hashData.pid && hashData.gid) {\n        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n      }\n    };\n\n    var Viewer = function() {\n      function init() {\n        initPhotoSwipeFromDOM('.photos');\n      }\n      return {\n        init: init\n      };\n    }();\n\n    module.exports = Viewer;\n\n    /***/\n  },\n  /* 3 */\n  /***/\n  function(module, exports) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      module.exports = inViewport;\n\n      var instances = [];\n      var supportsMutationObserver = typeof global.MutationObserver === 'function';\n\n      function inViewport(elt, params, cb) {\n        var opts = {\n          container: global.document.body,\n          offset: 0\n        };\n\n        if (params === undefined || typeof params === 'function') {\n          cb = params;\n          params = {};\n        }\n\n        var container = opts.container = params.container || opts.container;\n        var offset = opts.offset = params.offset || opts.offset;\n\n        for (var i = 0; i < instances.length; i++) {\n          if (instances[i].container === container) {\n            return instances[i].isInViewport(elt, offset, cb);\n          }\n        }\n\n        return instances[\n          instances.push(createInViewport(container)) - 1\n        ].isInViewport(elt, offset, cb);\n      }\n\n      function addEvent(el, type, fn) {\n        if (el.attachEvent) {\n          el.attachEvent('on' + type, fn);\n        } else {\n          el.addEventListener(type, fn, false);\n        }\n      }\n\n      function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n          var context = this,\n            args = arguments;\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n\n          function later() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n          }\n        };\n      }\n\n      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708\n      var contains = function() {\n        if (!global.document) {\n          return true;\n        }\n        return global.document.documentElement.compareDocumentPosition ?\n          function(a, b) {\n            return !!(a.compareDocumentPosition(b) & 16);\n          } :\n          global.document.documentElement.contains ?\n          function(a, b) {\n            return a !== b && (a.contains ? a.contains(b) : false);\n          } :\n          function(a, b) {\n            while (b = b.parentNode) {\n              if (b === a) {\n                return true;\n              }\n            }\n            return false;\n          };\n      }\n\n      function createInViewport(container) {\n        var watches = createWatches();\n\n        var scrollContainer = container === global.document.body ? global : container;\n        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);\n\n        addEvent(scrollContainer, 'scroll', debouncedCheck);\n\n        if (scrollContainer === global) {\n          addEvent(global, 'resize', debouncedCheck);\n        }\n\n        if (supportsMutationObserver) {\n          observeDOM(watches, container, debouncedCheck);\n        }\n\n        // failsafe check, every 200ms we check for visible images\n        // usecase: a hidden parent containing eleements\n        // when the parent becomes visible, we have no event that the children\n        // became visible\n        setInterval(debouncedCheck, 150);\n\n        function isInViewport(elt, offset, cb) {\n          if (!cb) {\n            return isVisible(elt, offset);\n          }\n\n          var remote = createRemote(elt, offset, cb);\n          remote.watch();\n          return remote;\n        }\n\n        function createRemote(elt, offset, cb) {\n          function watch() {\n            watches.add(elt, offset, cb);\n          }\n\n          function dispose() {\n            watches.remove(elt);\n          }\n\n          return {\n            watch: watch,\n            dispose: dispose\n          };\n        }\n\n        function watchInViewport(elt, offset, cb) {\n          if (isVisible(elt, offset)) {\n            watches.remove(elt);\n            cb(elt);\n          }\n        }\n\n        function isVisible(elt, offset) {\n          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {\n            return false;\n          }\n\n          // Check if the element is visible\n          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js\n          if (!elt.offsetWidth || !elt.offsetHeight) {\n            return false;\n          }\n\n          var eltRect = elt.getBoundingClientRect();\n          var viewport = {};\n\n          if (container === global.document.body) {\n            viewport = {\n              top: -offset,\n              left: -offset,\n              right: global.document.documentElement.clientWidth + offset,\n              bottom: global.document.documentElement.clientHeight + offset\n            };\n          } else {\n            var containerRect = container.getBoundingClientRect();\n            viewport = {\n              top: containerRect.top - offset,\n              left: containerRect.left - offset,\n              right: containerRect.right + offset,\n              bottom: containerRect.bottom + offset\n            };\n          }\n\n          // The element must overlap with the visible part of the viewport\n          var visible =\n            (\n              (eltRect.right > viewport.left) &&\n              (eltRect.left < viewport.right) &&\n              (eltRect.bottom > viewport.top) &&\n              (eltRect.top < viewport.bottom)\n            );\n\n          return visible;\n        }\n\n        return {\n          container: container,\n          isInViewport: isInViewport\n        };\n      }\n\n      function createWatches() {\n        var watches = [];\n\n        function add(elt, offset, cb) {\n          if (!isWatched(elt)) {\n            watches.push([elt, offset, cb]);\n          }\n        }\n\n        function remove(elt) {\n          var pos = indexOf(elt);\n          if (pos !== -1) {\n            watches.splice(pos, 1);\n          }\n        }\n\n        function indexOf(elt) {\n          for (var i = watches.length - 1; i >= 0; i--) {\n            if (watches[i][0] === elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function isWatched(elt) {\n          return indexOf(elt) !== -1;\n        }\n\n        function checkAll(cb) {\n          return function() {\n            for (var i = watches.length - 1; i >= 0; i--) {\n              cb.apply(this, watches[i]);\n            }\n          };\n        }\n\n        return {\n          add: add,\n          remove: remove,\n          isWatched: isWatched,\n          checkAll: checkAll\n        };\n      }\n\n      function observeDOM(watches, container, cb) {\n        var observer = new MutationObserver(watch);\n        var filter = Array.prototype.filter;\n        var concat = Array.prototype.concat;\n\n        observer.observe(container, {\n          childList: true,\n          subtree: true,\n          // changes like style/width/height/display will be catched\n          attributes: true\n        });\n\n        function watch(mutations) {\n          // some new DOM nodes where previously watched\n          // we should check their positions\n          if (mutations.some(knownNodes) === true) {\n            setTimeout(cb, 0);\n          }\n        }\n\n        function knownNodes(mutation) {\n          var nodes = concat.call([],\n            Array.prototype.slice.call(mutation.addedNodes),\n            mutation.target\n          );\n          return filter.call(nodes, watches.isWatched).length > 0;\n        }\n      }\n\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  }\n  /******/\n]);","date":"2021-04-30T21:54:48.416Z","updated":"2021-04-30T21:36:50.765Z","path":"photos/ins.js","layout":"false","title":"","comments":1,"_id":"cko4wk0ye00080vxa6snt6c7p","content":"/******/\n(function(modules) { // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/\n    if (installedModules[moduleId])\n    /******/\n      return installedModules[moduleId].exports;\n    /******/\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/\n      exports: {},\n      /******/\n      id: moduleId,\n      /******/\n      loaded: false\n        /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.loaded = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"/dist/\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(0);\n  /******/\n})\n/************************************************************************/\n/******/\n([\n  /* 0 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    'use strict';\n\n    __webpack_require__(1);\n\n    var _view = __webpack_require__(2);\n\n    var _view2 = _interopRequireDefault(_view);\n\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n\n    /**\n     * @name impush-client \n     * @description 这个项目让我发家致富…\n     * @date 2016-12-1\n     */\n\n    var _collection = [];\n    var _count = 0;\n    var searchData;\n\n    function addMask(elem) {\n      var rect = elem.getBoundingClientRect();\n      var style = getComputedStyle(elem, null);\n\n      var mask = document.createElement('i');\n      mask.className = 'icon-film';\n      mask.style.color = '#fff';\n      mask.style.fontSize = '26px';\n      mask.style.position = 'absolute';\n      mask.style.right = '10px';\n      mask.style.bottom = '10px';\n      mask.style.zIndex = 1;\n      elem.parentNode.appendChild(mask);\n    }\n\n    var createVideoIncon = function createVideoIncon() {\n      var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]');\n      for (var i = 0, len = $videoImg.length; i < len; i++) {\n        addMask($videoImg[i]);\n      }\n    };\n    var render = function render(res) {\n      var ulTmpl = \"\";\n      for (var j = 0, len2 = res.list.length; j < len2; j++) {\n        var data = res.list[j].arr;\n        var liTmpl = \"\";\n        for (var i = 0, len = data.link.length; i < len; i++) {\n          // var minSrc = 'https://github.com/LutteMars/blog-configuration/blob/master/min_photos/' + data.link[i];\n          // var src = 'https://github.com/LutteMars/blog-configuration/blob/master/photos/' + data.link[i];\n          var minSrc = 'https://raw.githubusercontent.com/LutteMars/blog-configuration/blob/master/min_photos/' + data.link[i];\n          var src = 'https://raw.githubusercontent.com/LutteMars/blog-configuration/master/photos/' + data.link[i];\n          var type = data.type[i];\n          var target = src + (type === 'video' ? '.mp4' : '');\n          src += '';\n\n          liTmpl += '<figure class=\"thumb\" itemprop=\"associatedMedia\" itemscope=\"\" itemtype=\"http://schema.org/ImageObject\">\\\n                <a href=\"' + src + '\" itemprop=\"contentUrl\" data-size=\"1080x1080\" data-type=\"' + type + '\" data-target=\"' + src + '\">\\\n                  <img class=\"reward-img\" data-type=\"' + type + '\" data-src=\"' + minSrc + '\" src=\"/assets/img/empty.png\" itemprop=\"thumbnail\" onload=\"lzld(this)\">\\\n                </a>\\\n                <figcaption style=\"display:none\" itemprop=\"caption description\">' + data.text[i] + '</figcaption>\\\n            </figure>';\n        }\n        ulTmpl = ulTmpl + '<section class=\"archives album\"><h1 class=\"year\">' + data.year + '年<em>' + data.month + '月</em></h1>\\\n        <ul class=\"img-box-ul\">' + liTmpl + '</ul>\\\n        </section>';\n      }\n      document.querySelector('.instagram').innerHTML = '<div class=\"photos\" itemscope=\"\" itemtype=\"http://schema.org/ImageGallery\">' + ulTmpl + '</div>';\n      createVideoIncon();\n      _view2.default.init();\n    };\n\n    var replacer = function replacer(str) {\n      var arr = str.split(\"/\");\n      return \"/assets/photos/\" + arr[arr.length - 1];\n    };\n\n    var ctrler = function ctrler(data) {\n      var imgObj = {};\n      for (var i = 0, len = data.length; i < len; i++) {\n        var y = data[i].y;\n        var m = data[i].m;\n        var src = replacer(data[i].src);\n        var text = data[i].text;\n        var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m);\n        if (imgObj[key]) {\n          imgObj[key].srclist.push(src);\n          imgObj[key].text.push(text);\n        } else {\n          imgObj[key] = {\n            year: y,\n            month: m,\n            srclist: [src],\n            text: [text]\n          };\n        }\n      }\n      render(imgObj);\n    };\n\n    function loadData(success) {\n      if (!searchData) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', './data.json?t=' + +new Date(), true);\n\n        xhr.onload = function() {\n          if (this.status >= 200 && this.status < 300) {\n            var res = JSON.parse(this.response);\n            searchData = res;\n            success(searchData);\n          } else {\n            console.error(this.statusText);\n          }\n        };\n\n        xhr.onerror = function() {\n          console.error(this.statusText);\n        };\n\n        xhr.send();\n      } else {\n        success(searchData);\n      }\n    }\n\n    var Ins = {\n      init: function init() {\n        loadData(function(data) {\n          render(data);\n        });\n      }\n    };\n\n    Ins.init();\n\n    // export default impush;\n\n    /***/\n  },\n  /* 1 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      'use strict';\n\n      var inViewport = __webpack_require__(3);\n      var lazyAttrs = ['data-src'];\n\n      global.lzld = lazyload();\n\n      // Provide libs using getAttribute early to get the good src\n      // and not the fake data-src\n      replaceGetAttribute('Image');\n      replaceGetAttribute('IFrame');\n\n      function registerLazyAttr(attr) {\n        if (indexOf.call(lazyAttrs, attr) === -1) {\n          lazyAttrs.push(attr);\n        }\n      }\n\n      function lazyload(opts) {\n        opts = merge({\n          'offset': 333,\n          'src': 'data-src',\n          'container': false\n        }, opts || {});\n\n        if (typeof opts.src === 'string') {\n          registerLazyAttr(opts.src);\n        }\n\n        var elts = [];\n\n        function show(elt) {\n          var src = findRealSrc(elt);\n\n          if (src) {\n            elt.src = src;\n          }\n\n          elt.setAttribute('data-lzled', true);\n          elts[indexOf.call(elts, elt)] = null;\n        }\n\n        function findRealSrc(elt) {\n          if (typeof opts.src === 'function') {\n            return opts.src(elt);\n          }\n\n          return elt.getAttribute(opts.src);\n        }\n\n        function register(elt) {\n          elt.onload = null;\n          elt.removeAttribute('onload');\n          elt.onerror = null;\n          elt.removeAttribute('onerror');\n\n          if (indexOf.call(elts, elt) === -1) {\n            inViewport(elt, opts, show);\n          }\n        }\n\n        return register;\n      }\n\n      function replaceGetAttribute(elementName) {\n        var fullname = 'HTML' + elementName + 'Element';\n        if (fullname in global === false) {\n          return;\n        }\n\n        var original = global[fullname].prototype.getAttribute;\n        global[fullname].prototype.getAttribute = function(name) {\n          if (name === 'src') {\n            var realSrc;\n            for (var i = 0, max = lazyAttrs.length; i < max; i++) {\n              realSrc = original.call(this, lazyAttrs[i]);\n              if (realSrc) {\n                break;\n              }\n            }\n\n            return realSrc || original.call(this, name);\n          }\n\n          // our own lazyloader will go through theses lines\n          // because we use getAttribute(opts.src)\n          return original.call(this, name);\n        };\n      }\n\n      function merge(defaults, opts) {\n        for (var name in defaults) {\n          if (opts[name] === undefined) {\n            opts[name] = defaults[name];\n          }\n        }\n\n        return opts;\n      }\n\n      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html\n      function indexOf(value) {\n        for (var i = this.length; i-- && this[i] !== value;) {}\n        return i;\n      }\n\n      module.exports = lazyload;\n\n      // export default impush;\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  },\n  /* 2 */\n  /***/\n  function(module, exports) {\n\n    'use strict';\n\n    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {\n\n      // parse slide data (url, title, size ...) from DOM elements \n      // (children of gallerySelector)\n      var parseThumbnailElements = function parseThumbnailElements(el) {\n        el = el.parentNode.parentNode;\n        var thumbElements = el.getElementsByClassName('thumb'),\n          numNodes = thumbElements.length,\n          items = [],\n          figureEl,\n          linkEl,\n          size,\n          type,\n          // video or not\n          target,\n          item;\n\n        for (var i = 0; i < numNodes; i++) {\n\n          figureEl = thumbElements[i]; // \n\n          // include only element nodes \n          if (figureEl.nodeType !== 1) {\n            continue;\n          }\n\n          linkEl = figureEl.children[0]; // \n\n          size = linkEl.getAttribute('data-size').split('x');\n          type = linkEl.getAttribute('data-type');\n          target = linkEl.getAttribute('data-target');\n          // create slide object\n          item = {\n            src: linkEl.getAttribute('href'),\n            w: parseInt(size[0], 10),\n            h: parseInt(size[1], 10)\n          };\n\n          if (figureEl.children.length > 1) {\n            item.title = figureEl.children[1].innerHTML;\n          }\n\n          if (linkEl.children.length > 0) {\n            item.msrc = linkEl.children[0].getAttribute('src');\n            item.type = type;\n            item.target = target;\n            item.html = '<video src=\"' + target + '\" controls=\"controls\" autoplay=\"autoplay\"></video>';\n            if (type === 'video') {\n              //item.src = null;\n            }\n          }\n\n          item.el = figureEl; // save link to element for getThumbBoundsFn\n          items.push(item);\n        }\n\n        return items;\n      };\n\n      // find nearest parent element\n      var closest = function closest(el, fn) {\n        return el && (fn(el) ? el : closest(el.parentNode, fn));\n      };\n\n      // triggers when user clicks on thumbnail\n      var onThumbnailsClick = function onThumbnailsClick(e) {\n        e = e || window.event;\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n        var eTarget = e.target || e.srcElement;\n\n        // find root element of slide\n        var clickedListItem = closest(eTarget, function(el) {\n          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';\n        });\n\n        if (!clickedListItem) {\n          return;\n        }\n\n        // find index of clicked item by looping through all child nodes\n        // alternatively, you may define index via data- attribute\n        var clickedGallery = clickedListItem.parentNode,\n\n          // childNodes = clickedListItem.parentNode.childNodes,\n          // numChildNodes = childNodes.length,\n          childNodes = document.getElementsByClassName('thumb'),\n          numChildNodes = childNodes.length,\n          nodeIndex = 0,\n          index;\n\n        for (var i = 0; i < numChildNodes; i++) {\n          if (childNodes[i].nodeType !== 1) {\n            continue;\n          }\n\n          if (childNodes[i] === clickedListItem) {\n            index = nodeIndex;\n            break;\n          }\n          nodeIndex++;\n        }\n\n        if (index >= 0) {\n          // open PhotoSwipe if valid index found\n          openPhotoSwipe(index, clickedGallery);\n        }\n        return false;\n      };\n\n      // parse picture index and gallery index from URL (#&pid=1&gid=2)\n      var photoswipeParseHash = function photoswipeParseHash() {\n        var hash = window.location.hash.substring(1),\n          params = {};\n\n        if (hash.length < 5) {\n          return params;\n        }\n\n        var vars = hash.split('&');\n        for (var i = 0; i < vars.length; i++) {\n          if (!vars[i]) {\n            continue;\n          }\n          var pair = vars[i].split('=');\n          if (pair.length < 2) {\n            continue;\n          }\n          params[pair[0]] = pair[1];\n        }\n\n        if (params.gid) {\n          params.gid = parseInt(params.gid, 10);\n        }\n\n        return params;\n      };\n\n      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n        var pswpElement = document.querySelectorAll('.pswp')[0],\n          gallery,\n          options,\n          items;\n\n        items = parseThumbnailElements(galleryElement);\n        // define options (if needed)\n        options = {\n\n          // define gallery index (for URL)\n          galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n          getThumbBoundsFn: function getThumbBoundsFn(index) {\n            // See Options -> getThumbBoundsFn section of documentation for more info\n            var thumbnail = items[index].el.getElementsByTagName('img')[0],\n              // find thumbnail\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return {\n              x: rect.left,\n              y: rect.top + pageYScroll,\n              w: rect.width\n            };\n          }\n\n        };\n\n        // PhotoSwipe opened from URL\n        if (fromURL) {\n          if (options.galleryPIDs) {\n            // parse real index when custom PIDs are used \n            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n            for (var j = 0; j < items.length; j++) {\n              if (items[j].pid == index) {\n                options.index = j;\n                break;\n              }\n            }\n          } else {\n            // in URL indexes start from 1\n            options.index = parseInt(index, 10) - 1;\n          }\n        } else {\n          options.index = parseInt(index, 10);\n        }\n\n        // exit if index not found\n        if (isNaN(options.index)) {\n          return;\n        }\n\n        if (disableAnimation) {\n          options.showAnimationDuration = 0;\n        }\n\n        // Pass data to PhotoSwipe and initialize it\n        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        var $tempVideo;\n        var stopVideoHandle = function stopVideoHandle() {\n          if ($tempVideo) {\n            $tempVideo.remove();\n            $tempVideo = null;\n          }\n        };\n        var changeHandle = function changeHandle() {\n          var item = gallery.currItem;\n          stopVideoHandle();\n          if (item.type === 'video') {\n            var $ctn = item.container;\n            var style = $ctn.getElementsByClassName('pswp__img')[0].style;\n            var $video = document.createElement('video');\n            $video.setAttribute('autoplay', 'autoplay');\n            $video.setAttribute('controls', 'controls');\n            $video.setAttribute('src', item.target);\n            $video.style.width = style.width;\n            $video.style.height = style.height;\n            $video.style.position = 'absolute';\n            $video.style.zIndex = 2;\n            $tempVideo = $video;\n            $ctn.appendChild($video);\n          }\n        };\n        gallery.listen('initialZoomIn', changeHandle);\n        gallery.listen('afterChange', changeHandle);\n        gallery.listen('initialZoomOut', stopVideoHandle);\n      };\n\n      // loop through all gallery elements and bind events\n      var galleryElements = document.querySelectorAll(gallerySelector);\n      for (var i = 0, l = galleryElements.length; i < l; i++) {\n        galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n        galleryElements[i].onclick = onThumbnailsClick;\n      }\n\n      // Parse URL and open gallery if it contains #&pid=3&gid=1\n      var hashData = photoswipeParseHash();\n      if (hashData.pid && hashData.gid) {\n        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n      }\n    };\n\n    var Viewer = function() {\n      function init() {\n        initPhotoSwipeFromDOM('.photos');\n      }\n      return {\n        init: init\n      };\n    }();\n\n    module.exports = Viewer;\n\n    /***/\n  },\n  /* 3 */\n  /***/\n  function(module, exports) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      module.exports = inViewport;\n\n      var instances = [];\n      var supportsMutationObserver = typeof global.MutationObserver === 'function';\n\n      function inViewport(elt, params, cb) {\n        var opts = {\n          container: global.document.body,\n          offset: 0\n        };\n\n        if (params === undefined || typeof params === 'function') {\n          cb = params;\n          params = {};\n        }\n\n        var container = opts.container = params.container || opts.container;\n        var offset = opts.offset = params.offset || opts.offset;\n\n        for (var i = 0; i < instances.length; i++) {\n          if (instances[i].container === container) {\n            return instances[i].isInViewport(elt, offset, cb);\n          }\n        }\n\n        return instances[\n          instances.push(createInViewport(container)) - 1\n        ].isInViewport(elt, offset, cb);\n      }\n\n      function addEvent(el, type, fn) {\n        if (el.attachEvent) {\n          el.attachEvent('on' + type, fn);\n        } else {\n          el.addEventListener(type, fn, false);\n        }\n      }\n\n      function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n          var context = this,\n            args = arguments;\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n\n          function later() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n          }\n        };\n      }\n\n      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708\n      var contains = function() {\n        if (!global.document) {\n          return true;\n        }\n        return global.document.documentElement.compareDocumentPosition ?\n          function(a, b) {\n            return !!(a.compareDocumentPosition(b) & 16);\n          } :\n          global.document.documentElement.contains ?\n          function(a, b) {\n            return a !== b && (a.contains ? a.contains(b) : false);\n          } :\n          function(a, b) {\n            while (b = b.parentNode) {\n              if (b === a) {\n                return true;\n              }\n            }\n            return false;\n          };\n      }\n\n      function createInViewport(container) {\n        var watches = createWatches();\n\n        var scrollContainer = container === global.document.body ? global : container;\n        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);\n\n        addEvent(scrollContainer, 'scroll', debouncedCheck);\n\n        if (scrollContainer === global) {\n          addEvent(global, 'resize', debouncedCheck);\n        }\n\n        if (supportsMutationObserver) {\n          observeDOM(watches, container, debouncedCheck);\n        }\n\n        // failsafe check, every 200ms we check for visible images\n        // usecase: a hidden parent containing eleements\n        // when the parent becomes visible, we have no event that the children\n        // became visible\n        setInterval(debouncedCheck, 150);\n\n        function isInViewport(elt, offset, cb) {\n          if (!cb) {\n            return isVisible(elt, offset);\n          }\n\n          var remote = createRemote(elt, offset, cb);\n          remote.watch();\n          return remote;\n        }\n\n        function createRemote(elt, offset, cb) {\n          function watch() {\n            watches.add(elt, offset, cb);\n          }\n\n          function dispose() {\n            watches.remove(elt);\n          }\n\n          return {\n            watch: watch,\n            dispose: dispose\n          };\n        }\n\n        function watchInViewport(elt, offset, cb) {\n          if (isVisible(elt, offset)) {\n            watches.remove(elt);\n            cb(elt);\n          }\n        }\n\n        function isVisible(elt, offset) {\n          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {\n            return false;\n          }\n\n          // Check if the element is visible\n          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js\n          if (!elt.offsetWidth || !elt.offsetHeight) {\n            return false;\n          }\n\n          var eltRect = elt.getBoundingClientRect();\n          var viewport = {};\n\n          if (container === global.document.body) {\n            viewport = {\n              top: -offset,\n              left: -offset,\n              right: global.document.documentElement.clientWidth + offset,\n              bottom: global.document.documentElement.clientHeight + offset\n            };\n          } else {\n            var containerRect = container.getBoundingClientRect();\n            viewport = {\n              top: containerRect.top - offset,\n              left: containerRect.left - offset,\n              right: containerRect.right + offset,\n              bottom: containerRect.bottom + offset\n            };\n          }\n\n          // The element must overlap with the visible part of the viewport\n          var visible =\n            (\n              (eltRect.right > viewport.left) &&\n              (eltRect.left < viewport.right) &&\n              (eltRect.bottom > viewport.top) &&\n              (eltRect.top < viewport.bottom)\n            );\n\n          return visible;\n        }\n\n        return {\n          container: container,\n          isInViewport: isInViewport\n        };\n      }\n\n      function createWatches() {\n        var watches = [];\n\n        function add(elt, offset, cb) {\n          if (!isWatched(elt)) {\n            watches.push([elt, offset, cb]);\n          }\n        }\n\n        function remove(elt) {\n          var pos = indexOf(elt);\n          if (pos !== -1) {\n            watches.splice(pos, 1);\n          }\n        }\n\n        function indexOf(elt) {\n          for (var i = watches.length - 1; i >= 0; i--) {\n            if (watches[i][0] === elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function isWatched(elt) {\n          return indexOf(elt) !== -1;\n        }\n\n        function checkAll(cb) {\n          return function() {\n            for (var i = watches.length - 1; i >= 0; i--) {\n              cb.apply(this, watches[i]);\n            }\n          };\n        }\n\n        return {\n          add: add,\n          remove: remove,\n          isWatched: isWatched,\n          checkAll: checkAll\n        };\n      }\n\n      function observeDOM(watches, container, cb) {\n        var observer = new MutationObserver(watch);\n        var filter = Array.prototype.filter;\n        var concat = Array.prototype.concat;\n\n        observer.observe(container, {\n          childList: true,\n          subtree: true,\n          // changes like style/width/height/display will be catched\n          attributes: true\n        });\n\n        function watch(mutations) {\n          // some new DOM nodes where previously watched\n          // we should check their positions\n          if (mutations.some(knownNodes) === true) {\n            setTimeout(cb, 0);\n          }\n        }\n\n        function knownNodes(mutation) {\n          var nodes = concat.call([],\n            Array.prototype.slice.call(mutation.addedNodes),\n            mutation.target\n          );\n          return filter.call(nodes, watches.isWatched).length > 0;\n        }\n      }\n\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  }\n  /******/\n]);","site":{"data":{}},"excerpt":"","more":"/******/\n(function(modules) { // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/\n    if (installedModules[moduleId])\n    /******/\n      return installedModules[moduleId].exports;\n    /******/\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/\n      exports: {},\n      /******/\n      id: moduleId,\n      /******/\n      loaded: false\n        /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.loaded = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"/dist/\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(0);\n  /******/\n})\n/************************************************************************/\n/******/\n([\n  /* 0 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    'use strict';\n\n    __webpack_require__(1);\n\n    var _view = __webpack_require__(2);\n\n    var _view2 = _interopRequireDefault(_view);\n\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n\n    /**\n     * @name impush-client \n     * @description 这个项目让我发家致富…\n     * @date 2016-12-1\n     */\n\n    var _collection = [];\n    var _count = 0;\n    var searchData;\n\n    function addMask(elem) {\n      var rect = elem.getBoundingClientRect();\n      var style = getComputedStyle(elem, null);\n\n      var mask = document.createElement('i');\n      mask.className = 'icon-film';\n      mask.style.color = '#fff';\n      mask.style.fontSize = '26px';\n      mask.style.position = 'absolute';\n      mask.style.right = '10px';\n      mask.style.bottom = '10px';\n      mask.style.zIndex = 1;\n      elem.parentNode.appendChild(mask);\n    }\n\n    var createVideoIncon = function createVideoIncon() {\n      var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]');\n      for (var i = 0, len = $videoImg.length; i < len; i++) {\n        addMask($videoImg[i]);\n      }\n    };\n    var render = function render(res) {\n      var ulTmpl = \"\";\n      for (var j = 0, len2 = res.list.length; j < len2; j++) {\n        var data = res.list[j].arr;\n        var liTmpl = \"\";\n        for (var i = 0, len = data.link.length; i < len; i++) {\n          // var minSrc = 'https://github.com/LutteMars/blog-configuration/blob/master/min_photos/' + data.link[i];\n          // var src = 'https://github.com/LutteMars/blog-configuration/blob/master/photos/' + data.link[i];\n          var minSrc = 'https://raw.githubusercontent.com/LutteMars/blog-configuration/blob/master/min_photos/' + data.link[i];\n          var src = 'https://raw.githubusercontent.com/LutteMars/blog-configuration/master/photos/' + data.link[i];\n          var type = data.type[i];\n          var target = src + (type === 'video' ? '.mp4' : '');\n          src += '';\n\n          liTmpl += '<figure class=\"thumb\" itemprop=\"associatedMedia\" itemscope=\"\" itemtype=\"http://schema.org/ImageObject\">\\\n                <a href=\"' + src + '\" itemprop=\"contentUrl\" data-size=\"1080x1080\" data-type=\"' + type + '\" data-target=\"' + src + '\">\\\n                  <img class=\"reward-img\" data-type=\"' + type + '\" data-src=\"' + minSrc + '\" src=\"/assets/img/empty.png\" itemprop=\"thumbnail\" onload=\"lzld(this)\">\\\n                </a>\\\n                <figcaption style=\"display:none\" itemprop=\"caption description\">' + data.text[i] + '</figcaption>\\\n            </figure>';\n        }\n        ulTmpl = ulTmpl + '<section class=\"archives album\"><h1 class=\"year\">' + data.year + '年<em>' + data.month + '月</em></h1>\\\n        <ul class=\"img-box-ul\">' + liTmpl + '</ul>\\\n        </section>';\n      }\n      document.querySelector('.instagram').innerHTML = '<div class=\"photos\" itemscope=\"\" itemtype=\"http://schema.org/ImageGallery\">' + ulTmpl + '</div>';\n      createVideoIncon();\n      _view2.default.init();\n    };\n\n    var replacer = function replacer(str) {\n      var arr = str.split(\"/\");\n      return \"/assets/photos/\" + arr[arr.length - 1];\n    };\n\n    var ctrler = function ctrler(data) {\n      var imgObj = {};\n      for (var i = 0, len = data.length; i < len; i++) {\n        var y = data[i].y;\n        var m = data[i].m;\n        var src = replacer(data[i].src);\n        var text = data[i].text;\n        var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m);\n        if (imgObj[key]) {\n          imgObj[key].srclist.push(src);\n          imgObj[key].text.push(text);\n        } else {\n          imgObj[key] = {\n            year: y,\n            month: m,\n            srclist: [src],\n            text: [text]\n          };\n        }\n      }\n      render(imgObj);\n    };\n\n    function loadData(success) {\n      if (!searchData) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', './data.json?t=' + +new Date(), true);\n\n        xhr.onload = function() {\n          if (this.status >= 200 && this.status < 300) {\n            var res = JSON.parse(this.response);\n            searchData = res;\n            success(searchData);\n          } else {\n            console.error(this.statusText);\n          }\n        };\n\n        xhr.onerror = function() {\n          console.error(this.statusText);\n        };\n\n        xhr.send();\n      } else {\n        success(searchData);\n      }\n    }\n\n    var Ins = {\n      init: function init() {\n        loadData(function(data) {\n          render(data);\n        });\n      }\n    };\n\n    Ins.init();\n\n    // export default impush;\n\n    /***/\n  },\n  /* 1 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      'use strict';\n\n      var inViewport = __webpack_require__(3);\n      var lazyAttrs = ['data-src'];\n\n      global.lzld = lazyload();\n\n      // Provide libs using getAttribute early to get the good src\n      // and not the fake data-src\n      replaceGetAttribute('Image');\n      replaceGetAttribute('IFrame');\n\n      function registerLazyAttr(attr) {\n        if (indexOf.call(lazyAttrs, attr) === -1) {\n          lazyAttrs.push(attr);\n        }\n      }\n\n      function lazyload(opts) {\n        opts = merge({\n          'offset': 333,\n          'src': 'data-src',\n          'container': false\n        }, opts || {});\n\n        if (typeof opts.src === 'string') {\n          registerLazyAttr(opts.src);\n        }\n\n        var elts = [];\n\n        function show(elt) {\n          var src = findRealSrc(elt);\n\n          if (src) {\n            elt.src = src;\n          }\n\n          elt.setAttribute('data-lzled', true);\n          elts[indexOf.call(elts, elt)] = null;\n        }\n\n        function findRealSrc(elt) {\n          if (typeof opts.src === 'function') {\n            return opts.src(elt);\n          }\n\n          return elt.getAttribute(opts.src);\n        }\n\n        function register(elt) {\n          elt.onload = null;\n          elt.removeAttribute('onload');\n          elt.onerror = null;\n          elt.removeAttribute('onerror');\n\n          if (indexOf.call(elts, elt) === -1) {\n            inViewport(elt, opts, show);\n          }\n        }\n\n        return register;\n      }\n\n      function replaceGetAttribute(elementName) {\n        var fullname = 'HTML' + elementName + 'Element';\n        if (fullname in global === false) {\n          return;\n        }\n\n        var original = global[fullname].prototype.getAttribute;\n        global[fullname].prototype.getAttribute = function(name) {\n          if (name === 'src') {\n            var realSrc;\n            for (var i = 0, max = lazyAttrs.length; i < max; i++) {\n              realSrc = original.call(this, lazyAttrs[i]);\n              if (realSrc) {\n                break;\n              }\n            }\n\n            return realSrc || original.call(this, name);\n          }\n\n          // our own lazyloader will go through theses lines\n          // because we use getAttribute(opts.src)\n          return original.call(this, name);\n        };\n      }\n\n      function merge(defaults, opts) {\n        for (var name in defaults) {\n          if (opts[name] === undefined) {\n            opts[name] = defaults[name];\n          }\n        }\n\n        return opts;\n      }\n\n      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html\n      function indexOf(value) {\n        for (var i = this.length; i-- && this[i] !== value;) {}\n        return i;\n      }\n\n      module.exports = lazyload;\n\n      // export default impush;\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  },\n  /* 2 */\n  /***/\n  function(module, exports) {\n\n    'use strict';\n\n    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {\n\n      // parse slide data (url, title, size ...) from DOM elements \n      // (children of gallerySelector)\n      var parseThumbnailElements = function parseThumbnailElements(el) {\n        el = el.parentNode.parentNode;\n        var thumbElements = el.getElementsByClassName('thumb'),\n          numNodes = thumbElements.length,\n          items = [],\n          figureEl,\n          linkEl,\n          size,\n          type,\n          // video or not\n          target,\n          item;\n\n        for (var i = 0; i < numNodes; i++) {\n\n          figureEl = thumbElements[i]; // \n\n          // include only element nodes \n          if (figureEl.nodeType !== 1) {\n            continue;\n          }\n\n          linkEl = figureEl.children[0]; // \n\n          size = linkEl.getAttribute('data-size').split('x');\n          type = linkEl.getAttribute('data-type');\n          target = linkEl.getAttribute('data-target');\n          // create slide object\n          item = {\n            src: linkEl.getAttribute('href'),\n            w: parseInt(size[0], 10),\n            h: parseInt(size[1], 10)\n          };\n\n          if (figureEl.children.length > 1) {\n            item.title = figureEl.children[1].innerHTML;\n          }\n\n          if (linkEl.children.length > 0) {\n            item.msrc = linkEl.children[0].getAttribute('src');\n            item.type = type;\n            item.target = target;\n            item.html = '<video src=\"' + target + '\" controls=\"controls\" autoplay=\"autoplay\"></video>';\n            if (type === 'video') {\n              //item.src = null;\n            }\n          }\n\n          item.el = figureEl; // save link to element for getThumbBoundsFn\n          items.push(item);\n        }\n\n        return items;\n      };\n\n      // find nearest parent element\n      var closest = function closest(el, fn) {\n        return el && (fn(el) ? el : closest(el.parentNode, fn));\n      };\n\n      // triggers when user clicks on thumbnail\n      var onThumbnailsClick = function onThumbnailsClick(e) {\n        e = e || window.event;\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n        var eTarget = e.target || e.srcElement;\n\n        // find root element of slide\n        var clickedListItem = closest(eTarget, function(el) {\n          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';\n        });\n\n        if (!clickedListItem) {\n          return;\n        }\n\n        // find index of clicked item by looping through all child nodes\n        // alternatively, you may define index via data- attribute\n        var clickedGallery = clickedListItem.parentNode,\n\n          // childNodes = clickedListItem.parentNode.childNodes,\n          // numChildNodes = childNodes.length,\n          childNodes = document.getElementsByClassName('thumb'),\n          numChildNodes = childNodes.length,\n          nodeIndex = 0,\n          index;\n\n        for (var i = 0; i < numChildNodes; i++) {\n          if (childNodes[i].nodeType !== 1) {\n            continue;\n          }\n\n          if (childNodes[i] === clickedListItem) {\n            index = nodeIndex;\n            break;\n          }\n          nodeIndex++;\n        }\n\n        if (index >= 0) {\n          // open PhotoSwipe if valid index found\n          openPhotoSwipe(index, clickedGallery);\n        }\n        return false;\n      };\n\n      // parse picture index and gallery index from URL (#&pid=1&gid=2)\n      var photoswipeParseHash = function photoswipeParseHash() {\n        var hash = window.location.hash.substring(1),\n          params = {};\n\n        if (hash.length < 5) {\n          return params;\n        }\n\n        var vars = hash.split('&');\n        for (var i = 0; i < vars.length; i++) {\n          if (!vars[i]) {\n            continue;\n          }\n          var pair = vars[i].split('=');\n          if (pair.length < 2) {\n            continue;\n          }\n          params[pair[0]] = pair[1];\n        }\n\n        if (params.gid) {\n          params.gid = parseInt(params.gid, 10);\n        }\n\n        return params;\n      };\n\n      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n        var pswpElement = document.querySelectorAll('.pswp')[0],\n          gallery,\n          options,\n          items;\n\n        items = parseThumbnailElements(galleryElement);\n        // define options (if needed)\n        options = {\n\n          // define gallery index (for URL)\n          galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n          getThumbBoundsFn: function getThumbBoundsFn(index) {\n            // See Options -> getThumbBoundsFn section of documentation for more info\n            var thumbnail = items[index].el.getElementsByTagName('img')[0],\n              // find thumbnail\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return {\n              x: rect.left,\n              y: rect.top + pageYScroll,\n              w: rect.width\n            };\n          }\n\n        };\n\n        // PhotoSwipe opened from URL\n        if (fromURL) {\n          if (options.galleryPIDs) {\n            // parse real index when custom PIDs are used \n            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n            for (var j = 0; j < items.length; j++) {\n              if (items[j].pid == index) {\n                options.index = j;\n                break;\n              }\n            }\n          } else {\n            // in URL indexes start from 1\n            options.index = parseInt(index, 10) - 1;\n          }\n        } else {\n          options.index = parseInt(index, 10);\n        }\n\n        // exit if index not found\n        if (isNaN(options.index)) {\n          return;\n        }\n\n        if (disableAnimation) {\n          options.showAnimationDuration = 0;\n        }\n\n        // Pass data to PhotoSwipe and initialize it\n        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        var $tempVideo;\n        var stopVideoHandle = function stopVideoHandle() {\n          if ($tempVideo) {\n            $tempVideo.remove();\n            $tempVideo = null;\n          }\n        };\n        var changeHandle = function changeHandle() {\n          var item = gallery.currItem;\n          stopVideoHandle();\n          if (item.type === 'video') {\n            var $ctn = item.container;\n            var style = $ctn.getElementsByClassName('pswp__img')[0].style;\n            var $video = document.createElement('video');\n            $video.setAttribute('autoplay', 'autoplay');\n            $video.setAttribute('controls', 'controls');\n            $video.setAttribute('src', item.target);\n            $video.style.width = style.width;\n            $video.style.height = style.height;\n            $video.style.position = 'absolute';\n            $video.style.zIndex = 2;\n            $tempVideo = $video;\n            $ctn.appendChild($video);\n          }\n        };\n        gallery.listen('initialZoomIn', changeHandle);\n        gallery.listen('afterChange', changeHandle);\n        gallery.listen('initialZoomOut', stopVideoHandle);\n      };\n\n      // loop through all gallery elements and bind events\n      var galleryElements = document.querySelectorAll(gallerySelector);\n      for (var i = 0, l = galleryElements.length; i < l; i++) {\n        galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n        galleryElements[i].onclick = onThumbnailsClick;\n      }\n\n      // Parse URL and open gallery if it contains #&pid=3&gid=1\n      var hashData = photoswipeParseHash();\n      if (hashData.pid && hashData.gid) {\n        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n      }\n    };\n\n    var Viewer = function() {\n      function init() {\n        initPhotoSwipeFromDOM('.photos');\n      }\n      return {\n        init: init\n      };\n    }();\n\n    module.exports = Viewer;\n\n    /***/\n  },\n  /* 3 */\n  /***/\n  function(module, exports) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      module.exports = inViewport;\n\n      var instances = [];\n      var supportsMutationObserver = typeof global.MutationObserver === 'function';\n\n      function inViewport(elt, params, cb) {\n        var opts = {\n          container: global.document.body,\n          offset: 0\n        };\n\n        if (params === undefined || typeof params === 'function') {\n          cb = params;\n          params = {};\n        }\n\n        var container = opts.container = params.container || opts.container;\n        var offset = opts.offset = params.offset || opts.offset;\n\n        for (var i = 0; i < instances.length; i++) {\n          if (instances[i].container === container) {\n            return instances[i].isInViewport(elt, offset, cb);\n          }\n        }\n\n        return instances[\n          instances.push(createInViewport(container)) - 1\n        ].isInViewport(elt, offset, cb);\n      }\n\n      function addEvent(el, type, fn) {\n        if (el.attachEvent) {\n          el.attachEvent('on' + type, fn);\n        } else {\n          el.addEventListener(type, fn, false);\n        }\n      }\n\n      function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n          var context = this,\n            args = arguments;\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n\n          function later() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n          }\n        };\n      }\n\n      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708\n      var contains = function() {\n        if (!global.document) {\n          return true;\n        }\n        return global.document.documentElement.compareDocumentPosition ?\n          function(a, b) {\n            return !!(a.compareDocumentPosition(b) & 16);\n          } :\n          global.document.documentElement.contains ?\n          function(a, b) {\n            return a !== b && (a.contains ? a.contains(b) : false);\n          } :\n          function(a, b) {\n            while (b = b.parentNode) {\n              if (b === a) {\n                return true;\n              }\n            }\n            return false;\n          };\n      }\n\n      function createInViewport(container) {\n        var watches = createWatches();\n\n        var scrollContainer = container === global.document.body ? global : container;\n        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);\n\n        addEvent(scrollContainer, 'scroll', debouncedCheck);\n\n        if (scrollContainer === global) {\n          addEvent(global, 'resize', debouncedCheck);\n        }\n\n        if (supportsMutationObserver) {\n          observeDOM(watches, container, debouncedCheck);\n        }\n\n        // failsafe check, every 200ms we check for visible images\n        // usecase: a hidden parent containing eleements\n        // when the parent becomes visible, we have no event that the children\n        // became visible\n        setInterval(debouncedCheck, 150);\n\n        function isInViewport(elt, offset, cb) {\n          if (!cb) {\n            return isVisible(elt, offset);\n          }\n\n          var remote = createRemote(elt, offset, cb);\n          remote.watch();\n          return remote;\n        }\n\n        function createRemote(elt, offset, cb) {\n          function watch() {\n            watches.add(elt, offset, cb);\n          }\n\n          function dispose() {\n            watches.remove(elt);\n          }\n\n          return {\n            watch: watch,\n            dispose: dispose\n          };\n        }\n\n        function watchInViewport(elt, offset, cb) {\n          if (isVisible(elt, offset)) {\n            watches.remove(elt);\n            cb(elt);\n          }\n        }\n\n        function isVisible(elt, offset) {\n          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {\n            return false;\n          }\n\n          // Check if the element is visible\n          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js\n          if (!elt.offsetWidth || !elt.offsetHeight) {\n            return false;\n          }\n\n          var eltRect = elt.getBoundingClientRect();\n          var viewport = {};\n\n          if (container === global.document.body) {\n            viewport = {\n              top: -offset,\n              left: -offset,\n              right: global.document.documentElement.clientWidth + offset,\n              bottom: global.document.documentElement.clientHeight + offset\n            };\n          } else {\n            var containerRect = container.getBoundingClientRect();\n            viewport = {\n              top: containerRect.top - offset,\n              left: containerRect.left - offset,\n              right: containerRect.right + offset,\n              bottom: containerRect.bottom + offset\n            };\n          }\n\n          // The element must overlap with the visible part of the viewport\n          var visible =\n            (\n              (eltRect.right > viewport.left) &&\n              (eltRect.left < viewport.right) &&\n              (eltRect.bottom > viewport.top) &&\n              (eltRect.top < viewport.bottom)\n            );\n\n          return visible;\n        }\n\n        return {\n          container: container,\n          isInViewport: isInViewport\n        };\n      }\n\n      function createWatches() {\n        var watches = [];\n\n        function add(elt, offset, cb) {\n          if (!isWatched(elt)) {\n            watches.push([elt, offset, cb]);\n          }\n        }\n\n        function remove(elt) {\n          var pos = indexOf(elt);\n          if (pos !== -1) {\n            watches.splice(pos, 1);\n          }\n        }\n\n        function indexOf(elt) {\n          for (var i = watches.length - 1; i >= 0; i--) {\n            if (watches[i][0] === elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function isWatched(elt) {\n          return indexOf(elt) !== -1;\n        }\n\n        function checkAll(cb) {\n          return function() {\n            for (var i = watches.length - 1; i >= 0; i--) {\n              cb.apply(this, watches[i]);\n            }\n          };\n        }\n\n        return {\n          add: add,\n          remove: remove,\n          isWatched: isWatched,\n          checkAll: checkAll\n        };\n      }\n\n      function observeDOM(watches, container, cb) {\n        var observer = new MutationObserver(watch);\n        var filter = Array.prototype.filter;\n        var concat = Array.prototype.concat;\n\n        observer.observe(container, {\n          childList: true,\n          subtree: true,\n          // changes like style/width/height/display will be catched\n          attributes: true\n        });\n\n        function watch(mutations) {\n          // some new DOM nodes where previously watched\n          // we should check their positions\n          if (mutations.some(knownNodes) === true) {\n            setTimeout(cb, 0);\n          }\n        }\n\n        function knownNodes(mutation) {\n          var nodes = concat.call([],\n            Array.prototype.slice.call(mutation.addedNodes),\n            mutation.target\n          );\n          return filter.call(nodes, watches.isWatched).length > 0;\n        }\n      }\n\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  }\n  /******/\n]);"},{"_content":"","source":"photos/lazyload.min.js","raw":"","date":"2021-04-30T21:54:48.410Z","updated":"2017-07-28T03:51:08.000Z","path":"photos/lazyload.min.js","layout":"false","title":"","comments":1,"_id":"cko4wk0yf000a0vxag0ycdpds","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"post","slug":"photos","title":"相册","noDate":"true","comments":0,"_content":"<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\">photos</a>\n\t<a class=\"photos-btn\" href=\"/photos/videos.html\">视频</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/ethan\" target=\"_blank\" class=\"open-ins\">图片来自instagram，正在加载中…</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>\n","source":"photos/videos.ejs","raw":"---\nlayout: post\nslug: \"photos\"\ntitle: \"相册\"\nnoDate: \"true\"\ncomments: \"false\"\n---\n<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\">photos</a>\n\t<a class=\"photos-btn\" href=\"/photos/videos.html\">视频</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/ethan\" target=\"_blank\" class=\"open-ins\">图片来自instagram，正在加载中…</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>\n","date":"2021-04-30T21:54:48.423Z","updated":"2021-04-29T12:45:36.387Z","path":"photos/videos.html","_id":"cko4wk0yg000c0vxaeveh4qya","content":"<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\">photos</a>\n\t<a class=\"photos-btn\" href=\"/photos/videos.html\">视频</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/ethan\" target=\"_blank\" class=\"open-ins\">图片来自instagram，正在加载中…</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>\n","site":{"data":{}},"excerpt":"","more":"<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\">photos</a>\n\t<a class=\"photos-btn\" href=\"/photos/videos.html\">视频</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/ethan\" target=\"_blank\" class=\"open-ins\">图片来自instagram，正在加载中…</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>\n"},{"_content":"<!doctype html>\n\n<html>\n\n<head>\n\n<meta charset=\"utf-8\">\n\n<title>无标题文档</title>\n</head>\n\n<style>\n\nbody {\n\n    padding:0;\n\n    margin:0;\n\n    overflow:hidden;\n\n\theight: 600px;\n\n}\n\ncanvas {\n\n    padding:0;\n\n    margin:0;\n\n}\n\ndiv.btnbg {\n\n    position:fixed;\n\n    left:0;\n\n    top:0;\n\n}\n\n</style>\n\n<body>\n<canvas id=\"sakura\"></canvas>\n\n<div class=\"btnbg\">\n\n</div>\n\n\n\n<!-- sakura shader -->\n\n<script id=\"sakura_point_vsh\" type=\"x-shader/x_vertex\">\n\nuniform mat4 uProjection;\n\nuniform mat4 uModelview;\n\nuniform vec3 uResolution;\n\nuniform vec3 uOffset;\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\n\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\n\n\nattribute vec3 aPosition;\n\nattribute vec3 aEuler;\n\nattribute vec2 aMisc; //x:size, y:fade\n\n\n\nvarying vec3 pposition;\n\nvarying float psize;\n\nvarying float palpha;\n\nvarying float pdist;\n\n\n\n//varying mat3 rotMat;\n\nvarying vec3 normX;\n\nvarying vec3 normY;\n\nvarying vec3 normZ;\n\nvarying vec3 normal;\n\n\n\nvarying float diffuse;\n\nvarying float specular;\n\nvarying float rstop;\n\nvarying float distancefade;\n\n\n\nvoid main(void) {\n\n    // Projection is based on vertical angle\n\n    vec4 pos = uModelview * vec4(aPosition + uOffset, 1.0);\n\n    gl_Position = uProjection * pos;\n\n    gl_PointSize = aMisc.x * uProjection[1][1] / -pos.z * uResolution.y * 0.5;\n\n    \n\n    pposition = pos.xyz;\n\n    psize = aMisc.x;\n\n    pdist = length(pos.xyz);\n\n    palpha = smoothstep(0.0, 1.0, (pdist - 0.1) / uFade.z);\n\n    \n\n    vec3 elrsn = sin(aEuler);\n\n    vec3 elrcs = cos(aEuler);\n\n    mat3 rotx = mat3(\n\n        1.0, 0.0, 0.0,\n\n        0.0, elrcs.x, elrsn.x,\n\n        0.0, -elrsn.x, elrcs.x\n\n    );\n\n    mat3 roty = mat3(\n\n        elrcs.y, 0.0, -elrsn.y,\n\n        0.0, 1.0, 0.0,\n\n        elrsn.y, 0.0, elrcs.y\n\n    );\n\n    mat3 rotz = mat3(\n\n        elrcs.z, elrsn.z, 0.0, \n\n        -elrsn.z, elrcs.z, 0.0,\n\n        0.0, 0.0, 1.0\n\n    );\n\n    mat3 rotmat = rotx * roty * rotz;\n\n    normal = rotmat[2];\n\n    \n\n    mat3 trrotm = mat3(\n\n        rotmat[0][0], rotmat[1][0], rotmat[2][0],\n\n        rotmat[0][1], rotmat[1][1], rotmat[2][1],\n\n        rotmat[0][2], rotmat[1][2], rotmat[2][2]\n\n    );\n\n    normX = trrotm[0];\n\n    normY = trrotm[1];\n\n    normZ = trrotm[2];\n\n    \n\n    const vec3 lit = vec3(0.6917144638660746, 0.6917144638660746, -0.20751433915982237);\n\n    \n\n    float tmpdfs = dot(lit, normal);\n\n    if(tmpdfs < 0.0) {\n\n        normal = -normal;\n\n        tmpdfs = dot(lit, normal);\n\n    }\n\n    diffuse = 0.4 + tmpdfs;\n\n    \n\n    vec3 eyev = normalize(-pos.xyz);\n\n    if(dot(eyev, normal) > 0.0) {\n\n        vec3 hv = normalize(eyev + lit);\n\n        specular = pow(max(dot(hv, normal), 0.0), 20.0);\n\n    }\n\n    else {\n\n        specular = 0.0;\n\n    }\n\n    \n\n    rstop = clamp((abs(pdist - uDOF.x) - uDOF.y) / uDOF.z, 0.0, 1.0);\n\n    rstop = pow(rstop, 0.5);\n\n    //-0.69315 = ln(0.5)\n\n    distancefade = min(1.0, exp((uFade.x - pdist) * 0.69315 / uFade.y));\n\n}\n\n</script>\n\n<script id=\"sakura_point_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\n\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\n\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\n\n\nconst vec3 fadeCol = vec3(0.08, 0.03, 0.06);\n\n\n\nvarying vec3 pposition;\n\nvarying float psize;\n\nvarying float palpha;\n\nvarying float pdist;\n\n\n\n//varying mat3 rotMat;\n\nvarying vec3 normX;\n\nvarying vec3 normY;\n\nvarying vec3 normZ;\n\nvarying vec3 normal;\n\n\n\nvarying float diffuse;\n\nvarying float specular;\n\nvarying float rstop;\n\nvarying float distancefade;\n\n\n\nfloat ellipse(vec2 p, vec2 o, vec2 r) {\n\n    vec2 lp = (p - o) / r;\n\n    return length(lp) - 1.0;\n\n}\n\n\n\nvoid main(void) {\n\n    vec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0;\n\n    vec3 d = vec3(0.0, 0.0, -1.0);\n\n    float nd = normZ.z; //dot(-normZ, d);\n\n    if(abs(nd) < 0.0001) discard;\n\n    \n\n    float np = dot(normZ, p);\n\n    vec3 tp = p + d * np / nd;\n\n    vec2 coord = vec2(dot(normX, tp), dot(normY, tp));\n\n    \n\n    //angle = 15 degree\n\n    const float flwrsn = 0.258819045102521;\n\n    const float flwrcs = 0.965925826289068;\n\n    mat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs);\n\n    vec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm;\n\n    \n\n    float r;\n\n    if(flwrp.x < 0.0) {\n\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5);\n\n    }\n\n    else {\n\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5);\n\n    }\n\n    \n\n    if(r > rstop) discard;\n\n    \n\n    vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r);\n\n    float grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35));\n\n    col *= vec3(1.0, grady, grady);\n\n    col *= mix(0.8, 1.0, pow(abs(coord.x), 0.3));\n\n    col = col * diffuse + specular;\n\n    \n\n    col = mix(fadeCol, col, distancefade);\n\n    \n\n    float alpha = (rstop > 0.001)? (0.5 - r / (rstop * 2.0)) : 1.0;\n\n    alpha = smoothstep(0.0, 1.0, alpha) * palpha;\n\n    \n\n    gl_FragColor = vec4(col * 0.5, alpha);\n\n}\n\n</script>\n\n<!-- effects -->\n\n<script id=\"fx_common_vsh\" type=\"x-shader/x_vertex\">\n\nuniform vec3 uResolution;\n\nattribute vec2 aPosition;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n\n}\n\n</script>\n\n<script id=\"bg_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\n\n\nuniform vec2 uTimes;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec3 col;\n\n    float c;\n\n    vec2 tmpv = texCoord * vec2(0.8, 1.0) - vec2(0.95, 1.0);\n\n    c = exp(-pow(length(tmpv) * 1.8, 2.0));\n\n    col = mix(vec3(0.02, 0.0, 0.03), vec3(0.96, 0.98, 1.0) * 1.5, c);\n\n    gl_FragColor = vec4(col * 0.5, 1.0);\n\n}\n\n</script>\n\n<script id=\"fx_brightbuf_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec4 col = texture2D(uSrc, texCoord);\n\n    gl_FragColor = vec4(col.rgb * 2.0 - vec3(0.5), 1.0);\n\n}\n\n</script>\n\n<script id=\"fx_dirblur_r4_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\nuniform vec4 uBlurDir; //dir(x, y), stride(z, w)\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec4 col = texture2D(uSrc, texCoord);\n\n    col = col + texture2D(uSrc, texCoord + uBlurDir.xy * uDelta);\n\n    col = col + texture2D(uSrc, texCoord - uBlurDir.xy * uDelta);\n\n    col = col + texture2D(uSrc, texCoord + (uBlurDir.xy + uBlurDir.zw) * uDelta);\n\n    col = col + texture2D(uSrc, texCoord - (uBlurDir.xy + uBlurDir.zw) * uDelta);\n\n    gl_FragColor = col / 5.0;\n\n}\n\n</script>\n\n<!-- effect fragment shader template -->\n\n<script id=\"fx_common_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    gl_FragColor = texture2D(uSrc, texCoord);\n\n}\n\n</script>\n\n<!-- post processing -->\n\n<script id=\"pp_final_vsh\" type=\"x-shader/x_vertex\">\n\nuniform vec3 uResolution;\n\nattribute vec2 aPosition;\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\nvoid main(void) {\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n\n}\n\n</script>\n\n<script id=\"pp_final_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform sampler2D uBloom;\n\nuniform vec2 uDelta;\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\nvoid main(void) {\n\n    vec4 srccol = texture2D(uSrc, texCoord) * 2.0;\n\n    vec4 bloomcol = texture2D(uBloom, texCoord);\n\n    vec4 col;\n\n    col = srccol + bloomcol * (vec4(1.0) + srccol);\n\n    col *= smoothstep(1.0, 0.0, pow(length((texCoord - vec2(0.5)) * 2.0), 1.2) * 0.5);\n\n    col = pow(col, vec4(0.45454545454545)); //(1.0 / 2.2)\n\n    \n\n    gl_FragColor = vec4(col.rgb, 1.0);\n\n    gl_FragColor.a = 1.0;\n\n}\n\n</script>\n\n</body>\n\n<script>\n\n// Utilities\n\nvar Vector3 = {};\n\nvar Matrix44 = {};\n\nVector3.create = function(x, y, z) {\n\n    return {'x':x, 'y':y, 'z':z};\n\n};\n\nVector3.dot = function (v0, v1) {\n\n    return v0.x * v1.x + v0.y * v1.y + v0.z * v1.z;\n\n};\n\nVector3.cross = function (v, v0, v1) {\n\n    v.x = v0.y * v1.z - v0.z * v1.y;\n\n    v.y = v0.z * v1.x - v0.x * v1.z;\n\n    v.z = v0.x * v1.y - v0.y * v1.x;\n\n};\n\nVector3.normalize = function (v) {\n\n    var l = v.x * v.x + v.y * v.y + v.z * v.z;\n\n    if(l > 0.00001) {\n\n        l = 1.0 / Math.sqrt(l);\n\n        v.x *= l;\n\n        v.y *= l;\n\n        v.z *= l;\n\n    }\n\n};\n\nVector3.arrayForm = function(v) {\n\n    if(v.array) {\n\n        v.array[0] = v.x;\n\n        v.array[1] = v.y;\n\n        v.array[2] = v.z;\n\n    }\n\n    else {\n\n        v.array = new Float32Array([v.x, v.y, v.z]);\n\n    }\n\n    return v.array;\n\n};\n\nMatrix44.createIdentity = function () {\n\n    return new Float32Array([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]);\n\n};\n\nMatrix44.loadProjection = function (m, aspect, vdeg, near, far) {\n\n    var h = near * Math.tan(vdeg * Math.PI / 180.0 * 0.5) * 2.0;\n\n    var w = h * aspect;\n\n    \n\n    m[0] = 2.0 * near / w;\n\n    m[1] = 0.0;\n\n    m[2] = 0.0;\n\n    m[3] = 0.0;\n\n    \n\n    m[4] = 0.0;\n\n    m[5] = 2.0 * near / h;\n\n    m[6] = 0.0;\n\n    m[7] = 0.0;\n\n    \n\n    m[8] = 0.0;\n\n    m[9] = 0.0;\n\n    m[10] = -(far + near) / (far - near);\n\n    m[11] = -1.0;\n\n    \n\n    m[12] = 0.0;\n\n    m[13] = 0.0;\n\n    m[14] = -2.0 * far * near / (far - near);\n\n    m[15] = 0.0;\n\n};\n\nMatrix44.loadLookAt = function (m, vpos, vlook, vup) {\n\n    var frontv = Vector3.create(vpos.x - vlook.x, vpos.y - vlook.y, vpos.z - vlook.z);\n\n    Vector3.normalize(frontv);\n\n    var sidev = Vector3.create(1.0, 0.0, 0.0);\n\n    Vector3.cross(sidev, vup, frontv);\n\n    Vector3.normalize(sidev);\n\n    var topv = Vector3.create(1.0, 0.0, 0.0);\n\n    Vector3.cross(topv, frontv, sidev);\n\n    Vector3.normalize(topv);\n\n    \n\n    m[0] = sidev.x;\n\n    m[1] = topv.x;\n\n    m[2] = frontv.x;\n\n    m[3] = 0.0;\n\n    \n\n    m[4] = sidev.y;\n\n    m[5] = topv.y;\n\n    m[6] = frontv.y;\n\n    m[7] = 0.0;\n\n    \n\n    m[8] = sidev.z;\n\n    m[9] = topv.z;\n\n    m[10] = frontv.z;\n\n    m[11] = 0.0;\n\n    \n\n    m[12] = -(vpos.x * m[0] + vpos.y * m[4] + vpos.z * m[8]);\n\n    m[13] = -(vpos.x * m[1] + vpos.y * m[5] + vpos.z * m[9]);\n\n    m[14] = -(vpos.x * m[2] + vpos.y * m[6] + vpos.z * m[10]);\n\n    m[15] = 1.0;\n\n};\n\n\n\n//\n\nvar timeInfo = {\n\n    'start':0, 'prev':0, // Date\n\n    'delta':0, 'elapsed':0 // Number(sec)\n\n};\n\n\n\n//\n\nvar gl;\n\nvar renderSpec = {\n\n    'width':0,\n\n    'height':0,\n\n    'aspect':1,\n\n    'array':new Float32Array(3),\n\n    'halfWidth':0,\n\n    'halfHeight':0,\n\n    'halfArray':new Float32Array(3)\n\n    // and some render targets. see setViewport()\n\n};\n\nrenderSpec.setSize = function(w, h) {\n\n    renderSpec.width = w;\n\n    renderSpec.height = h;\n\n    renderSpec.aspect = renderSpec.width / renderSpec.height;\n\n    renderSpec.array[0] = renderSpec.width;\n\n    renderSpec.array[1] = renderSpec.height;\n\n    renderSpec.array[2] = renderSpec.aspect;\n\n    \n\n    renderSpec.halfWidth = Math.floor(w / 2);\n\n    renderSpec.halfHeight = Math.floor(h / 2);\n\n    renderSpec.halfArray[0] = renderSpec.halfWidth;\n\n    renderSpec.halfArray[1] = renderSpec.halfHeight;\n\n    renderSpec.halfArray[2] = renderSpec.halfWidth / renderSpec.halfHeight;\n\n};\n\n\n\nfunction deleteRenderTarget(rt) {\n\n    gl.deleteFramebuffer(rt.frameBuffer);\n\n    gl.deleteRenderbuffer(rt.renderBuffer);\n\n    gl.deleteTexture(rt.texture);\n\n}\n\n\n\nfunction createRenderTarget(w, h) {\n\n    var ret = {\n\n        'width':w,\n\n        'height':h,\n\n        'sizeArray':new Float32Array([w, h, w / h]),\n\n        'dtxArray':new Float32Array([1.0 / w, 1.0 / h])\n\n    };\n\n    ret.frameBuffer = gl.createFramebuffer();\n\n    ret.renderBuffer = gl.createRenderbuffer();\n\n    ret.texture = gl.createTexture();\n\n    \n\n    gl.bindTexture(gl.TEXTURE_2D, ret.texture);\n\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, w, h, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\n    \n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, ret.frameBuffer);\n\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, ret.texture, 0);\n\n    \n\n    gl.bindRenderbuffer(gl.RENDERBUFFER, ret.renderBuffer);\n\n    gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, w, h);\n\n    gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, ret.renderBuffer);\n\n    \n\n    gl.bindTexture(gl.TEXTURE_2D, null);\n\n    gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    \n\n    return ret;\n\n}\n\n\n\nfunction compileShader(shtype, shsrc) {\n\n\tvar retsh = gl.createShader(shtype);\n\n\t\n\n\tgl.shaderSource(retsh, shsrc);\n\n\tgl.compileShader(retsh);\n\n\t\n\n\tif(!gl.getShaderParameter(retsh, gl.COMPILE_STATUS)) {\n\n\t\tvar errlog = gl.getShaderInfoLog(retsh);\n\n\t\tgl.deleteShader(retsh);\n\n\t\tconsole.error(errlog);\n\n\t\treturn null;\n\n\t}\n\n\treturn retsh;\n\n}\n\n\n\nfunction createShader(vtxsrc, frgsrc, uniformlist, attrlist) {\n\n    var vsh = compileShader(gl.VERTEX_SHADER, vtxsrc);\n\n    var fsh = compileShader(gl.FRAGMENT_SHADER, frgsrc);\n\n    \n\n    if(vsh == null || fsh == null) {\n\n        return null;\n\n    }\n\n    \n\n    var prog = gl.createProgram();\n\n    gl.attachShader(prog, vsh);\n\n    gl.attachShader(prog, fsh);\n\n    \n\n    gl.deleteShader(vsh);\n\n    gl.deleteShader(fsh);\n\n    \n\n    gl.linkProgram(prog);\n\n    if (!gl.getProgramParameter(prog, gl.LINK_STATUS)) {\n\n        var errlog = gl.getProgramInfoLog(prog);\n\n        console.error(errlog);\n\n        return null;\n\n    }\n\n    \n\n    if(uniformlist) {\n\n        prog.uniforms = {};\n\n        for(var i = 0; i < uniformlist.length; i++) {\n\n            prog.uniforms[uniformlist[i]] = gl.getUniformLocation(prog, uniformlist[i]);\n\n        }\n\n    }\n\n    \n\n    if(attrlist) {\n\n        prog.attributes = {};\n\n        for(var i = 0; i < attrlist.length; i++) {\n\n            var attr = attrlist[i];\n\n            prog.attributes[attr] = gl.getAttribLocation(prog, attr);\n\n        }\n\n    }\n\n    \n\n    return prog;\n\n}\n\n\n\nfunction useShader(prog) {\n\n    gl.useProgram(prog);\n\n    for(var attr in prog.attributes) {\n\n        gl.enableVertexAttribArray(prog.attributes[attr]);;\n\n    }\n\n}\n\n\n\nfunction unuseShader(prog) {\n\n    for(var attr in prog.attributes) {\n\n        gl.disableVertexAttribArray(prog.attributes[attr]);;\n\n    }\n\n    gl.useProgram(null);\n\n}\n\n\n\n/////\n\nvar projection = {\n\n    'angle':60,\n\n    'nearfar':new Float32Array([0.1, 100.0]),\n\n    'matrix':Matrix44.createIdentity()\n\n};\n\nvar camera = {\n\n    'position':Vector3.create(0, 0, 100),\n\n    'lookat':Vector3.create(0, 0, 0),\n\n    'up':Vector3.create(0, 1, 0),\n\n    'dof':Vector3.create(10.0, 4.0, 8.0),\n\n    'matrix':Matrix44.createIdentity()\n\n};\n\n\n\nvar pointFlower = {};\n\nvar meshFlower = {};\n\nvar sceneStandBy = false;\n\n\n\nvar BlossomParticle = function () {\n\n    this.velocity = new Array(3);\n\n    this.rotation = new Array(3);\n\n    this.position = new Array(3);\n\n    this.euler = new Array(3);\n\n    this.size = 1.0;\n\n    this.alpha = 1.0;\n\n    this.zkey = 0.0;\n\n};\n\n\n\nBlossomParticle.prototype.setVelocity = function (vx, vy, vz) {\n\n    this.velocity[0] = vx;\n\n    this.velocity[1] = vy;\n\n    this.velocity[2] = vz;\n\n};\n\n\n\nBlossomParticle.prototype.setRotation = function (rx, ry, rz) {\n\n    this.rotation[0] = rx;\n\n    this.rotation[1] = ry;\n\n    this.rotation[2] = rz;\n\n};\n\n\n\nBlossomParticle.prototype.setPosition = function (nx, ny, nz) {\n\n    this.position[0] = nx;\n\n    this.position[1] = ny;\n\n    this.position[2] = nz;\n\n};\n\n\n\nBlossomParticle.prototype.setEulerAngles = function (rx, ry, rz) {\n\n    this.euler[0] = rx;\n\n    this.euler[1] = ry;\n\n    this.euler[2] = rz;\n\n};\n\n\n\nBlossomParticle.prototype.setSize = function (s) {\n\n    this.size = s;\n\n};\n\n\n\nBlossomParticle.prototype.update = function (dt, et) {\n\n    this.position[0] += this.velocity[0] * dt;\n\n    this.position[1] += this.velocity[1] * dt;\n\n    this.position[2] += this.velocity[2] * dt;\n\n    \n\n    this.euler[0] += this.rotation[0] * dt;\n\n    this.euler[1] += this.rotation[1] * dt;\n\n    this.euler[2] += this.rotation[2] * dt;\n\n};\n\n\n\nfunction createPointFlowers() {\n\n    // get point sizes\n\n    var prm = gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);\n\n    renderSpec.pointSize = {'min':prm[0], 'max':prm[1]};\n\n    \n\n    var vtxsrc = document.getElementById(\"sakura_point_vsh\").textContent;\n\n    var frgsrc = document.getElementById(\"sakura_point_fsh\").textContent;\n\n    \n\n    pointFlower.program = createShader(\n\n        vtxsrc, frgsrc,\n\n        ['uProjection', 'uModelview', 'uResolution', 'uOffset', 'uDOF', 'uFade'],\n\n        ['aPosition', 'aEuler', 'aMisc']\n\n    );\n\n    \n\n    useShader(pointFlower.program);\n\n    pointFlower.offset = new Float32Array([0.0, 0.0, 0.0]);\n\n    pointFlower.fader = Vector3.create(0.0, 10.0, 0.0);\n\n    \n\n    // paramerters: velocity[3], rotate[3]\n\n    pointFlower.numFlowers = 1600;\n\n    pointFlower.particles = new Array(pointFlower.numFlowers);\n\n    // vertex attributes {position[3], euler_xyz[3], size[1]}\n\n    pointFlower.dataArray = new Float32Array(pointFlower.numFlowers * (3 + 3 + 2));\n\n    pointFlower.positionArrayOffset = 0;\n\n    pointFlower.eulerArrayOffset = pointFlower.numFlowers * 3;\n\n    pointFlower.miscArrayOffset = pointFlower.numFlowers * 6;\n\n    \n\n    pointFlower.buffer = gl.createBuffer();\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    \n\n    unuseShader(pointFlower.program);\n\n    \n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        pointFlower.particles[i] = new BlossomParticle();\n\n    }\n\n}\n\n\n\nfunction initPointFlowers() {\n\n    //area\n\n    pointFlower.area = Vector3.create(20.0, 20.0, 20.0);\n\n    pointFlower.area.x = pointFlower.area.y * renderSpec.aspect;\n\n    \n\n    pointFlower.fader.x = 10.0; //env fade start\n\n    pointFlower.fader.y = pointFlower.area.z; //env fade half\n\n    pointFlower.fader.z = 0.1;  //near fade start\n\n    \n\n    //particles\n\n    var PI2 = Math.PI * 2.0;\n\n    var tmpv3 = Vector3.create(0, 0, 0);\n\n    var tmpv = 0;\n\n    var symmetryrand = function() {return (Math.random() * 2.0 - 1.0);};\n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var tmpprtcl = pointFlower.particles[i];\n\n        \n\n        //velocity\n\n        tmpv3.x = symmetryrand() * 0.3 + 0.8;\n\n        tmpv3.y = symmetryrand() * 0.2 - 1.0;\n\n        tmpv3.z = symmetryrand() * 0.3 + 0.5;\n\n        Vector3.normalize(tmpv3);\n\n        tmpv = 2.0 + Math.random() * 1.0;\n\n        tmpprtcl.setVelocity(tmpv3.x * tmpv, tmpv3.y * tmpv, tmpv3.z * tmpv);\n\n        \n\n        //rotation\n\n        tmpprtcl.setRotation(\n\n            symmetryrand() * PI2 * 0.5,\n\n            symmetryrand() * PI2 * 0.5,\n\n            symmetryrand() * PI2 * 0.5\n\n        );\n\n        \n\n        //position\n\n        tmpprtcl.setPosition(\n\n            symmetryrand() * pointFlower.area.x,\n\n            symmetryrand() * pointFlower.area.y,\n\n            symmetryrand() * pointFlower.area.z\n\n        );\n\n        \n\n        //euler\n\n        tmpprtcl.setEulerAngles(\n\n            Math.random() * Math.PI * 2.0,\n\n            Math.random() * Math.PI * 2.0,\n\n            Math.random() * Math.PI * 2.0\n\n        );\n\n        \n\n        //size\n\n        tmpprtcl.setSize(0.9 + Math.random() * 0.1);\n\n    }\n\n}\n\n\n\nfunction renderPointFlowers() {\n\n    //update\n\n    var PI2 = Math.PI * 2.0;\n\n    var limit = [pointFlower.area.x, pointFlower.area.y, pointFlower.area.z];\n\n    var repeatPos = function (prt, cmp, limit) {\n\n        if(Math.abs(prt.position[cmp]) - prt.size * 0.5 > limit) {\n\n            //out of area\n\n            if(prt.position[cmp] > 0) {\n\n                prt.position[cmp] -= limit * 2.0;\n\n            }\n\n            else {\n\n                prt.position[cmp] += limit * 2.0;\n\n            }\n\n        }\n\n    };\n\n    var repeatEuler = function (prt, cmp) {\n\n        prt.euler[cmp] = prt.euler[cmp] % PI2;\n\n        if(prt.euler[cmp] < 0.0) {\n\n            prt.euler[cmp] += PI2;\n\n        }\n\n    };\n\n    \n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var prtcl = pointFlower.particles[i];\n\n        prtcl.update(timeInfo.delta, timeInfo.elapsed);\n\n        repeatPos(prtcl, 0, pointFlower.area.x);\n\n        repeatPos(prtcl, 1, pointFlower.area.y);\n\n        repeatPos(prtcl, 2, pointFlower.area.z);\n\n        repeatEuler(prtcl, 0);\n\n        repeatEuler(prtcl, 1);\n\n        repeatEuler(prtcl, 2);\n\n        \n\n        prtcl.alpha = 1.0;//(pointFlower.area.z - prtcl.position[2]) * 0.5;\n\n        \n\n        prtcl.zkey = (camera.matrix[2] * prtcl.position[0]\n\n                    + camera.matrix[6] * prtcl.position[1]\n\n                    + camera.matrix[10] * prtcl.position[2]\n\n                    + camera.matrix[14]);\n\n    }\n\n    \n\n    // sort\n\n    pointFlower.particles.sort(function(p0, p1){return p0.zkey - p1.zkey;});\n\n    \n\n    // update data\n\n    var ipos = pointFlower.positionArrayOffset;\n\n    var ieuler = pointFlower.eulerArrayOffset;\n\n    var imisc = pointFlower.miscArrayOffset;\n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var prtcl = pointFlower.particles[i];\n\n        pointFlower.dataArray[ipos] = prtcl.position[0];\n\n        pointFlower.dataArray[ipos + 1] = prtcl.position[1];\n\n        pointFlower.dataArray[ipos + 2] = prtcl.position[2];\n\n        ipos += 3;\n\n        pointFlower.dataArray[ieuler] = prtcl.euler[0];\n\n        pointFlower.dataArray[ieuler + 1] = prtcl.euler[1];\n\n        pointFlower.dataArray[ieuler + 2] = prtcl.euler[2];\n\n        ieuler += 3;\n\n        pointFlower.dataArray[imisc] = prtcl.size;\n\n        pointFlower.dataArray[imisc + 1] = prtcl.alpha;\n\n        imisc += 2;\n\n    }\n\n    \n\n    //draw\n\n    gl.enable(gl.BLEND);\n\n    //gl.disable(gl.DEPTH_TEST);\n\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n    \n\n    var prog = pointFlower.program;\n\n    useShader(prog);\n\n    \n\n    gl.uniformMatrix4fv(prog.uniforms.uProjection, false, projection.matrix);\n\n    gl.uniformMatrix4fv(prog.uniforms.uModelview, false, camera.matrix);\n\n    gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);\n\n    gl.uniform3fv(prog.uniforms.uDOF, Vector3.arrayForm(camera.dof));\n\n    gl.uniform3fv(prog.uniforms.uFade, Vector3.arrayForm(pointFlower.fader));\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);\n\n    \n\n    gl.vertexAttribPointer(prog.attributes.aPosition, 3, gl.FLOAT, false, 0, pointFlower.positionArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    gl.vertexAttribPointer(prog.attributes.aEuler, 3, gl.FLOAT, false, 0, pointFlower.eulerArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    gl.vertexAttribPointer(prog.attributes.aMisc, 2, gl.FLOAT, false, 0, pointFlower.miscArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    \n\n    // doubler\n\n    for(var i = 1; i < 2; i++) {\n\n        var zpos = i * -2.0;\n\n        pointFlower.offset[0] = pointFlower.area.x * -1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y * -1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x * -1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y *  1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x *  1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y * -1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x *  1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y *  1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n    }\n\n    \n\n    //main\n\n    pointFlower.offset[0] = 0.0;\n\n    pointFlower.offset[1] = 0.0;\n\n    pointFlower.offset[2] = 0.0;\n\n    gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n    gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    unuseShader(prog);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n    gl.disable(gl.BLEND);\n\n}\n\n\n\n// effects\n\n//common util\n\nfunction createEffectProgram(vtxsrc, frgsrc, exunifs, exattrs) {\n\n    var ret = {};\n\n    var unifs = ['uResolution', 'uSrc', 'uDelta'];\n\n    if(exunifs) {\n\n        unifs = unifs.concat(exunifs);\n\n    }\n\n    var attrs = ['aPosition'];\n\n    if(exattrs) {\n\n        attrs = attrs.concat(exattrs);\n\n    }\n\n    \n\n    ret.program = createShader(vtxsrc, frgsrc, unifs, attrs);\n\n    useShader(ret.program);\n\n    \n\n    ret.dataArray = new Float32Array([\n\n        -1.0, -1.0,\n\n         1.0, -1.0,\n\n        -1.0,  1.0,\n\n         1.0,  1.0\n\n    ]);\n\n    ret.buffer = gl.createBuffer();\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, ret.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, ret.dataArray, gl.STATIC_DRAW);\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    unuseShader(ret.program);\n\n    \n\n    return ret;\n\n}\n\n\n\n// basic usage\n\n// useEffect(prog, srctex({'texture':texid, 'dtxArray':(f32)[dtx, dty]})); //basic initialize\n\n// gl.uniform**(...); //additional uniforms\n\n// drawEffect()\n\n// unuseEffect(prog)\n\n// TEXTURE0 makes src\n\nfunction useEffect(fxobj, srctex) {\n\n    var prog = fxobj.program;\n\n    useShader(prog);\n\n    gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);\n\n    \n\n    if(srctex != null) {\n\n        gl.uniform2fv(prog.uniforms.uDelta, srctex.dtxArray);\n\n        gl.uniform1i(prog.uniforms.uSrc, 0);\n\n        \n\n        gl.activeTexture(gl.TEXTURE0);\n\n        gl.bindTexture(gl.TEXTURE_2D, srctex.texture);\n\n    }\n\n}\n\nfunction drawEffect(fxobj) {\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, fxobj.buffer);\n\n    gl.vertexAttribPointer(fxobj.program.attributes.aPosition, 2, gl.FLOAT, false, 0, 0);\n\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n}\n\nfunction unuseEffect(fxobj) {\n\n    unuseShader(fxobj.program);\n\n}\n\n\n\nvar effectLib = {};\n\nfunction createEffectLib() {\n\n    \n\n    var vtxsrc, frgsrc;\n\n    //common\n\n    var cmnvtxsrc = document.getElementById(\"fx_common_vsh\").textContent;\n\n    \n\n    //background\n\n    frgsrc = document.getElementById(\"bg_fsh\").textContent;\n\n    effectLib.sceneBg = createEffectProgram(cmnvtxsrc, frgsrc, ['uTimes'], null);\n\n    \n\n    // make brightpixels buffer\n\n    frgsrc = document.getElementById(\"fx_brightbuf_fsh\").textContent;\n\n    effectLib.mkBrightBuf = createEffectProgram(cmnvtxsrc, frgsrc, null, null);\n\n    \n\n    // direction blur\n\n    frgsrc = document.getElementById(\"fx_dirblur_r4_fsh\").textContent;\n\n    effectLib.dirBlur = createEffectProgram(cmnvtxsrc, frgsrc, ['uBlurDir'], null);\n\n    \n\n    //final composite\n\n    vtxsrc = document.getElementById(\"pp_final_vsh\").textContent;\n\n    frgsrc = document.getElementById(\"pp_final_fsh\").textContent;\n\n    effectLib.finalComp = createEffectProgram(vtxsrc, frgsrc, ['uBloom'], null);\n\n}\n\n\n\n// background\n\nfunction createBackground() {\n\n    //console.log(\"create background\");\n\n}\n\nfunction initBackground() {\n\n    //console.log(\"init background\");\n\n}\n\nfunction renderBackground() {\n\n    gl.disable(gl.DEPTH_TEST);\n\n    \n\n    useEffect(effectLib.sceneBg, null);\n\n    gl.uniform2f(effectLib.sceneBg.program.uniforms.uTimes, timeInfo.elapsed, timeInfo.delta);\n\n    drawEffect(effectLib.sceneBg);\n\n    unuseEffect(effectLib.sceneBg);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n}\n\n\n\n// post process\n\nvar postProcess = {};\n\nfunction createPostProcess() {\n\n    //console.log(\"create post process\");\n\n}\n\nfunction initPostProcess() {\n\n    //console.log(\"init post process\");\n\n}\n\n\n\nfunction renderPostProcess() {\n\n    gl.enable(gl.TEXTURE_2D);\n\n    gl.disable(gl.DEPTH_TEST);\n\n    var bindRT = function (rt, isclear) {\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, rt.frameBuffer);\n\n        gl.viewport(0, 0, rt.width, rt.height);\n\n        if(isclear) {\n\n            gl.clearColor(0, 0, 0, 0);\n\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n        }\n\n    };\n\n    \n\n    //make bright buff\n\n    bindRT(renderSpec.wHalfRT0, true);\n\n    useEffect(effectLib.mkBrightBuf, renderSpec.mainRT);\n\n    drawEffect(effectLib.mkBrightBuf);\n\n    unuseEffect(effectLib.mkBrightBuf);\n\n    \n\n    // make bloom\n\n    for(var i = 0; i < 2; i++) {\n\n        var p = 1.5 + 1 * i;\n\n        var s = 2.0 + 1 * i;\n\n        bindRT(renderSpec.wHalfRT1, true);\n\n        useEffect(effectLib.dirBlur, renderSpec.wHalfRT0);\n\n        gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir, p, 0.0, s, 0.0);\n\n        drawEffect(effectLib.dirBlur);\n\n        unuseEffect(effectLib.dirBlur);\n\n        \n\n        bindRT(renderSpec.wHalfRT0, true);\n\n        useEffect(effectLib.dirBlur, renderSpec.wHalfRT1);\n\n        gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir, 0.0, p, 0.0, s);\n\n        drawEffect(effectLib.dirBlur);\n\n        unuseEffect(effectLib.dirBlur);\n\n    }\n\n    \n\n    //display\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    gl.viewport(0, 0, renderSpec.width, renderSpec.height);\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    \n\n    useEffect(effectLib.finalComp, renderSpec.mainRT);\n\n    gl.uniform1i(effectLib.finalComp.program.uniforms.uBloom, 1);\n\n    gl.activeTexture(gl.TEXTURE1);\n\n    gl.bindTexture(gl.TEXTURE_2D, renderSpec.wHalfRT0.texture);\n\n    drawEffect(effectLib.finalComp);\n\n    unuseEffect(effectLib.finalComp);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n}\n\n\n\n/////\n\nvar SceneEnv = {};\n\nfunction createScene() {\n\n    createEffectLib();\n\n    createBackground();\n\n    createPointFlowers();\n\n    createPostProcess();\n\n    sceneStandBy = true;\n\n}\n\n\n\nfunction initScene() {\n\n    initBackground();\n\n    initPointFlowers();\n\n    initPostProcess();\n\n    \n\n    //camera.position.z = 17.320508;\n\n    camera.position.z = pointFlower.area.z + projection.nearfar[0];\n\n    projection.angle = Math.atan2(pointFlower.area.y, camera.position.z + pointFlower.area.z) * 180.0 / Math.PI * 2.0;\n\n    Matrix44.loadProjection(projection.matrix, renderSpec.aspect, projection.angle, projection.nearfar[0], projection.nearfar[1]);\n\n}\n\n\n\nfunction renderScene() {\n\n    //draw\n\n    Matrix44.loadLookAt(camera.matrix, camera.position, camera.lookat, camera.up);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n    \n\n    //gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, renderSpec.mainRT.frameBuffer);\n\n    gl.viewport(0, 0, renderSpec.mainRT.width, renderSpec.mainRT.height);\n\n    gl.clearColor(0.005, 0, 0.05, 0);\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    \n\n    renderBackground();\n\n    renderPointFlowers();\n\n    renderPostProcess();\n\n}\n\n\n\n/////\n\nfunction onResize(e) {\n\n    makeCanvasFullScreen(document.getElementById(\"sakura\"));\n\n    setViewports();\n\n    if(sceneStandBy) {\n\n        initScene();\n\n    }\n\n}\n\n\n\nfunction setViewports() {\n\n    renderSpec.setSize(gl.canvas.width, gl.canvas.height);\n\n    \n\n    gl.clearColor(0.2, 0.2, 0.5, 1.0);\n\n    gl.viewport(0, 0, renderSpec.width, renderSpec.height);\n\n    \n\n    var rtfunc = function (rtname, rtw, rth) {\n\n        var rt = renderSpec[rtname];\n\n        if(rt) deleteRenderTarget(rt);\n\n        renderSpec[rtname] = createRenderTarget(rtw, rth);\n\n    };\n\n    rtfunc('mainRT', renderSpec.width, renderSpec.height);\n\n    rtfunc('wFullRT0', renderSpec.width, renderSpec.height);\n\n    rtfunc('wFullRT1', renderSpec.width, renderSpec.height);\n\n    rtfunc('wHalfRT0', renderSpec.halfWidth, renderSpec.halfHeight);\n\n    rtfunc('wHalfRT1', renderSpec.halfWidth, renderSpec.halfHeight);\n\n}\n\n\n\nfunction render() {\n\n    renderScene();\n\n}\n\n\n\nvar animating = true;\n\nfunction toggleAnimation(elm) {\n\n    animating ^= true;\n\n    if(animating) animate();\n\n    if(elm) {\n\n        elm.innerHTML = animating? \"Stop\":\"Start\";\n\n    }\n\n}\n\n\n\nfunction stepAnimation() {\n\n    if(!animating) animate();\n\n}\n\n\n\nfunction animate() {\n\n    var curdate = new Date();\n\n    timeInfo.elapsed = (curdate - timeInfo.start) / 1000.0;\n\n    timeInfo.delta = (curdate - timeInfo.prev) / 1000.0;\n\n    timeInfo.prev = curdate;\n\n    \n\n    if(animating) requestAnimationFrame(animate);\n\n    render();\n\n}\n\n\n\nfunction makeCanvasFullScreen(canvas) {\n\n    var b = document.body;\n\n\tvar d = document.documentElement;\n\n\tfullw = Math.max(b.clientWidth , b.scrollWidth, d.scrollWidth, d.clientWidth);\n\n\tfullh = Math.max(b.clientHeight , b.scrollHeight, d.scrollHeight, d.clientHeight);\n\n\tcanvas.width = fullw;\n\n\tcanvas.height = fullh;\n\n}\n\n\n\nwindow.addEventListener('load', function(e) {\n\n    var canvas = document.getElementById(\"sakura\");\n\n    try {\n\n        makeCanvasFullScreen(canvas);\n\n        gl = canvas.getContext('experimental-webgl');\n\n    } catch(e) {\n\n        alert(\"WebGL not supported.\" + e);\n\n        console.error(e);\n\n        return;\n\n    }\n\n    \n\n    window.addEventListener('resize', onResize);\n\n    \n\n    setViewports();\n\n    createScene();\n\n    initScene();\n\n    \n\n    timeInfo.start = new Date();\n\n    timeInfo.prev = timeInfo.start;\n\n    animate();\n\n});\n\n\n\n//set window.requestAnimationFrame\n\n(function (w, r) {\n\n    w['r'+r] = w['r'+r] || w['webkitR'+r] || w['mozR'+r] || w['msR'+r] || w['oR'+r] || function(c){ w.setTimeout(c, 1000 / 60); };\n\n})(window, 'equestAnimationFrame');\n\n</script>\n\n</html>\n\n","source":"assets/webpage/index.html","raw":"<!doctype html>\n\n<html>\n\n<head>\n\n<meta charset=\"utf-8\">\n\n<title>无标题文档</title>\n</head>\n\n<style>\n\nbody {\n\n    padding:0;\n\n    margin:0;\n\n    overflow:hidden;\n\n\theight: 600px;\n\n}\n\ncanvas {\n\n    padding:0;\n\n    margin:0;\n\n}\n\ndiv.btnbg {\n\n    position:fixed;\n\n    left:0;\n\n    top:0;\n\n}\n\n</style>\n\n<body>\n<canvas id=\"sakura\"></canvas>\n\n<div class=\"btnbg\">\n\n</div>\n\n\n\n<!-- sakura shader -->\n\n<script id=\"sakura_point_vsh\" type=\"x-shader/x_vertex\">\n\nuniform mat4 uProjection;\n\nuniform mat4 uModelview;\n\nuniform vec3 uResolution;\n\nuniform vec3 uOffset;\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\n\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\n\n\nattribute vec3 aPosition;\n\nattribute vec3 aEuler;\n\nattribute vec2 aMisc; //x:size, y:fade\n\n\n\nvarying vec3 pposition;\n\nvarying float psize;\n\nvarying float palpha;\n\nvarying float pdist;\n\n\n\n//varying mat3 rotMat;\n\nvarying vec3 normX;\n\nvarying vec3 normY;\n\nvarying vec3 normZ;\n\nvarying vec3 normal;\n\n\n\nvarying float diffuse;\n\nvarying float specular;\n\nvarying float rstop;\n\nvarying float distancefade;\n\n\n\nvoid main(void) {\n\n    // Projection is based on vertical angle\n\n    vec4 pos = uModelview * vec4(aPosition + uOffset, 1.0);\n\n    gl_Position = uProjection * pos;\n\n    gl_PointSize = aMisc.x * uProjection[1][1] / -pos.z * uResolution.y * 0.5;\n\n    \n\n    pposition = pos.xyz;\n\n    psize = aMisc.x;\n\n    pdist = length(pos.xyz);\n\n    palpha = smoothstep(0.0, 1.0, (pdist - 0.1) / uFade.z);\n\n    \n\n    vec3 elrsn = sin(aEuler);\n\n    vec3 elrcs = cos(aEuler);\n\n    mat3 rotx = mat3(\n\n        1.0, 0.0, 0.0,\n\n        0.0, elrcs.x, elrsn.x,\n\n        0.0, -elrsn.x, elrcs.x\n\n    );\n\n    mat3 roty = mat3(\n\n        elrcs.y, 0.0, -elrsn.y,\n\n        0.0, 1.0, 0.0,\n\n        elrsn.y, 0.0, elrcs.y\n\n    );\n\n    mat3 rotz = mat3(\n\n        elrcs.z, elrsn.z, 0.0, \n\n        -elrsn.z, elrcs.z, 0.0,\n\n        0.0, 0.0, 1.0\n\n    );\n\n    mat3 rotmat = rotx * roty * rotz;\n\n    normal = rotmat[2];\n\n    \n\n    mat3 trrotm = mat3(\n\n        rotmat[0][0], rotmat[1][0], rotmat[2][0],\n\n        rotmat[0][1], rotmat[1][1], rotmat[2][1],\n\n        rotmat[0][2], rotmat[1][2], rotmat[2][2]\n\n    );\n\n    normX = trrotm[0];\n\n    normY = trrotm[1];\n\n    normZ = trrotm[2];\n\n    \n\n    const vec3 lit = vec3(0.6917144638660746, 0.6917144638660746, -0.20751433915982237);\n\n    \n\n    float tmpdfs = dot(lit, normal);\n\n    if(tmpdfs < 0.0) {\n\n        normal = -normal;\n\n        tmpdfs = dot(lit, normal);\n\n    }\n\n    diffuse = 0.4 + tmpdfs;\n\n    \n\n    vec3 eyev = normalize(-pos.xyz);\n\n    if(dot(eyev, normal) > 0.0) {\n\n        vec3 hv = normalize(eyev + lit);\n\n        specular = pow(max(dot(hv, normal), 0.0), 20.0);\n\n    }\n\n    else {\n\n        specular = 0.0;\n\n    }\n\n    \n\n    rstop = clamp((abs(pdist - uDOF.x) - uDOF.y) / uDOF.z, 0.0, 1.0);\n\n    rstop = pow(rstop, 0.5);\n\n    //-0.69315 = ln(0.5)\n\n    distancefade = min(1.0, exp((uFade.x - pdist) * 0.69315 / uFade.y));\n\n}\n\n</script>\n\n<script id=\"sakura_point_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\n\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\n\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\n\n\nconst vec3 fadeCol = vec3(0.08, 0.03, 0.06);\n\n\n\nvarying vec3 pposition;\n\nvarying float psize;\n\nvarying float palpha;\n\nvarying float pdist;\n\n\n\n//varying mat3 rotMat;\n\nvarying vec3 normX;\n\nvarying vec3 normY;\n\nvarying vec3 normZ;\n\nvarying vec3 normal;\n\n\n\nvarying float diffuse;\n\nvarying float specular;\n\nvarying float rstop;\n\nvarying float distancefade;\n\n\n\nfloat ellipse(vec2 p, vec2 o, vec2 r) {\n\n    vec2 lp = (p - o) / r;\n\n    return length(lp) - 1.0;\n\n}\n\n\n\nvoid main(void) {\n\n    vec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0;\n\n    vec3 d = vec3(0.0, 0.0, -1.0);\n\n    float nd = normZ.z; //dot(-normZ, d);\n\n    if(abs(nd) < 0.0001) discard;\n\n    \n\n    float np = dot(normZ, p);\n\n    vec3 tp = p + d * np / nd;\n\n    vec2 coord = vec2(dot(normX, tp), dot(normY, tp));\n\n    \n\n    //angle = 15 degree\n\n    const float flwrsn = 0.258819045102521;\n\n    const float flwrcs = 0.965925826289068;\n\n    mat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs);\n\n    vec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm;\n\n    \n\n    float r;\n\n    if(flwrp.x < 0.0) {\n\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5);\n\n    }\n\n    else {\n\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5);\n\n    }\n\n    \n\n    if(r > rstop) discard;\n\n    \n\n    vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r);\n\n    float grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35));\n\n    col *= vec3(1.0, grady, grady);\n\n    col *= mix(0.8, 1.0, pow(abs(coord.x), 0.3));\n\n    col = col * diffuse + specular;\n\n    \n\n    col = mix(fadeCol, col, distancefade);\n\n    \n\n    float alpha = (rstop > 0.001)? (0.5 - r / (rstop * 2.0)) : 1.0;\n\n    alpha = smoothstep(0.0, 1.0, alpha) * palpha;\n\n    \n\n    gl_FragColor = vec4(col * 0.5, alpha);\n\n}\n\n</script>\n\n<!-- effects -->\n\n<script id=\"fx_common_vsh\" type=\"x-shader/x_vertex\">\n\nuniform vec3 uResolution;\n\nattribute vec2 aPosition;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n\n}\n\n</script>\n\n<script id=\"bg_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\n\n\nuniform vec2 uTimes;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec3 col;\n\n    float c;\n\n    vec2 tmpv = texCoord * vec2(0.8, 1.0) - vec2(0.95, 1.0);\n\n    c = exp(-pow(length(tmpv) * 1.8, 2.0));\n\n    col = mix(vec3(0.02, 0.0, 0.03), vec3(0.96, 0.98, 1.0) * 1.5, c);\n\n    gl_FragColor = vec4(col * 0.5, 1.0);\n\n}\n\n</script>\n\n<script id=\"fx_brightbuf_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec4 col = texture2D(uSrc, texCoord);\n\n    gl_FragColor = vec4(col.rgb * 2.0 - vec3(0.5), 1.0);\n\n}\n\n</script>\n\n<script id=\"fx_dirblur_r4_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\nuniform vec4 uBlurDir; //dir(x, y), stride(z, w)\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec4 col = texture2D(uSrc, texCoord);\n\n    col = col + texture2D(uSrc, texCoord + uBlurDir.xy * uDelta);\n\n    col = col + texture2D(uSrc, texCoord - uBlurDir.xy * uDelta);\n\n    col = col + texture2D(uSrc, texCoord + (uBlurDir.xy + uBlurDir.zw) * uDelta);\n\n    col = col + texture2D(uSrc, texCoord - (uBlurDir.xy + uBlurDir.zw) * uDelta);\n\n    gl_FragColor = col / 5.0;\n\n}\n\n</script>\n\n<!-- effect fragment shader template -->\n\n<script id=\"fx_common_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    gl_FragColor = texture2D(uSrc, texCoord);\n\n}\n\n</script>\n\n<!-- post processing -->\n\n<script id=\"pp_final_vsh\" type=\"x-shader/x_vertex\">\n\nuniform vec3 uResolution;\n\nattribute vec2 aPosition;\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\nvoid main(void) {\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n\n}\n\n</script>\n\n<script id=\"pp_final_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform sampler2D uBloom;\n\nuniform vec2 uDelta;\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\nvoid main(void) {\n\n    vec4 srccol = texture2D(uSrc, texCoord) * 2.0;\n\n    vec4 bloomcol = texture2D(uBloom, texCoord);\n\n    vec4 col;\n\n    col = srccol + bloomcol * (vec4(1.0) + srccol);\n\n    col *= smoothstep(1.0, 0.0, pow(length((texCoord - vec2(0.5)) * 2.0), 1.2) * 0.5);\n\n    col = pow(col, vec4(0.45454545454545)); //(1.0 / 2.2)\n\n    \n\n    gl_FragColor = vec4(col.rgb, 1.0);\n\n    gl_FragColor.a = 1.0;\n\n}\n\n</script>\n\n</body>\n\n<script>\n\n// Utilities\n\nvar Vector3 = {};\n\nvar Matrix44 = {};\n\nVector3.create = function(x, y, z) {\n\n    return {'x':x, 'y':y, 'z':z};\n\n};\n\nVector3.dot = function (v0, v1) {\n\n    return v0.x * v1.x + v0.y * v1.y + v0.z * v1.z;\n\n};\n\nVector3.cross = function (v, v0, v1) {\n\n    v.x = v0.y * v1.z - v0.z * v1.y;\n\n    v.y = v0.z * v1.x - v0.x * v1.z;\n\n    v.z = v0.x * v1.y - v0.y * v1.x;\n\n};\n\nVector3.normalize = function (v) {\n\n    var l = v.x * v.x + v.y * v.y + v.z * v.z;\n\n    if(l > 0.00001) {\n\n        l = 1.0 / Math.sqrt(l);\n\n        v.x *= l;\n\n        v.y *= l;\n\n        v.z *= l;\n\n    }\n\n};\n\nVector3.arrayForm = function(v) {\n\n    if(v.array) {\n\n        v.array[0] = v.x;\n\n        v.array[1] = v.y;\n\n        v.array[2] = v.z;\n\n    }\n\n    else {\n\n        v.array = new Float32Array([v.x, v.y, v.z]);\n\n    }\n\n    return v.array;\n\n};\n\nMatrix44.createIdentity = function () {\n\n    return new Float32Array([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]);\n\n};\n\nMatrix44.loadProjection = function (m, aspect, vdeg, near, far) {\n\n    var h = near * Math.tan(vdeg * Math.PI / 180.0 * 0.5) * 2.0;\n\n    var w = h * aspect;\n\n    \n\n    m[0] = 2.0 * near / w;\n\n    m[1] = 0.0;\n\n    m[2] = 0.0;\n\n    m[3] = 0.0;\n\n    \n\n    m[4] = 0.0;\n\n    m[5] = 2.0 * near / h;\n\n    m[6] = 0.0;\n\n    m[7] = 0.0;\n\n    \n\n    m[8] = 0.0;\n\n    m[9] = 0.0;\n\n    m[10] = -(far + near) / (far - near);\n\n    m[11] = -1.0;\n\n    \n\n    m[12] = 0.0;\n\n    m[13] = 0.0;\n\n    m[14] = -2.0 * far * near / (far - near);\n\n    m[15] = 0.0;\n\n};\n\nMatrix44.loadLookAt = function (m, vpos, vlook, vup) {\n\n    var frontv = Vector3.create(vpos.x - vlook.x, vpos.y - vlook.y, vpos.z - vlook.z);\n\n    Vector3.normalize(frontv);\n\n    var sidev = Vector3.create(1.0, 0.0, 0.0);\n\n    Vector3.cross(sidev, vup, frontv);\n\n    Vector3.normalize(sidev);\n\n    var topv = Vector3.create(1.0, 0.0, 0.0);\n\n    Vector3.cross(topv, frontv, sidev);\n\n    Vector3.normalize(topv);\n\n    \n\n    m[0] = sidev.x;\n\n    m[1] = topv.x;\n\n    m[2] = frontv.x;\n\n    m[3] = 0.0;\n\n    \n\n    m[4] = sidev.y;\n\n    m[5] = topv.y;\n\n    m[6] = frontv.y;\n\n    m[7] = 0.0;\n\n    \n\n    m[8] = sidev.z;\n\n    m[9] = topv.z;\n\n    m[10] = frontv.z;\n\n    m[11] = 0.0;\n\n    \n\n    m[12] = -(vpos.x * m[0] + vpos.y * m[4] + vpos.z * m[8]);\n\n    m[13] = -(vpos.x * m[1] + vpos.y * m[5] + vpos.z * m[9]);\n\n    m[14] = -(vpos.x * m[2] + vpos.y * m[6] + vpos.z * m[10]);\n\n    m[15] = 1.0;\n\n};\n\n\n\n//\n\nvar timeInfo = {\n\n    'start':0, 'prev':0, // Date\n\n    'delta':0, 'elapsed':0 // Number(sec)\n\n};\n\n\n\n//\n\nvar gl;\n\nvar renderSpec = {\n\n    'width':0,\n\n    'height':0,\n\n    'aspect':1,\n\n    'array':new Float32Array(3),\n\n    'halfWidth':0,\n\n    'halfHeight':0,\n\n    'halfArray':new Float32Array(3)\n\n    // and some render targets. see setViewport()\n\n};\n\nrenderSpec.setSize = function(w, h) {\n\n    renderSpec.width = w;\n\n    renderSpec.height = h;\n\n    renderSpec.aspect = renderSpec.width / renderSpec.height;\n\n    renderSpec.array[0] = renderSpec.width;\n\n    renderSpec.array[1] = renderSpec.height;\n\n    renderSpec.array[2] = renderSpec.aspect;\n\n    \n\n    renderSpec.halfWidth = Math.floor(w / 2);\n\n    renderSpec.halfHeight = Math.floor(h / 2);\n\n    renderSpec.halfArray[0] = renderSpec.halfWidth;\n\n    renderSpec.halfArray[1] = renderSpec.halfHeight;\n\n    renderSpec.halfArray[2] = renderSpec.halfWidth / renderSpec.halfHeight;\n\n};\n\n\n\nfunction deleteRenderTarget(rt) {\n\n    gl.deleteFramebuffer(rt.frameBuffer);\n\n    gl.deleteRenderbuffer(rt.renderBuffer);\n\n    gl.deleteTexture(rt.texture);\n\n}\n\n\n\nfunction createRenderTarget(w, h) {\n\n    var ret = {\n\n        'width':w,\n\n        'height':h,\n\n        'sizeArray':new Float32Array([w, h, w / h]),\n\n        'dtxArray':new Float32Array([1.0 / w, 1.0 / h])\n\n    };\n\n    ret.frameBuffer = gl.createFramebuffer();\n\n    ret.renderBuffer = gl.createRenderbuffer();\n\n    ret.texture = gl.createTexture();\n\n    \n\n    gl.bindTexture(gl.TEXTURE_2D, ret.texture);\n\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, w, h, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\n    \n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, ret.frameBuffer);\n\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, ret.texture, 0);\n\n    \n\n    gl.bindRenderbuffer(gl.RENDERBUFFER, ret.renderBuffer);\n\n    gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, w, h);\n\n    gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, ret.renderBuffer);\n\n    \n\n    gl.bindTexture(gl.TEXTURE_2D, null);\n\n    gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    \n\n    return ret;\n\n}\n\n\n\nfunction compileShader(shtype, shsrc) {\n\n\tvar retsh = gl.createShader(shtype);\n\n\t\n\n\tgl.shaderSource(retsh, shsrc);\n\n\tgl.compileShader(retsh);\n\n\t\n\n\tif(!gl.getShaderParameter(retsh, gl.COMPILE_STATUS)) {\n\n\t\tvar errlog = gl.getShaderInfoLog(retsh);\n\n\t\tgl.deleteShader(retsh);\n\n\t\tconsole.error(errlog);\n\n\t\treturn null;\n\n\t}\n\n\treturn retsh;\n\n}\n\n\n\nfunction createShader(vtxsrc, frgsrc, uniformlist, attrlist) {\n\n    var vsh = compileShader(gl.VERTEX_SHADER, vtxsrc);\n\n    var fsh = compileShader(gl.FRAGMENT_SHADER, frgsrc);\n\n    \n\n    if(vsh == null || fsh == null) {\n\n        return null;\n\n    }\n\n    \n\n    var prog = gl.createProgram();\n\n    gl.attachShader(prog, vsh);\n\n    gl.attachShader(prog, fsh);\n\n    \n\n    gl.deleteShader(vsh);\n\n    gl.deleteShader(fsh);\n\n    \n\n    gl.linkProgram(prog);\n\n    if (!gl.getProgramParameter(prog, gl.LINK_STATUS)) {\n\n        var errlog = gl.getProgramInfoLog(prog);\n\n        console.error(errlog);\n\n        return null;\n\n    }\n\n    \n\n    if(uniformlist) {\n\n        prog.uniforms = {};\n\n        for(var i = 0; i < uniformlist.length; i++) {\n\n            prog.uniforms[uniformlist[i]] = gl.getUniformLocation(prog, uniformlist[i]);\n\n        }\n\n    }\n\n    \n\n    if(attrlist) {\n\n        prog.attributes = {};\n\n        for(var i = 0; i < attrlist.length; i++) {\n\n            var attr = attrlist[i];\n\n            prog.attributes[attr] = gl.getAttribLocation(prog, attr);\n\n        }\n\n    }\n\n    \n\n    return prog;\n\n}\n\n\n\nfunction useShader(prog) {\n\n    gl.useProgram(prog);\n\n    for(var attr in prog.attributes) {\n\n        gl.enableVertexAttribArray(prog.attributes[attr]);;\n\n    }\n\n}\n\n\n\nfunction unuseShader(prog) {\n\n    for(var attr in prog.attributes) {\n\n        gl.disableVertexAttribArray(prog.attributes[attr]);;\n\n    }\n\n    gl.useProgram(null);\n\n}\n\n\n\n/////\n\nvar projection = {\n\n    'angle':60,\n\n    'nearfar':new Float32Array([0.1, 100.0]),\n\n    'matrix':Matrix44.createIdentity()\n\n};\n\nvar camera = {\n\n    'position':Vector3.create(0, 0, 100),\n\n    'lookat':Vector3.create(0, 0, 0),\n\n    'up':Vector3.create(0, 1, 0),\n\n    'dof':Vector3.create(10.0, 4.0, 8.0),\n\n    'matrix':Matrix44.createIdentity()\n\n};\n\n\n\nvar pointFlower = {};\n\nvar meshFlower = {};\n\nvar sceneStandBy = false;\n\n\n\nvar BlossomParticle = function () {\n\n    this.velocity = new Array(3);\n\n    this.rotation = new Array(3);\n\n    this.position = new Array(3);\n\n    this.euler = new Array(3);\n\n    this.size = 1.0;\n\n    this.alpha = 1.0;\n\n    this.zkey = 0.0;\n\n};\n\n\n\nBlossomParticle.prototype.setVelocity = function (vx, vy, vz) {\n\n    this.velocity[0] = vx;\n\n    this.velocity[1] = vy;\n\n    this.velocity[2] = vz;\n\n};\n\n\n\nBlossomParticle.prototype.setRotation = function (rx, ry, rz) {\n\n    this.rotation[0] = rx;\n\n    this.rotation[1] = ry;\n\n    this.rotation[2] = rz;\n\n};\n\n\n\nBlossomParticle.prototype.setPosition = function (nx, ny, nz) {\n\n    this.position[0] = nx;\n\n    this.position[1] = ny;\n\n    this.position[2] = nz;\n\n};\n\n\n\nBlossomParticle.prototype.setEulerAngles = function (rx, ry, rz) {\n\n    this.euler[0] = rx;\n\n    this.euler[1] = ry;\n\n    this.euler[2] = rz;\n\n};\n\n\n\nBlossomParticle.prototype.setSize = function (s) {\n\n    this.size = s;\n\n};\n\n\n\nBlossomParticle.prototype.update = function (dt, et) {\n\n    this.position[0] += this.velocity[0] * dt;\n\n    this.position[1] += this.velocity[1] * dt;\n\n    this.position[2] += this.velocity[2] * dt;\n\n    \n\n    this.euler[0] += this.rotation[0] * dt;\n\n    this.euler[1] += this.rotation[1] * dt;\n\n    this.euler[2] += this.rotation[2] * dt;\n\n};\n\n\n\nfunction createPointFlowers() {\n\n    // get point sizes\n\n    var prm = gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);\n\n    renderSpec.pointSize = {'min':prm[0], 'max':prm[1]};\n\n    \n\n    var vtxsrc = document.getElementById(\"sakura_point_vsh\").textContent;\n\n    var frgsrc = document.getElementById(\"sakura_point_fsh\").textContent;\n\n    \n\n    pointFlower.program = createShader(\n\n        vtxsrc, frgsrc,\n\n        ['uProjection', 'uModelview', 'uResolution', 'uOffset', 'uDOF', 'uFade'],\n\n        ['aPosition', 'aEuler', 'aMisc']\n\n    );\n\n    \n\n    useShader(pointFlower.program);\n\n    pointFlower.offset = new Float32Array([0.0, 0.0, 0.0]);\n\n    pointFlower.fader = Vector3.create(0.0, 10.0, 0.0);\n\n    \n\n    // paramerters: velocity[3], rotate[3]\n\n    pointFlower.numFlowers = 1600;\n\n    pointFlower.particles = new Array(pointFlower.numFlowers);\n\n    // vertex attributes {position[3], euler_xyz[3], size[1]}\n\n    pointFlower.dataArray = new Float32Array(pointFlower.numFlowers * (3 + 3 + 2));\n\n    pointFlower.positionArrayOffset = 0;\n\n    pointFlower.eulerArrayOffset = pointFlower.numFlowers * 3;\n\n    pointFlower.miscArrayOffset = pointFlower.numFlowers * 6;\n\n    \n\n    pointFlower.buffer = gl.createBuffer();\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    \n\n    unuseShader(pointFlower.program);\n\n    \n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        pointFlower.particles[i] = new BlossomParticle();\n\n    }\n\n}\n\n\n\nfunction initPointFlowers() {\n\n    //area\n\n    pointFlower.area = Vector3.create(20.0, 20.0, 20.0);\n\n    pointFlower.area.x = pointFlower.area.y * renderSpec.aspect;\n\n    \n\n    pointFlower.fader.x = 10.0; //env fade start\n\n    pointFlower.fader.y = pointFlower.area.z; //env fade half\n\n    pointFlower.fader.z = 0.1;  //near fade start\n\n    \n\n    //particles\n\n    var PI2 = Math.PI * 2.0;\n\n    var tmpv3 = Vector3.create(0, 0, 0);\n\n    var tmpv = 0;\n\n    var symmetryrand = function() {return (Math.random() * 2.0 - 1.0);};\n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var tmpprtcl = pointFlower.particles[i];\n\n        \n\n        //velocity\n\n        tmpv3.x = symmetryrand() * 0.3 + 0.8;\n\n        tmpv3.y = symmetryrand() * 0.2 - 1.0;\n\n        tmpv3.z = symmetryrand() * 0.3 + 0.5;\n\n        Vector3.normalize(tmpv3);\n\n        tmpv = 2.0 + Math.random() * 1.0;\n\n        tmpprtcl.setVelocity(tmpv3.x * tmpv, tmpv3.y * tmpv, tmpv3.z * tmpv);\n\n        \n\n        //rotation\n\n        tmpprtcl.setRotation(\n\n            symmetryrand() * PI2 * 0.5,\n\n            symmetryrand() * PI2 * 0.5,\n\n            symmetryrand() * PI2 * 0.5\n\n        );\n\n        \n\n        //position\n\n        tmpprtcl.setPosition(\n\n            symmetryrand() * pointFlower.area.x,\n\n            symmetryrand() * pointFlower.area.y,\n\n            symmetryrand() * pointFlower.area.z\n\n        );\n\n        \n\n        //euler\n\n        tmpprtcl.setEulerAngles(\n\n            Math.random() * Math.PI * 2.0,\n\n            Math.random() * Math.PI * 2.0,\n\n            Math.random() * Math.PI * 2.0\n\n        );\n\n        \n\n        //size\n\n        tmpprtcl.setSize(0.9 + Math.random() * 0.1);\n\n    }\n\n}\n\n\n\nfunction renderPointFlowers() {\n\n    //update\n\n    var PI2 = Math.PI * 2.0;\n\n    var limit = [pointFlower.area.x, pointFlower.area.y, pointFlower.area.z];\n\n    var repeatPos = function (prt, cmp, limit) {\n\n        if(Math.abs(prt.position[cmp]) - prt.size * 0.5 > limit) {\n\n            //out of area\n\n            if(prt.position[cmp] > 0) {\n\n                prt.position[cmp] -= limit * 2.0;\n\n            }\n\n            else {\n\n                prt.position[cmp] += limit * 2.0;\n\n            }\n\n        }\n\n    };\n\n    var repeatEuler = function (prt, cmp) {\n\n        prt.euler[cmp] = prt.euler[cmp] % PI2;\n\n        if(prt.euler[cmp] < 0.0) {\n\n            prt.euler[cmp] += PI2;\n\n        }\n\n    };\n\n    \n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var prtcl = pointFlower.particles[i];\n\n        prtcl.update(timeInfo.delta, timeInfo.elapsed);\n\n        repeatPos(prtcl, 0, pointFlower.area.x);\n\n        repeatPos(prtcl, 1, pointFlower.area.y);\n\n        repeatPos(prtcl, 2, pointFlower.area.z);\n\n        repeatEuler(prtcl, 0);\n\n        repeatEuler(prtcl, 1);\n\n        repeatEuler(prtcl, 2);\n\n        \n\n        prtcl.alpha = 1.0;//(pointFlower.area.z - prtcl.position[2]) * 0.5;\n\n        \n\n        prtcl.zkey = (camera.matrix[2] * prtcl.position[0]\n\n                    + camera.matrix[6] * prtcl.position[1]\n\n                    + camera.matrix[10] * prtcl.position[2]\n\n                    + camera.matrix[14]);\n\n    }\n\n    \n\n    // sort\n\n    pointFlower.particles.sort(function(p0, p1){return p0.zkey - p1.zkey;});\n\n    \n\n    // update data\n\n    var ipos = pointFlower.positionArrayOffset;\n\n    var ieuler = pointFlower.eulerArrayOffset;\n\n    var imisc = pointFlower.miscArrayOffset;\n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var prtcl = pointFlower.particles[i];\n\n        pointFlower.dataArray[ipos] = prtcl.position[0];\n\n        pointFlower.dataArray[ipos + 1] = prtcl.position[1];\n\n        pointFlower.dataArray[ipos + 2] = prtcl.position[2];\n\n        ipos += 3;\n\n        pointFlower.dataArray[ieuler] = prtcl.euler[0];\n\n        pointFlower.dataArray[ieuler + 1] = prtcl.euler[1];\n\n        pointFlower.dataArray[ieuler + 2] = prtcl.euler[2];\n\n        ieuler += 3;\n\n        pointFlower.dataArray[imisc] = prtcl.size;\n\n        pointFlower.dataArray[imisc + 1] = prtcl.alpha;\n\n        imisc += 2;\n\n    }\n\n    \n\n    //draw\n\n    gl.enable(gl.BLEND);\n\n    //gl.disable(gl.DEPTH_TEST);\n\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n    \n\n    var prog = pointFlower.program;\n\n    useShader(prog);\n\n    \n\n    gl.uniformMatrix4fv(prog.uniforms.uProjection, false, projection.matrix);\n\n    gl.uniformMatrix4fv(prog.uniforms.uModelview, false, camera.matrix);\n\n    gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);\n\n    gl.uniform3fv(prog.uniforms.uDOF, Vector3.arrayForm(camera.dof));\n\n    gl.uniform3fv(prog.uniforms.uFade, Vector3.arrayForm(pointFlower.fader));\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);\n\n    \n\n    gl.vertexAttribPointer(prog.attributes.aPosition, 3, gl.FLOAT, false, 0, pointFlower.positionArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    gl.vertexAttribPointer(prog.attributes.aEuler, 3, gl.FLOAT, false, 0, pointFlower.eulerArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    gl.vertexAttribPointer(prog.attributes.aMisc, 2, gl.FLOAT, false, 0, pointFlower.miscArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    \n\n    // doubler\n\n    for(var i = 1; i < 2; i++) {\n\n        var zpos = i * -2.0;\n\n        pointFlower.offset[0] = pointFlower.area.x * -1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y * -1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x * -1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y *  1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x *  1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y * -1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x *  1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y *  1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n    }\n\n    \n\n    //main\n\n    pointFlower.offset[0] = 0.0;\n\n    pointFlower.offset[1] = 0.0;\n\n    pointFlower.offset[2] = 0.0;\n\n    gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n    gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    unuseShader(prog);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n    gl.disable(gl.BLEND);\n\n}\n\n\n\n// effects\n\n//common util\n\nfunction createEffectProgram(vtxsrc, frgsrc, exunifs, exattrs) {\n\n    var ret = {};\n\n    var unifs = ['uResolution', 'uSrc', 'uDelta'];\n\n    if(exunifs) {\n\n        unifs = unifs.concat(exunifs);\n\n    }\n\n    var attrs = ['aPosition'];\n\n    if(exattrs) {\n\n        attrs = attrs.concat(exattrs);\n\n    }\n\n    \n\n    ret.program = createShader(vtxsrc, frgsrc, unifs, attrs);\n\n    useShader(ret.program);\n\n    \n\n    ret.dataArray = new Float32Array([\n\n        -1.0, -1.0,\n\n         1.0, -1.0,\n\n        -1.0,  1.0,\n\n         1.0,  1.0\n\n    ]);\n\n    ret.buffer = gl.createBuffer();\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, ret.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, ret.dataArray, gl.STATIC_DRAW);\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    unuseShader(ret.program);\n\n    \n\n    return ret;\n\n}\n\n\n\n// basic usage\n\n// useEffect(prog, srctex({'texture':texid, 'dtxArray':(f32)[dtx, dty]})); //basic initialize\n\n// gl.uniform**(...); //additional uniforms\n\n// drawEffect()\n\n// unuseEffect(prog)\n\n// TEXTURE0 makes src\n\nfunction useEffect(fxobj, srctex) {\n\n    var prog = fxobj.program;\n\n    useShader(prog);\n\n    gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);\n\n    \n\n    if(srctex != null) {\n\n        gl.uniform2fv(prog.uniforms.uDelta, srctex.dtxArray);\n\n        gl.uniform1i(prog.uniforms.uSrc, 0);\n\n        \n\n        gl.activeTexture(gl.TEXTURE0);\n\n        gl.bindTexture(gl.TEXTURE_2D, srctex.texture);\n\n    }\n\n}\n\nfunction drawEffect(fxobj) {\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, fxobj.buffer);\n\n    gl.vertexAttribPointer(fxobj.program.attributes.aPosition, 2, gl.FLOAT, false, 0, 0);\n\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n}\n\nfunction unuseEffect(fxobj) {\n\n    unuseShader(fxobj.program);\n\n}\n\n\n\nvar effectLib = {};\n\nfunction createEffectLib() {\n\n    \n\n    var vtxsrc, frgsrc;\n\n    //common\n\n    var cmnvtxsrc = document.getElementById(\"fx_common_vsh\").textContent;\n\n    \n\n    //background\n\n    frgsrc = document.getElementById(\"bg_fsh\").textContent;\n\n    effectLib.sceneBg = createEffectProgram(cmnvtxsrc, frgsrc, ['uTimes'], null);\n\n    \n\n    // make brightpixels buffer\n\n    frgsrc = document.getElementById(\"fx_brightbuf_fsh\").textContent;\n\n    effectLib.mkBrightBuf = createEffectProgram(cmnvtxsrc, frgsrc, null, null);\n\n    \n\n    // direction blur\n\n    frgsrc = document.getElementById(\"fx_dirblur_r4_fsh\").textContent;\n\n    effectLib.dirBlur = createEffectProgram(cmnvtxsrc, frgsrc, ['uBlurDir'], null);\n\n    \n\n    //final composite\n\n    vtxsrc = document.getElementById(\"pp_final_vsh\").textContent;\n\n    frgsrc = document.getElementById(\"pp_final_fsh\").textContent;\n\n    effectLib.finalComp = createEffectProgram(vtxsrc, frgsrc, ['uBloom'], null);\n\n}\n\n\n\n// background\n\nfunction createBackground() {\n\n    //console.log(\"create background\");\n\n}\n\nfunction initBackground() {\n\n    //console.log(\"init background\");\n\n}\n\nfunction renderBackground() {\n\n    gl.disable(gl.DEPTH_TEST);\n\n    \n\n    useEffect(effectLib.sceneBg, null);\n\n    gl.uniform2f(effectLib.sceneBg.program.uniforms.uTimes, timeInfo.elapsed, timeInfo.delta);\n\n    drawEffect(effectLib.sceneBg);\n\n    unuseEffect(effectLib.sceneBg);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n}\n\n\n\n// post process\n\nvar postProcess = {};\n\nfunction createPostProcess() {\n\n    //console.log(\"create post process\");\n\n}\n\nfunction initPostProcess() {\n\n    //console.log(\"init post process\");\n\n}\n\n\n\nfunction renderPostProcess() {\n\n    gl.enable(gl.TEXTURE_2D);\n\n    gl.disable(gl.DEPTH_TEST);\n\n    var bindRT = function (rt, isclear) {\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, rt.frameBuffer);\n\n        gl.viewport(0, 0, rt.width, rt.height);\n\n        if(isclear) {\n\n            gl.clearColor(0, 0, 0, 0);\n\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n        }\n\n    };\n\n    \n\n    //make bright buff\n\n    bindRT(renderSpec.wHalfRT0, true);\n\n    useEffect(effectLib.mkBrightBuf, renderSpec.mainRT);\n\n    drawEffect(effectLib.mkBrightBuf);\n\n    unuseEffect(effectLib.mkBrightBuf);\n\n    \n\n    // make bloom\n\n    for(var i = 0; i < 2; i++) {\n\n        var p = 1.5 + 1 * i;\n\n        var s = 2.0 + 1 * i;\n\n        bindRT(renderSpec.wHalfRT1, true);\n\n        useEffect(effectLib.dirBlur, renderSpec.wHalfRT0);\n\n        gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir, p, 0.0, s, 0.0);\n\n        drawEffect(effectLib.dirBlur);\n\n        unuseEffect(effectLib.dirBlur);\n\n        \n\n        bindRT(renderSpec.wHalfRT0, true);\n\n        useEffect(effectLib.dirBlur, renderSpec.wHalfRT1);\n\n        gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir, 0.0, p, 0.0, s);\n\n        drawEffect(effectLib.dirBlur);\n\n        unuseEffect(effectLib.dirBlur);\n\n    }\n\n    \n\n    //display\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    gl.viewport(0, 0, renderSpec.width, renderSpec.height);\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    \n\n    useEffect(effectLib.finalComp, renderSpec.mainRT);\n\n    gl.uniform1i(effectLib.finalComp.program.uniforms.uBloom, 1);\n\n    gl.activeTexture(gl.TEXTURE1);\n\n    gl.bindTexture(gl.TEXTURE_2D, renderSpec.wHalfRT0.texture);\n\n    drawEffect(effectLib.finalComp);\n\n    unuseEffect(effectLib.finalComp);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n}\n\n\n\n/////\n\nvar SceneEnv = {};\n\nfunction createScene() {\n\n    createEffectLib();\n\n    createBackground();\n\n    createPointFlowers();\n\n    createPostProcess();\n\n    sceneStandBy = true;\n\n}\n\n\n\nfunction initScene() {\n\n    initBackground();\n\n    initPointFlowers();\n\n    initPostProcess();\n\n    \n\n    //camera.position.z = 17.320508;\n\n    camera.position.z = pointFlower.area.z + projection.nearfar[0];\n\n    projection.angle = Math.atan2(pointFlower.area.y, camera.position.z + pointFlower.area.z) * 180.0 / Math.PI * 2.0;\n\n    Matrix44.loadProjection(projection.matrix, renderSpec.aspect, projection.angle, projection.nearfar[0], projection.nearfar[1]);\n\n}\n\n\n\nfunction renderScene() {\n\n    //draw\n\n    Matrix44.loadLookAt(camera.matrix, camera.position, camera.lookat, camera.up);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n    \n\n    //gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, renderSpec.mainRT.frameBuffer);\n\n    gl.viewport(0, 0, renderSpec.mainRT.width, renderSpec.mainRT.height);\n\n    gl.clearColor(0.005, 0, 0.05, 0);\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    \n\n    renderBackground();\n\n    renderPointFlowers();\n\n    renderPostProcess();\n\n}\n\n\n\n/////\n\nfunction onResize(e) {\n\n    makeCanvasFullScreen(document.getElementById(\"sakura\"));\n\n    setViewports();\n\n    if(sceneStandBy) {\n\n        initScene();\n\n    }\n\n}\n\n\n\nfunction setViewports() {\n\n    renderSpec.setSize(gl.canvas.width, gl.canvas.height);\n\n    \n\n    gl.clearColor(0.2, 0.2, 0.5, 1.0);\n\n    gl.viewport(0, 0, renderSpec.width, renderSpec.height);\n\n    \n\n    var rtfunc = function (rtname, rtw, rth) {\n\n        var rt = renderSpec[rtname];\n\n        if(rt) deleteRenderTarget(rt);\n\n        renderSpec[rtname] = createRenderTarget(rtw, rth);\n\n    };\n\n    rtfunc('mainRT', renderSpec.width, renderSpec.height);\n\n    rtfunc('wFullRT0', renderSpec.width, renderSpec.height);\n\n    rtfunc('wFullRT1', renderSpec.width, renderSpec.height);\n\n    rtfunc('wHalfRT0', renderSpec.halfWidth, renderSpec.halfHeight);\n\n    rtfunc('wHalfRT1', renderSpec.halfWidth, renderSpec.halfHeight);\n\n}\n\n\n\nfunction render() {\n\n    renderScene();\n\n}\n\n\n\nvar animating = true;\n\nfunction toggleAnimation(elm) {\n\n    animating ^= true;\n\n    if(animating) animate();\n\n    if(elm) {\n\n        elm.innerHTML = animating? \"Stop\":\"Start\";\n\n    }\n\n}\n\n\n\nfunction stepAnimation() {\n\n    if(!animating) animate();\n\n}\n\n\n\nfunction animate() {\n\n    var curdate = new Date();\n\n    timeInfo.elapsed = (curdate - timeInfo.start) / 1000.0;\n\n    timeInfo.delta = (curdate - timeInfo.prev) / 1000.0;\n\n    timeInfo.prev = curdate;\n\n    \n\n    if(animating) requestAnimationFrame(animate);\n\n    render();\n\n}\n\n\n\nfunction makeCanvasFullScreen(canvas) {\n\n    var b = document.body;\n\n\tvar d = document.documentElement;\n\n\tfullw = Math.max(b.clientWidth , b.scrollWidth, d.scrollWidth, d.clientWidth);\n\n\tfullh = Math.max(b.clientHeight , b.scrollHeight, d.scrollHeight, d.clientHeight);\n\n\tcanvas.width = fullw;\n\n\tcanvas.height = fullh;\n\n}\n\n\n\nwindow.addEventListener('load', function(e) {\n\n    var canvas = document.getElementById(\"sakura\");\n\n    try {\n\n        makeCanvasFullScreen(canvas);\n\n        gl = canvas.getContext('experimental-webgl');\n\n    } catch(e) {\n\n        alert(\"WebGL not supported.\" + e);\n\n        console.error(e);\n\n        return;\n\n    }\n\n    \n\n    window.addEventListener('resize', onResize);\n\n    \n\n    setViewports();\n\n    createScene();\n\n    initScene();\n\n    \n\n    timeInfo.start = new Date();\n\n    timeInfo.prev = timeInfo.start;\n\n    animate();\n\n});\n\n\n\n//set window.requestAnimationFrame\n\n(function (w, r) {\n\n    w['r'+r] = w['r'+r] || w['webkitR'+r] || w['mozR'+r] || w['msR'+r] || w['oR'+r] || function(c){ w.setTimeout(c, 1000 / 60); };\n\n})(window, 'equestAnimationFrame');\n\n</script>\n\n</html>\n\n","date":"2021-04-30T21:54:48.439Z","updated":"2017-04-16T10:24:23.000Z","path":"assets/webpage/index.html","title":"","comments":1,"layout":"page","_id":"cko4wk0yh000e0vxaclrrf4cj","content":"<!doctype html>\n\n<html>\n\n<head>\n\n<meta charset=\"utf-8\">\n\n<title>无标题文档</title>\n</head>\n\n<style>\n\nbody {\n\n    padding:0;\n\n    margin:0;\n\n    overflow:hidden;\n\n\theight: 600px;\n\n}\n\ncanvas {\n\n    padding:0;\n\n    margin:0;\n\n}\n\ndiv.btnbg {\n\n    position:fixed;\n\n    left:0;\n\n    top:0;\n\n}\n\n</style>\n\n<body>\n<canvas id=\"sakura\"></canvas>\n\n<div class=\"btnbg\">\n\n</div>\n\n\n\n<!-- sakura shader -->\n\n<script id=\"sakura_point_vsh\" type=\"x-shader/x_vertex\">\n\nuniform mat4 uProjection;\n\nuniform mat4 uModelview;\n\nuniform vec3 uResolution;\n\nuniform vec3 uOffset;\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\n\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\n\n\nattribute vec3 aPosition;\n\nattribute vec3 aEuler;\n\nattribute vec2 aMisc; //x:size, y:fade\n\n\n\nvarying vec3 pposition;\n\nvarying float psize;\n\nvarying float palpha;\n\nvarying float pdist;\n\n\n\n//varying mat3 rotMat;\n\nvarying vec3 normX;\n\nvarying vec3 normY;\n\nvarying vec3 normZ;\n\nvarying vec3 normal;\n\n\n\nvarying float diffuse;\n\nvarying float specular;\n\nvarying float rstop;\n\nvarying float distancefade;\n\n\n\nvoid main(void) {\n\n    // Projection is based on vertical angle\n\n    vec4 pos = uModelview * vec4(aPosition + uOffset, 1.0);\n\n    gl_Position = uProjection * pos;\n\n    gl_PointSize = aMisc.x * uProjection[1][1] / -pos.z * uResolution.y * 0.5;\n\n    \n\n    pposition = pos.xyz;\n\n    psize = aMisc.x;\n\n    pdist = length(pos.xyz);\n\n    palpha = smoothstep(0.0, 1.0, (pdist - 0.1) / uFade.z);\n\n    \n\n    vec3 elrsn = sin(aEuler);\n\n    vec3 elrcs = cos(aEuler);\n\n    mat3 rotx = mat3(\n\n        1.0, 0.0, 0.0,\n\n        0.0, elrcs.x, elrsn.x,\n\n        0.0, -elrsn.x, elrcs.x\n\n    );\n\n    mat3 roty = mat3(\n\n        elrcs.y, 0.0, -elrsn.y,\n\n        0.0, 1.0, 0.0,\n\n        elrsn.y, 0.0, elrcs.y\n\n    );\n\n    mat3 rotz = mat3(\n\n        elrcs.z, elrsn.z, 0.0, \n\n        -elrsn.z, elrcs.z, 0.0,\n\n        0.0, 0.0, 1.0\n\n    );\n\n    mat3 rotmat = rotx * roty * rotz;\n\n    normal = rotmat[2];\n\n    \n\n    mat3 trrotm = mat3(\n\n        rotmat[0][0], rotmat[1][0], rotmat[2][0],\n\n        rotmat[0][1], rotmat[1][1], rotmat[2][1],\n\n        rotmat[0][2], rotmat[1][2], rotmat[2][2]\n\n    );\n\n    normX = trrotm[0];\n\n    normY = trrotm[1];\n\n    normZ = trrotm[2];\n\n    \n\n    const vec3 lit = vec3(0.6917144638660746, 0.6917144638660746, -0.20751433915982237);\n\n    \n\n    float tmpdfs = dot(lit, normal);\n\n    if(tmpdfs < 0.0) {\n\n        normal = -normal;\n\n        tmpdfs = dot(lit, normal);\n\n    }\n\n    diffuse = 0.4 + tmpdfs;\n\n    \n\n    vec3 eyev = normalize(-pos.xyz);\n\n    if(dot(eyev, normal) > 0.0) {\n\n        vec3 hv = normalize(eyev + lit);\n\n        specular = pow(max(dot(hv, normal), 0.0), 20.0);\n\n    }\n\n    else {\n\n        specular = 0.0;\n\n    }\n\n    \n\n    rstop = clamp((abs(pdist - uDOF.x) - uDOF.y) / uDOF.z, 0.0, 1.0);\n\n    rstop = pow(rstop, 0.5);\n\n    //-0.69315 = ln(0.5)\n\n    distancefade = min(1.0, exp((uFade.x - pdist) * 0.69315 / uFade.y));\n\n}\n\n</script>\n\n<script id=\"sakura_point_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\n\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\n\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\n\n\nconst vec3 fadeCol = vec3(0.08, 0.03, 0.06);\n\n\n\nvarying vec3 pposition;\n\nvarying float psize;\n\nvarying float palpha;\n\nvarying float pdist;\n\n\n\n//varying mat3 rotMat;\n\nvarying vec3 normX;\n\nvarying vec3 normY;\n\nvarying vec3 normZ;\n\nvarying vec3 normal;\n\n\n\nvarying float diffuse;\n\nvarying float specular;\n\nvarying float rstop;\n\nvarying float distancefade;\n\n\n\nfloat ellipse(vec2 p, vec2 o, vec2 r) {\n\n    vec2 lp = (p - o) / r;\n\n    return length(lp) - 1.0;\n\n}\n\n\n\nvoid main(void) {\n\n    vec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0;\n\n    vec3 d = vec3(0.0, 0.0, -1.0);\n\n    float nd = normZ.z; //dot(-normZ, d);\n\n    if(abs(nd) < 0.0001) discard;\n\n    \n\n    float np = dot(normZ, p);\n\n    vec3 tp = p + d * np / nd;\n\n    vec2 coord = vec2(dot(normX, tp), dot(normY, tp));\n\n    \n\n    //angle = 15 degree\n\n    const float flwrsn = 0.258819045102521;\n\n    const float flwrcs = 0.965925826289068;\n\n    mat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs);\n\n    vec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm;\n\n    \n\n    float r;\n\n    if(flwrp.x < 0.0) {\n\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5);\n\n    }\n\n    else {\n\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5);\n\n    }\n\n    \n\n    if(r > rstop) discard;\n\n    \n\n    vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r);\n\n    float grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35));\n\n    col *= vec3(1.0, grady, grady);\n\n    col *= mix(0.8, 1.0, pow(abs(coord.x), 0.3));\n\n    col = col * diffuse + specular;\n\n    \n\n    col = mix(fadeCol, col, distancefade);\n\n    \n\n    float alpha = (rstop > 0.001)? (0.5 - r / (rstop * 2.0)) : 1.0;\n\n    alpha = smoothstep(0.0, 1.0, alpha) * palpha;\n\n    \n\n    gl_FragColor = vec4(col * 0.5, alpha);\n\n}\n\n</script>\n\n<!-- effects -->\n\n<script id=\"fx_common_vsh\" type=\"x-shader/x_vertex\">\n\nuniform vec3 uResolution;\n\nattribute vec2 aPosition;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n\n}\n\n</script>\n\n<script id=\"bg_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\n\n\nuniform vec2 uTimes;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec3 col;\n\n    float c;\n\n    vec2 tmpv = texCoord * vec2(0.8, 1.0) - vec2(0.95, 1.0);\n\n    c = exp(-pow(length(tmpv) * 1.8, 2.0));\n\n    col = mix(vec3(0.02, 0.0, 0.03), vec3(0.96, 0.98, 1.0) * 1.5, c);\n\n    gl_FragColor = vec4(col * 0.5, 1.0);\n\n}\n\n</script>\n\n<script id=\"fx_brightbuf_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec4 col = texture2D(uSrc, texCoord);\n\n    gl_FragColor = vec4(col.rgb * 2.0 - vec3(0.5), 1.0);\n\n}\n\n</script>\n\n<script id=\"fx_dirblur_r4_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\nuniform vec4 uBlurDir; //dir(x, y), stride(z, w)\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec4 col = texture2D(uSrc, texCoord);\n\n    col = col + texture2D(uSrc, texCoord + uBlurDir.xy * uDelta);\n\n    col = col + texture2D(uSrc, texCoord - uBlurDir.xy * uDelta);\n\n    col = col + texture2D(uSrc, texCoord + (uBlurDir.xy + uBlurDir.zw) * uDelta);\n\n    col = col + texture2D(uSrc, texCoord - (uBlurDir.xy + uBlurDir.zw) * uDelta);\n\n    gl_FragColor = col / 5.0;\n\n}\n\n</script>\n\n<!-- effect fragment shader template -->\n\n<script id=\"fx_common_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    gl_FragColor = texture2D(uSrc, texCoord);\n\n}\n\n</script>\n\n<!-- post processing -->\n\n<script id=\"pp_final_vsh\" type=\"x-shader/x_vertex\">\n\nuniform vec3 uResolution;\n\nattribute vec2 aPosition;\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\nvoid main(void) {\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n\n}\n\n</script>\n\n<script id=\"pp_final_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform sampler2D uBloom;\n\nuniform vec2 uDelta;\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\nvoid main(void) {\n\n    vec4 srccol = texture2D(uSrc, texCoord) * 2.0;\n\n    vec4 bloomcol = texture2D(uBloom, texCoord);\n\n    vec4 col;\n\n    col = srccol + bloomcol * (vec4(1.0) + srccol);\n\n    col *= smoothstep(1.0, 0.0, pow(length((texCoord - vec2(0.5)) * 2.0), 1.2) * 0.5);\n\n    col = pow(col, vec4(0.45454545454545)); //(1.0 / 2.2)\n\n    \n\n    gl_FragColor = vec4(col.rgb, 1.0);\n\n    gl_FragColor.a = 1.0;\n\n}\n\n</script>\n\n</body>\n\n<script>\n\n// Utilities\n\nvar Vector3 = {};\n\nvar Matrix44 = {};\n\nVector3.create = function(x, y, z) {\n\n    return {'x':x, 'y':y, 'z':z};\n\n};\n\nVector3.dot = function (v0, v1) {\n\n    return v0.x * v1.x + v0.y * v1.y + v0.z * v1.z;\n\n};\n\nVector3.cross = function (v, v0, v1) {\n\n    v.x = v0.y * v1.z - v0.z * v1.y;\n\n    v.y = v0.z * v1.x - v0.x * v1.z;\n\n    v.z = v0.x * v1.y - v0.y * v1.x;\n\n};\n\nVector3.normalize = function (v) {\n\n    var l = v.x * v.x + v.y * v.y + v.z * v.z;\n\n    if(l > 0.00001) {\n\n        l = 1.0 / Math.sqrt(l);\n\n        v.x *= l;\n\n        v.y *= l;\n\n        v.z *= l;\n\n    }\n\n};\n\nVector3.arrayForm = function(v) {\n\n    if(v.array) {\n\n        v.array[0] = v.x;\n\n        v.array[1] = v.y;\n\n        v.array[2] = v.z;\n\n    }\n\n    else {\n\n        v.array = new Float32Array([v.x, v.y, v.z]);\n\n    }\n\n    return v.array;\n\n};\n\nMatrix44.createIdentity = function () {\n\n    return new Float32Array([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]);\n\n};\n\nMatrix44.loadProjection = function (m, aspect, vdeg, near, far) {\n\n    var h = near * Math.tan(vdeg * Math.PI / 180.0 * 0.5) * 2.0;\n\n    var w = h * aspect;\n\n    \n\n    m[0] = 2.0 * near / w;\n\n    m[1] = 0.0;\n\n    m[2] = 0.0;\n\n    m[3] = 0.0;\n\n    \n\n    m[4] = 0.0;\n\n    m[5] = 2.0 * near / h;\n\n    m[6] = 0.0;\n\n    m[7] = 0.0;\n\n    \n\n    m[8] = 0.0;\n\n    m[9] = 0.0;\n\n    m[10] = -(far + near) / (far - near);\n\n    m[11] = -1.0;\n\n    \n\n    m[12] = 0.0;\n\n    m[13] = 0.0;\n\n    m[14] = -2.0 * far * near / (far - near);\n\n    m[15] = 0.0;\n\n};\n\nMatrix44.loadLookAt = function (m, vpos, vlook, vup) {\n\n    var frontv = Vector3.create(vpos.x - vlook.x, vpos.y - vlook.y, vpos.z - vlook.z);\n\n    Vector3.normalize(frontv);\n\n    var sidev = Vector3.create(1.0, 0.0, 0.0);\n\n    Vector3.cross(sidev, vup, frontv);\n\n    Vector3.normalize(sidev);\n\n    var topv = Vector3.create(1.0, 0.0, 0.0);\n\n    Vector3.cross(topv, frontv, sidev);\n\n    Vector3.normalize(topv);\n\n    \n\n    m[0] = sidev.x;\n\n    m[1] = topv.x;\n\n    m[2] = frontv.x;\n\n    m[3] = 0.0;\n\n    \n\n    m[4] = sidev.y;\n\n    m[5] = topv.y;\n\n    m[6] = frontv.y;\n\n    m[7] = 0.0;\n\n    \n\n    m[8] = sidev.z;\n\n    m[9] = topv.z;\n\n    m[10] = frontv.z;\n\n    m[11] = 0.0;\n\n    \n\n    m[12] = -(vpos.x * m[0] + vpos.y * m[4] + vpos.z * m[8]);\n\n    m[13] = -(vpos.x * m[1] + vpos.y * m[5] + vpos.z * m[9]);\n\n    m[14] = -(vpos.x * m[2] + vpos.y * m[6] + vpos.z * m[10]);\n\n    m[15] = 1.0;\n\n};\n\n\n\n//\n\nvar timeInfo = {\n\n    'start':0, 'prev':0, // Date\n\n    'delta':0, 'elapsed':0 // Number(sec)\n\n};\n\n\n\n//\n\nvar gl;\n\nvar renderSpec = {\n\n    'width':0,\n\n    'height':0,\n\n    'aspect':1,\n\n    'array':new Float32Array(3),\n\n    'halfWidth':0,\n\n    'halfHeight':0,\n\n    'halfArray':new Float32Array(3)\n\n    // and some render targets. see setViewport()\n\n};\n\nrenderSpec.setSize = function(w, h) {\n\n    renderSpec.width = w;\n\n    renderSpec.height = h;\n\n    renderSpec.aspect = renderSpec.width / renderSpec.height;\n\n    renderSpec.array[0] = renderSpec.width;\n\n    renderSpec.array[1] = renderSpec.height;\n\n    renderSpec.array[2] = renderSpec.aspect;\n\n    \n\n    renderSpec.halfWidth = Math.floor(w / 2);\n\n    renderSpec.halfHeight = Math.floor(h / 2);\n\n    renderSpec.halfArray[0] = renderSpec.halfWidth;\n\n    renderSpec.halfArray[1] = renderSpec.halfHeight;\n\n    renderSpec.halfArray[2] = renderSpec.halfWidth / renderSpec.halfHeight;\n\n};\n\n\n\nfunction deleteRenderTarget(rt) {\n\n    gl.deleteFramebuffer(rt.frameBuffer);\n\n    gl.deleteRenderbuffer(rt.renderBuffer);\n\n    gl.deleteTexture(rt.texture);\n\n}\n\n\n\nfunction createRenderTarget(w, h) {\n\n    var ret = {\n\n        'width':w,\n\n        'height':h,\n\n        'sizeArray':new Float32Array([w, h, w / h]),\n\n        'dtxArray':new Float32Array([1.0 / w, 1.0 / h])\n\n    };\n\n    ret.frameBuffer = gl.createFramebuffer();\n\n    ret.renderBuffer = gl.createRenderbuffer();\n\n    ret.texture = gl.createTexture();\n\n    \n\n    gl.bindTexture(gl.TEXTURE_2D, ret.texture);\n\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, w, h, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\n    \n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, ret.frameBuffer);\n\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, ret.texture, 0);\n\n    \n\n    gl.bindRenderbuffer(gl.RENDERBUFFER, ret.renderBuffer);\n\n    gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, w, h);\n\n    gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, ret.renderBuffer);\n\n    \n\n    gl.bindTexture(gl.TEXTURE_2D, null);\n\n    gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    \n\n    return ret;\n\n}\n\n\n\nfunction compileShader(shtype, shsrc) {\n\n\tvar retsh = gl.createShader(shtype);\n\n\t\n\n\tgl.shaderSource(retsh, shsrc);\n\n\tgl.compileShader(retsh);\n\n\t\n\n\tif(!gl.getShaderParameter(retsh, gl.COMPILE_STATUS)) {\n\n\t\tvar errlog = gl.getShaderInfoLog(retsh);\n\n\t\tgl.deleteShader(retsh);\n\n\t\tconsole.error(errlog);\n\n\t\treturn null;\n\n\t}\n\n\treturn retsh;\n\n}\n\n\n\nfunction createShader(vtxsrc, frgsrc, uniformlist, attrlist) {\n\n    var vsh = compileShader(gl.VERTEX_SHADER, vtxsrc);\n\n    var fsh = compileShader(gl.FRAGMENT_SHADER, frgsrc);\n\n    \n\n    if(vsh == null || fsh == null) {\n\n        return null;\n\n    }\n\n    \n\n    var prog = gl.createProgram();\n\n    gl.attachShader(prog, vsh);\n\n    gl.attachShader(prog, fsh);\n\n    \n\n    gl.deleteShader(vsh);\n\n    gl.deleteShader(fsh);\n\n    \n\n    gl.linkProgram(prog);\n\n    if (!gl.getProgramParameter(prog, gl.LINK_STATUS)) {\n\n        var errlog = gl.getProgramInfoLog(prog);\n\n        console.error(errlog);\n\n        return null;\n\n    }\n\n    \n\n    if(uniformlist) {\n\n        prog.uniforms = {};\n\n        for(var i = 0; i < uniformlist.length; i++) {\n\n            prog.uniforms[uniformlist[i]] = gl.getUniformLocation(prog, uniformlist[i]);\n\n        }\n\n    }\n\n    \n\n    if(attrlist) {\n\n        prog.attributes = {};\n\n        for(var i = 0; i < attrlist.length; i++) {\n\n            var attr = attrlist[i];\n\n            prog.attributes[attr] = gl.getAttribLocation(prog, attr);\n\n        }\n\n    }\n\n    \n\n    return prog;\n\n}\n\n\n\nfunction useShader(prog) {\n\n    gl.useProgram(prog);\n\n    for(var attr in prog.attributes) {\n\n        gl.enableVertexAttribArray(prog.attributes[attr]);;\n\n    }\n\n}\n\n\n\nfunction unuseShader(prog) {\n\n    for(var attr in prog.attributes) {\n\n        gl.disableVertexAttribArray(prog.attributes[attr]);;\n\n    }\n\n    gl.useProgram(null);\n\n}\n\n\n\n/////\n\nvar projection = {\n\n    'angle':60,\n\n    'nearfar':new Float32Array([0.1, 100.0]),\n\n    'matrix':Matrix44.createIdentity()\n\n};\n\nvar camera = {\n\n    'position':Vector3.create(0, 0, 100),\n\n    'lookat':Vector3.create(0, 0, 0),\n\n    'up':Vector3.create(0, 1, 0),\n\n    'dof':Vector3.create(10.0, 4.0, 8.0),\n\n    'matrix':Matrix44.createIdentity()\n\n};\n\n\n\nvar pointFlower = {};\n\nvar meshFlower = {};\n\nvar sceneStandBy = false;\n\n\n\nvar BlossomParticle = function () {\n\n    this.velocity = new Array(3);\n\n    this.rotation = new Array(3);\n\n    this.position = new Array(3);\n\n    this.euler = new Array(3);\n\n    this.size = 1.0;\n\n    this.alpha = 1.0;\n\n    this.zkey = 0.0;\n\n};\n\n\n\nBlossomParticle.prototype.setVelocity = function (vx, vy, vz) {\n\n    this.velocity[0] = vx;\n\n    this.velocity[1] = vy;\n\n    this.velocity[2] = vz;\n\n};\n\n\n\nBlossomParticle.prototype.setRotation = function (rx, ry, rz) {\n\n    this.rotation[0] = rx;\n\n    this.rotation[1] = ry;\n\n    this.rotation[2] = rz;\n\n};\n\n\n\nBlossomParticle.prototype.setPosition = function (nx, ny, nz) {\n\n    this.position[0] = nx;\n\n    this.position[1] = ny;\n\n    this.position[2] = nz;\n\n};\n\n\n\nBlossomParticle.prototype.setEulerAngles = function (rx, ry, rz) {\n\n    this.euler[0] = rx;\n\n    this.euler[1] = ry;\n\n    this.euler[2] = rz;\n\n};\n\n\n\nBlossomParticle.prototype.setSize = function (s) {\n\n    this.size = s;\n\n};\n\n\n\nBlossomParticle.prototype.update = function (dt, et) {\n\n    this.position[0] += this.velocity[0] * dt;\n\n    this.position[1] += this.velocity[1] * dt;\n\n    this.position[2] += this.velocity[2] * dt;\n\n    \n\n    this.euler[0] += this.rotation[0] * dt;\n\n    this.euler[1] += this.rotation[1] * dt;\n\n    this.euler[2] += this.rotation[2] * dt;\n\n};\n\n\n\nfunction createPointFlowers() {\n\n    // get point sizes\n\n    var prm = gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);\n\n    renderSpec.pointSize = {'min':prm[0], 'max':prm[1]};\n\n    \n\n    var vtxsrc = document.getElementById(\"sakura_point_vsh\").textContent;\n\n    var frgsrc = document.getElementById(\"sakura_point_fsh\").textContent;\n\n    \n\n    pointFlower.program = createShader(\n\n        vtxsrc, frgsrc,\n\n        ['uProjection', 'uModelview', 'uResolution', 'uOffset', 'uDOF', 'uFade'],\n\n        ['aPosition', 'aEuler', 'aMisc']\n\n    );\n\n    \n\n    useShader(pointFlower.program);\n\n    pointFlower.offset = new Float32Array([0.0, 0.0, 0.0]);\n\n    pointFlower.fader = Vector3.create(0.0, 10.0, 0.0);\n\n    \n\n    // paramerters: velocity[3], rotate[3]\n\n    pointFlower.numFlowers = 1600;\n\n    pointFlower.particles = new Array(pointFlower.numFlowers);\n\n    // vertex attributes {position[3], euler_xyz[3], size[1]}\n\n    pointFlower.dataArray = new Float32Array(pointFlower.numFlowers * (3 + 3 + 2));\n\n    pointFlower.positionArrayOffset = 0;\n\n    pointFlower.eulerArrayOffset = pointFlower.numFlowers * 3;\n\n    pointFlower.miscArrayOffset = pointFlower.numFlowers * 6;\n\n    \n\n    pointFlower.buffer = gl.createBuffer();\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    \n\n    unuseShader(pointFlower.program);\n\n    \n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        pointFlower.particles[i] = new BlossomParticle();\n\n    }\n\n}\n\n\n\nfunction initPointFlowers() {\n\n    //area\n\n    pointFlower.area = Vector3.create(20.0, 20.0, 20.0);\n\n    pointFlower.area.x = pointFlower.area.y * renderSpec.aspect;\n\n    \n\n    pointFlower.fader.x = 10.0; //env fade start\n\n    pointFlower.fader.y = pointFlower.area.z; //env fade half\n\n    pointFlower.fader.z = 0.1;  //near fade start\n\n    \n\n    //particles\n\n    var PI2 = Math.PI * 2.0;\n\n    var tmpv3 = Vector3.create(0, 0, 0);\n\n    var tmpv = 0;\n\n    var symmetryrand = function() {return (Math.random() * 2.0 - 1.0);};\n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var tmpprtcl = pointFlower.particles[i];\n\n        \n\n        //velocity\n\n        tmpv3.x = symmetryrand() * 0.3 + 0.8;\n\n        tmpv3.y = symmetryrand() * 0.2 - 1.0;\n\n        tmpv3.z = symmetryrand() * 0.3 + 0.5;\n\n        Vector3.normalize(tmpv3);\n\n        tmpv = 2.0 + Math.random() * 1.0;\n\n        tmpprtcl.setVelocity(tmpv3.x * tmpv, tmpv3.y * tmpv, tmpv3.z * tmpv);\n\n        \n\n        //rotation\n\n        tmpprtcl.setRotation(\n\n            symmetryrand() * PI2 * 0.5,\n\n            symmetryrand() * PI2 * 0.5,\n\n            symmetryrand() * PI2 * 0.5\n\n        );\n\n        \n\n        //position\n\n        tmpprtcl.setPosition(\n\n            symmetryrand() * pointFlower.area.x,\n\n            symmetryrand() * pointFlower.area.y,\n\n            symmetryrand() * pointFlower.area.z\n\n        );\n\n        \n\n        //euler\n\n        tmpprtcl.setEulerAngles(\n\n            Math.random() * Math.PI * 2.0,\n\n            Math.random() * Math.PI * 2.0,\n\n            Math.random() * Math.PI * 2.0\n\n        );\n\n        \n\n        //size\n\n        tmpprtcl.setSize(0.9 + Math.random() * 0.1);\n\n    }\n\n}\n\n\n\nfunction renderPointFlowers() {\n\n    //update\n\n    var PI2 = Math.PI * 2.0;\n\n    var limit = [pointFlower.area.x, pointFlower.area.y, pointFlower.area.z];\n\n    var repeatPos = function (prt, cmp, limit) {\n\n        if(Math.abs(prt.position[cmp]) - prt.size * 0.5 > limit) {\n\n            //out of area\n\n            if(prt.position[cmp] > 0) {\n\n                prt.position[cmp] -= limit * 2.0;\n\n            }\n\n            else {\n\n                prt.position[cmp] += limit * 2.0;\n\n            }\n\n        }\n\n    };\n\n    var repeatEuler = function (prt, cmp) {\n\n        prt.euler[cmp] = prt.euler[cmp] % PI2;\n\n        if(prt.euler[cmp] < 0.0) {\n\n            prt.euler[cmp] += PI2;\n\n        }\n\n    };\n\n    \n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var prtcl = pointFlower.particles[i];\n\n        prtcl.update(timeInfo.delta, timeInfo.elapsed);\n\n        repeatPos(prtcl, 0, pointFlower.area.x);\n\n        repeatPos(prtcl, 1, pointFlower.area.y);\n\n        repeatPos(prtcl, 2, pointFlower.area.z);\n\n        repeatEuler(prtcl, 0);\n\n        repeatEuler(prtcl, 1);\n\n        repeatEuler(prtcl, 2);\n\n        \n\n        prtcl.alpha = 1.0;//(pointFlower.area.z - prtcl.position[2]) * 0.5;\n\n        \n\n        prtcl.zkey = (camera.matrix[2] * prtcl.position[0]\n\n                    + camera.matrix[6] * prtcl.position[1]\n\n                    + camera.matrix[10] * prtcl.position[2]\n\n                    + camera.matrix[14]);\n\n    }\n\n    \n\n    // sort\n\n    pointFlower.particles.sort(function(p0, p1){return p0.zkey - p1.zkey;});\n\n    \n\n    // update data\n\n    var ipos = pointFlower.positionArrayOffset;\n\n    var ieuler = pointFlower.eulerArrayOffset;\n\n    var imisc = pointFlower.miscArrayOffset;\n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var prtcl = pointFlower.particles[i];\n\n        pointFlower.dataArray[ipos] = prtcl.position[0];\n\n        pointFlower.dataArray[ipos + 1] = prtcl.position[1];\n\n        pointFlower.dataArray[ipos + 2] = prtcl.position[2];\n\n        ipos += 3;\n\n        pointFlower.dataArray[ieuler] = prtcl.euler[0];\n\n        pointFlower.dataArray[ieuler + 1] = prtcl.euler[1];\n\n        pointFlower.dataArray[ieuler + 2] = prtcl.euler[2];\n\n        ieuler += 3;\n\n        pointFlower.dataArray[imisc] = prtcl.size;\n\n        pointFlower.dataArray[imisc + 1] = prtcl.alpha;\n\n        imisc += 2;\n\n    }\n\n    \n\n    //draw\n\n    gl.enable(gl.BLEND);\n\n    //gl.disable(gl.DEPTH_TEST);\n\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n    \n\n    var prog = pointFlower.program;\n\n    useShader(prog);\n\n    \n\n    gl.uniformMatrix4fv(prog.uniforms.uProjection, false, projection.matrix);\n\n    gl.uniformMatrix4fv(prog.uniforms.uModelview, false, camera.matrix);\n\n    gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);\n\n    gl.uniform3fv(prog.uniforms.uDOF, Vector3.arrayForm(camera.dof));\n\n    gl.uniform3fv(prog.uniforms.uFade, Vector3.arrayForm(pointFlower.fader));\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);\n\n    \n\n    gl.vertexAttribPointer(prog.attributes.aPosition, 3, gl.FLOAT, false, 0, pointFlower.positionArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    gl.vertexAttribPointer(prog.attributes.aEuler, 3, gl.FLOAT, false, 0, pointFlower.eulerArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    gl.vertexAttribPointer(prog.attributes.aMisc, 2, gl.FLOAT, false, 0, pointFlower.miscArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    \n\n    // doubler\n\n    for(var i = 1; i < 2; i++) {\n\n        var zpos = i * -2.0;\n\n        pointFlower.offset[0] = pointFlower.area.x * -1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y * -1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x * -1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y *  1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x *  1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y * -1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x *  1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y *  1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n    }\n\n    \n\n    //main\n\n    pointFlower.offset[0] = 0.0;\n\n    pointFlower.offset[1] = 0.0;\n\n    pointFlower.offset[2] = 0.0;\n\n    gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n    gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    unuseShader(prog);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n    gl.disable(gl.BLEND);\n\n}\n\n\n\n// effects\n\n//common util\n\nfunction createEffectProgram(vtxsrc, frgsrc, exunifs, exattrs) {\n\n    var ret = {};\n\n    var unifs = ['uResolution', 'uSrc', 'uDelta'];\n\n    if(exunifs) {\n\n        unifs = unifs.concat(exunifs);\n\n    }\n\n    var attrs = ['aPosition'];\n\n    if(exattrs) {\n\n        attrs = attrs.concat(exattrs);\n\n    }\n\n    \n\n    ret.program = createShader(vtxsrc, frgsrc, unifs, attrs);\n\n    useShader(ret.program);\n\n    \n\n    ret.dataArray = new Float32Array([\n\n        -1.0, -1.0,\n\n         1.0, -1.0,\n\n        -1.0,  1.0,\n\n         1.0,  1.0\n\n    ]);\n\n    ret.buffer = gl.createBuffer();\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, ret.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, ret.dataArray, gl.STATIC_DRAW);\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    unuseShader(ret.program);\n\n    \n\n    return ret;\n\n}\n\n\n\n// basic usage\n\n// useEffect(prog, srctex({'texture':texid, 'dtxArray':(f32)[dtx, dty]})); //basic initialize\n\n// gl.uniform**(...); //additional uniforms\n\n// drawEffect()\n\n// unuseEffect(prog)\n\n// TEXTURE0 makes src\n\nfunction useEffect(fxobj, srctex) {\n\n    var prog = fxobj.program;\n\n    useShader(prog);\n\n    gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);\n\n    \n\n    if(srctex != null) {\n\n        gl.uniform2fv(prog.uniforms.uDelta, srctex.dtxArray);\n\n        gl.uniform1i(prog.uniforms.uSrc, 0);\n\n        \n\n        gl.activeTexture(gl.TEXTURE0);\n\n        gl.bindTexture(gl.TEXTURE_2D, srctex.texture);\n\n    }\n\n}\n\nfunction drawEffect(fxobj) {\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, fxobj.buffer);\n\n    gl.vertexAttribPointer(fxobj.program.attributes.aPosition, 2, gl.FLOAT, false, 0, 0);\n\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n}\n\nfunction unuseEffect(fxobj) {\n\n    unuseShader(fxobj.program);\n\n}\n\n\n\nvar effectLib = {};\n\nfunction createEffectLib() {\n\n    \n\n    var vtxsrc, frgsrc;\n\n    //common\n\n    var cmnvtxsrc = document.getElementById(\"fx_common_vsh\").textContent;\n\n    \n\n    //background\n\n    frgsrc = document.getElementById(\"bg_fsh\").textContent;\n\n    effectLib.sceneBg = createEffectProgram(cmnvtxsrc, frgsrc, ['uTimes'], null);\n\n    \n\n    // make brightpixels buffer\n\n    frgsrc = document.getElementById(\"fx_brightbuf_fsh\").textContent;\n\n    effectLib.mkBrightBuf = createEffectProgram(cmnvtxsrc, frgsrc, null, null);\n\n    \n\n    // direction blur\n\n    frgsrc = document.getElementById(\"fx_dirblur_r4_fsh\").textContent;\n\n    effectLib.dirBlur = createEffectProgram(cmnvtxsrc, frgsrc, ['uBlurDir'], null);\n\n    \n\n    //final composite\n\n    vtxsrc = document.getElementById(\"pp_final_vsh\").textContent;\n\n    frgsrc = document.getElementById(\"pp_final_fsh\").textContent;\n\n    effectLib.finalComp = createEffectProgram(vtxsrc, frgsrc, ['uBloom'], null);\n\n}\n\n\n\n// background\n\nfunction createBackground() {\n\n    //console.log(\"create background\");\n\n}\n\nfunction initBackground() {\n\n    //console.log(\"init background\");\n\n}\n\nfunction renderBackground() {\n\n    gl.disable(gl.DEPTH_TEST);\n\n    \n\n    useEffect(effectLib.sceneBg, null);\n\n    gl.uniform2f(effectLib.sceneBg.program.uniforms.uTimes, timeInfo.elapsed, timeInfo.delta);\n\n    drawEffect(effectLib.sceneBg);\n\n    unuseEffect(effectLib.sceneBg);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n}\n\n\n\n// post process\n\nvar postProcess = {};\n\nfunction createPostProcess() {\n\n    //console.log(\"create post process\");\n\n}\n\nfunction initPostProcess() {\n\n    //console.log(\"init post process\");\n\n}\n\n\n\nfunction renderPostProcess() {\n\n    gl.enable(gl.TEXTURE_2D);\n\n    gl.disable(gl.DEPTH_TEST);\n\n    var bindRT = function (rt, isclear) {\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, rt.frameBuffer);\n\n        gl.viewport(0, 0, rt.width, rt.height);\n\n        if(isclear) {\n\n            gl.clearColor(0, 0, 0, 0);\n\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n        }\n\n    };\n\n    \n\n    //make bright buff\n\n    bindRT(renderSpec.wHalfRT0, true);\n\n    useEffect(effectLib.mkBrightBuf, renderSpec.mainRT);\n\n    drawEffect(effectLib.mkBrightBuf);\n\n    unuseEffect(effectLib.mkBrightBuf);\n\n    \n\n    // make bloom\n\n    for(var i = 0; i < 2; i++) {\n\n        var p = 1.5 + 1 * i;\n\n        var s = 2.0 + 1 * i;\n\n        bindRT(renderSpec.wHalfRT1, true);\n\n        useEffect(effectLib.dirBlur, renderSpec.wHalfRT0);\n\n        gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir, p, 0.0, s, 0.0);\n\n        drawEffect(effectLib.dirBlur);\n\n        unuseEffect(effectLib.dirBlur);\n\n        \n\n        bindRT(renderSpec.wHalfRT0, true);\n\n        useEffect(effectLib.dirBlur, renderSpec.wHalfRT1);\n\n        gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir, 0.0, p, 0.0, s);\n\n        drawEffect(effectLib.dirBlur);\n\n        unuseEffect(effectLib.dirBlur);\n\n    }\n\n    \n\n    //display\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    gl.viewport(0, 0, renderSpec.width, renderSpec.height);\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    \n\n    useEffect(effectLib.finalComp, renderSpec.mainRT);\n\n    gl.uniform1i(effectLib.finalComp.program.uniforms.uBloom, 1);\n\n    gl.activeTexture(gl.TEXTURE1);\n\n    gl.bindTexture(gl.TEXTURE_2D, renderSpec.wHalfRT0.texture);\n\n    drawEffect(effectLib.finalComp);\n\n    unuseEffect(effectLib.finalComp);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n}\n\n\n\n/////\n\nvar SceneEnv = {};\n\nfunction createScene() {\n\n    createEffectLib();\n\n    createBackground();\n\n    createPointFlowers();\n\n    createPostProcess();\n\n    sceneStandBy = true;\n\n}\n\n\n\nfunction initScene() {\n\n    initBackground();\n\n    initPointFlowers();\n\n    initPostProcess();\n\n    \n\n    //camera.position.z = 17.320508;\n\n    camera.position.z = pointFlower.area.z + projection.nearfar[0];\n\n    projection.angle = Math.atan2(pointFlower.area.y, camera.position.z + pointFlower.area.z) * 180.0 / Math.PI * 2.0;\n\n    Matrix44.loadProjection(projection.matrix, renderSpec.aspect, projection.angle, projection.nearfar[0], projection.nearfar[1]);\n\n}\n\n\n\nfunction renderScene() {\n\n    //draw\n\n    Matrix44.loadLookAt(camera.matrix, camera.position, camera.lookat, camera.up);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n    \n\n    //gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, renderSpec.mainRT.frameBuffer);\n\n    gl.viewport(0, 0, renderSpec.mainRT.width, renderSpec.mainRT.height);\n\n    gl.clearColor(0.005, 0, 0.05, 0);\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    \n\n    renderBackground();\n\n    renderPointFlowers();\n\n    renderPostProcess();\n\n}\n\n\n\n/////\n\nfunction onResize(e) {\n\n    makeCanvasFullScreen(document.getElementById(\"sakura\"));\n\n    setViewports();\n\n    if(sceneStandBy) {\n\n        initScene();\n\n    }\n\n}\n\n\n\nfunction setViewports() {\n\n    renderSpec.setSize(gl.canvas.width, gl.canvas.height);\n\n    \n\n    gl.clearColor(0.2, 0.2, 0.5, 1.0);\n\n    gl.viewport(0, 0, renderSpec.width, renderSpec.height);\n\n    \n\n    var rtfunc = function (rtname, rtw, rth) {\n\n        var rt = renderSpec[rtname];\n\n        if(rt) deleteRenderTarget(rt);\n\n        renderSpec[rtname] = createRenderTarget(rtw, rth);\n\n    };\n\n    rtfunc('mainRT', renderSpec.width, renderSpec.height);\n\n    rtfunc('wFullRT0', renderSpec.width, renderSpec.height);\n\n    rtfunc('wFullRT1', renderSpec.width, renderSpec.height);\n\n    rtfunc('wHalfRT0', renderSpec.halfWidth, renderSpec.halfHeight);\n\n    rtfunc('wHalfRT1', renderSpec.halfWidth, renderSpec.halfHeight);\n\n}\n\n\n\nfunction render() {\n\n    renderScene();\n\n}\n\n\n\nvar animating = true;\n\nfunction toggleAnimation(elm) {\n\n    animating ^= true;\n\n    if(animating) animate();\n\n    if(elm) {\n\n        elm.innerHTML = animating? \"Stop\":\"Start\";\n\n    }\n\n}\n\n\n\nfunction stepAnimation() {\n\n    if(!animating) animate();\n\n}\n\n\n\nfunction animate() {\n\n    var curdate = new Date();\n\n    timeInfo.elapsed = (curdate - timeInfo.start) / 1000.0;\n\n    timeInfo.delta = (curdate - timeInfo.prev) / 1000.0;\n\n    timeInfo.prev = curdate;\n\n    \n\n    if(animating) requestAnimationFrame(animate);\n\n    render();\n\n}\n\n\n\nfunction makeCanvasFullScreen(canvas) {\n\n    var b = document.body;\n\n\tvar d = document.documentElement;\n\n\tfullw = Math.max(b.clientWidth , b.scrollWidth, d.scrollWidth, d.clientWidth);\n\n\tfullh = Math.max(b.clientHeight , b.scrollHeight, d.scrollHeight, d.clientHeight);\n\n\tcanvas.width = fullw;\n\n\tcanvas.height = fullh;\n\n}\n\n\n\nwindow.addEventListener('load', function(e) {\n\n    var canvas = document.getElementById(\"sakura\");\n\n    try {\n\n        makeCanvasFullScreen(canvas);\n\n        gl = canvas.getContext('experimental-webgl');\n\n    } catch(e) {\n\n        alert(\"WebGL not supported.\" + e);\n\n        console.error(e);\n\n        return;\n\n    }\n\n    \n\n    window.addEventListener('resize', onResize);\n\n    \n\n    setViewports();\n\n    createScene();\n\n    initScene();\n\n    \n\n    timeInfo.start = new Date();\n\n    timeInfo.prev = timeInfo.start;\n\n    animate();\n\n});\n\n\n\n//set window.requestAnimationFrame\n\n(function (w, r) {\n\n    w['r'+r] = w['r'+r] || w['webkitR'+r] || w['mozR'+r] || w['msR'+r] || w['oR'+r] || function(c){ w.setTimeout(c, 1000 / 60); };\n\n})(window, 'equestAnimationFrame');\n\n</script>\n\n</html>\n\n","site":{"data":{}},"excerpt":"","more":"<!doctype html>\n\n<html>\n\n<head>\n\n<meta charset=\"utf-8\">\n\n<title>无标题文档</title>\n</head>\n\n<style>\n\nbody {\n\n    padding:0;\n\n    margin:0;\n\n    overflow:hidden;\n\n\theight: 600px;\n\n}\n\ncanvas {\n\n    padding:0;\n\n    margin:0;\n\n}\n\ndiv.btnbg {\n\n    position:fixed;\n\n    left:0;\n\n    top:0;\n\n}\n\n</style>\n\n<body>\n<canvas id=\"sakura\"></canvas>\n\n<div class=\"btnbg\">\n\n</div>\n\n\n\n<!-- sakura shader -->\n\n<script id=\"sakura_point_vsh\" type=\"x-shader/x_vertex\">\n\nuniform mat4 uProjection;\n\nuniform mat4 uModelview;\n\nuniform vec3 uResolution;\n\nuniform vec3 uOffset;\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\n\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\n\n\nattribute vec3 aPosition;\n\nattribute vec3 aEuler;\n\nattribute vec2 aMisc; //x:size, y:fade\n\n\n\nvarying vec3 pposition;\n\nvarying float psize;\n\nvarying float palpha;\n\nvarying float pdist;\n\n\n\n//varying mat3 rotMat;\n\nvarying vec3 normX;\n\nvarying vec3 normY;\n\nvarying vec3 normZ;\n\nvarying vec3 normal;\n\n\n\nvarying float diffuse;\n\nvarying float specular;\n\nvarying float rstop;\n\nvarying float distancefade;\n\n\n\nvoid main(void) {\n\n    // Projection is based on vertical angle\n\n    vec4 pos = uModelview * vec4(aPosition + uOffset, 1.0);\n\n    gl_Position = uProjection * pos;\n\n    gl_PointSize = aMisc.x * uProjection[1][1] / -pos.z * uResolution.y * 0.5;\n\n    \n\n    pposition = pos.xyz;\n\n    psize = aMisc.x;\n\n    pdist = length(pos.xyz);\n\n    palpha = smoothstep(0.0, 1.0, (pdist - 0.1) / uFade.z);\n\n    \n\n    vec3 elrsn = sin(aEuler);\n\n    vec3 elrcs = cos(aEuler);\n\n    mat3 rotx = mat3(\n\n        1.0, 0.0, 0.0,\n\n        0.0, elrcs.x, elrsn.x,\n\n        0.0, -elrsn.x, elrcs.x\n\n    );\n\n    mat3 roty = mat3(\n\n        elrcs.y, 0.0, -elrsn.y,\n\n        0.0, 1.0, 0.0,\n\n        elrsn.y, 0.0, elrcs.y\n\n    );\n\n    mat3 rotz = mat3(\n\n        elrcs.z, elrsn.z, 0.0, \n\n        -elrsn.z, elrcs.z, 0.0,\n\n        0.0, 0.0, 1.0\n\n    );\n\n    mat3 rotmat = rotx * roty * rotz;\n\n    normal = rotmat[2];\n\n    \n\n    mat3 trrotm = mat3(\n\n        rotmat[0][0], rotmat[1][0], rotmat[2][0],\n\n        rotmat[0][1], rotmat[1][1], rotmat[2][1],\n\n        rotmat[0][2], rotmat[1][2], rotmat[2][2]\n\n    );\n\n    normX = trrotm[0];\n\n    normY = trrotm[1];\n\n    normZ = trrotm[2];\n\n    \n\n    const vec3 lit = vec3(0.6917144638660746, 0.6917144638660746, -0.20751433915982237);\n\n    \n\n    float tmpdfs = dot(lit, normal);\n\n    if(tmpdfs < 0.0) {\n\n        normal = -normal;\n\n        tmpdfs = dot(lit, normal);\n\n    }\n\n    diffuse = 0.4 + tmpdfs;\n\n    \n\n    vec3 eyev = normalize(-pos.xyz);\n\n    if(dot(eyev, normal) > 0.0) {\n\n        vec3 hv = normalize(eyev + lit);\n\n        specular = pow(max(dot(hv, normal), 0.0), 20.0);\n\n    }\n\n    else {\n\n        specular = 0.0;\n\n    }\n\n    \n\n    rstop = clamp((abs(pdist - uDOF.x) - uDOF.y) / uDOF.z, 0.0, 1.0);\n\n    rstop = pow(rstop, 0.5);\n\n    //-0.69315 = ln(0.5)\n\n    distancefade = min(1.0, exp((uFade.x - pdist) * 0.69315 / uFade.y));\n\n}\n\n</script>\n\n<script id=\"sakura_point_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\n\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\n\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\n\n\nconst vec3 fadeCol = vec3(0.08, 0.03, 0.06);\n\n\n\nvarying vec3 pposition;\n\nvarying float psize;\n\nvarying float palpha;\n\nvarying float pdist;\n\n\n\n//varying mat3 rotMat;\n\nvarying vec3 normX;\n\nvarying vec3 normY;\n\nvarying vec3 normZ;\n\nvarying vec3 normal;\n\n\n\nvarying float diffuse;\n\nvarying float specular;\n\nvarying float rstop;\n\nvarying float distancefade;\n\n\n\nfloat ellipse(vec2 p, vec2 o, vec2 r) {\n\n    vec2 lp = (p - o) / r;\n\n    return length(lp) - 1.0;\n\n}\n\n\n\nvoid main(void) {\n\n    vec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0;\n\n    vec3 d = vec3(0.0, 0.0, -1.0);\n\n    float nd = normZ.z; //dot(-normZ, d);\n\n    if(abs(nd) < 0.0001) discard;\n\n    \n\n    float np = dot(normZ, p);\n\n    vec3 tp = p + d * np / nd;\n\n    vec2 coord = vec2(dot(normX, tp), dot(normY, tp));\n\n    \n\n    //angle = 15 degree\n\n    const float flwrsn = 0.258819045102521;\n\n    const float flwrcs = 0.965925826289068;\n\n    mat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs);\n\n    vec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm;\n\n    \n\n    float r;\n\n    if(flwrp.x < 0.0) {\n\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5);\n\n    }\n\n    else {\n\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5);\n\n    }\n\n    \n\n    if(r > rstop) discard;\n\n    \n\n    vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r);\n\n    float grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35));\n\n    col *= vec3(1.0, grady, grady);\n\n    col *= mix(0.8, 1.0, pow(abs(coord.x), 0.3));\n\n    col = col * diffuse + specular;\n\n    \n\n    col = mix(fadeCol, col, distancefade);\n\n    \n\n    float alpha = (rstop > 0.001)? (0.5 - r / (rstop * 2.0)) : 1.0;\n\n    alpha = smoothstep(0.0, 1.0, alpha) * palpha;\n\n    \n\n    gl_FragColor = vec4(col * 0.5, alpha);\n\n}\n\n</script>\n\n<!-- effects -->\n\n<script id=\"fx_common_vsh\" type=\"x-shader/x_vertex\">\n\nuniform vec3 uResolution;\n\nattribute vec2 aPosition;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n\n}\n\n</script>\n\n<script id=\"bg_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\n\n\nuniform vec2 uTimes;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec3 col;\n\n    float c;\n\n    vec2 tmpv = texCoord * vec2(0.8, 1.0) - vec2(0.95, 1.0);\n\n    c = exp(-pow(length(tmpv) * 1.8, 2.0));\n\n    col = mix(vec3(0.02, 0.0, 0.03), vec3(0.96, 0.98, 1.0) * 1.5, c);\n\n    gl_FragColor = vec4(col * 0.5, 1.0);\n\n}\n\n</script>\n\n<script id=\"fx_brightbuf_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec4 col = texture2D(uSrc, texCoord);\n\n    gl_FragColor = vec4(col.rgb * 2.0 - vec3(0.5), 1.0);\n\n}\n\n</script>\n\n<script id=\"fx_dirblur_r4_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\nuniform vec4 uBlurDir; //dir(x, y), stride(z, w)\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    vec4 col = texture2D(uSrc, texCoord);\n\n    col = col + texture2D(uSrc, texCoord + uBlurDir.xy * uDelta);\n\n    col = col + texture2D(uSrc, texCoord - uBlurDir.xy * uDelta);\n\n    col = col + texture2D(uSrc, texCoord + (uBlurDir.xy + uBlurDir.zw) * uDelta);\n\n    col = col + texture2D(uSrc, texCoord - (uBlurDir.xy + uBlurDir.zw) * uDelta);\n\n    gl_FragColor = col / 5.0;\n\n}\n\n</script>\n\n<!-- effect fragment shader template -->\n\n<script id=\"fx_common_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform vec2 uDelta;\n\n\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\n\n\nvoid main(void) {\n\n    gl_FragColor = texture2D(uSrc, texCoord);\n\n}\n\n</script>\n\n<!-- post processing -->\n\n<script id=\"pp_final_vsh\" type=\"x-shader/x_vertex\">\n\nuniform vec3 uResolution;\n\nattribute vec2 aPosition;\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\nvoid main(void) {\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n\n}\n\n</script>\n\n<script id=\"pp_final_fsh\" type=\"x-shader/x_fragment\">\n\n#ifdef GL_ES\n\n//precision mediump float;\n\nprecision highp float;\n\n#endif\n\nuniform sampler2D uSrc;\n\nuniform sampler2D uBloom;\n\nuniform vec2 uDelta;\n\nvarying vec2 texCoord;\n\nvarying vec2 screenCoord;\n\nvoid main(void) {\n\n    vec4 srccol = texture2D(uSrc, texCoord) * 2.0;\n\n    vec4 bloomcol = texture2D(uBloom, texCoord);\n\n    vec4 col;\n\n    col = srccol + bloomcol * (vec4(1.0) + srccol);\n\n    col *= smoothstep(1.0, 0.0, pow(length((texCoord - vec2(0.5)) * 2.0), 1.2) * 0.5);\n\n    col = pow(col, vec4(0.45454545454545)); //(1.0 / 2.2)\n\n    \n\n    gl_FragColor = vec4(col.rgb, 1.0);\n\n    gl_FragColor.a = 1.0;\n\n}\n\n</script>\n\n</body>\n\n<script>\n\n// Utilities\n\nvar Vector3 = {};\n\nvar Matrix44 = {};\n\nVector3.create = function(x, y, z) {\n\n    return {'x':x, 'y':y, 'z':z};\n\n};\n\nVector3.dot = function (v0, v1) {\n\n    return v0.x * v1.x + v0.y * v1.y + v0.z * v1.z;\n\n};\n\nVector3.cross = function (v, v0, v1) {\n\n    v.x = v0.y * v1.z - v0.z * v1.y;\n\n    v.y = v0.z * v1.x - v0.x * v1.z;\n\n    v.z = v0.x * v1.y - v0.y * v1.x;\n\n};\n\nVector3.normalize = function (v) {\n\n    var l = v.x * v.x + v.y * v.y + v.z * v.z;\n\n    if(l > 0.00001) {\n\n        l = 1.0 / Math.sqrt(l);\n\n        v.x *= l;\n\n        v.y *= l;\n\n        v.z *= l;\n\n    }\n\n};\n\nVector3.arrayForm = function(v) {\n\n    if(v.array) {\n\n        v.array[0] = v.x;\n\n        v.array[1] = v.y;\n\n        v.array[2] = v.z;\n\n    }\n\n    else {\n\n        v.array = new Float32Array([v.x, v.y, v.z]);\n\n    }\n\n    return v.array;\n\n};\n\nMatrix44.createIdentity = function () {\n\n    return new Float32Array([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]);\n\n};\n\nMatrix44.loadProjection = function (m, aspect, vdeg, near, far) {\n\n    var h = near * Math.tan(vdeg * Math.PI / 180.0 * 0.5) * 2.0;\n\n    var w = h * aspect;\n\n    \n\n    m[0] = 2.0 * near / w;\n\n    m[1] = 0.0;\n\n    m[2] = 0.0;\n\n    m[3] = 0.0;\n\n    \n\n    m[4] = 0.0;\n\n    m[5] = 2.0 * near / h;\n\n    m[6] = 0.0;\n\n    m[7] = 0.0;\n\n    \n\n    m[8] = 0.0;\n\n    m[9] = 0.0;\n\n    m[10] = -(far + near) / (far - near);\n\n    m[11] = -1.0;\n\n    \n\n    m[12] = 0.0;\n\n    m[13] = 0.0;\n\n    m[14] = -2.0 * far * near / (far - near);\n\n    m[15] = 0.0;\n\n};\n\nMatrix44.loadLookAt = function (m, vpos, vlook, vup) {\n\n    var frontv = Vector3.create(vpos.x - vlook.x, vpos.y - vlook.y, vpos.z - vlook.z);\n\n    Vector3.normalize(frontv);\n\n    var sidev = Vector3.create(1.0, 0.0, 0.0);\n\n    Vector3.cross(sidev, vup, frontv);\n\n    Vector3.normalize(sidev);\n\n    var topv = Vector3.create(1.0, 0.0, 0.0);\n\n    Vector3.cross(topv, frontv, sidev);\n\n    Vector3.normalize(topv);\n\n    \n\n    m[0] = sidev.x;\n\n    m[1] = topv.x;\n\n    m[2] = frontv.x;\n\n    m[3] = 0.0;\n\n    \n\n    m[4] = sidev.y;\n\n    m[5] = topv.y;\n\n    m[6] = frontv.y;\n\n    m[7] = 0.0;\n\n    \n\n    m[8] = sidev.z;\n\n    m[9] = topv.z;\n\n    m[10] = frontv.z;\n\n    m[11] = 0.0;\n\n    \n\n    m[12] = -(vpos.x * m[0] + vpos.y * m[4] + vpos.z * m[8]);\n\n    m[13] = -(vpos.x * m[1] + vpos.y * m[5] + vpos.z * m[9]);\n\n    m[14] = -(vpos.x * m[2] + vpos.y * m[6] + vpos.z * m[10]);\n\n    m[15] = 1.0;\n\n};\n\n\n\n//\n\nvar timeInfo = {\n\n    'start':0, 'prev':0, // Date\n\n    'delta':0, 'elapsed':0 // Number(sec)\n\n};\n\n\n\n//\n\nvar gl;\n\nvar renderSpec = {\n\n    'width':0,\n\n    'height':0,\n\n    'aspect':1,\n\n    'array':new Float32Array(3),\n\n    'halfWidth':0,\n\n    'halfHeight':0,\n\n    'halfArray':new Float32Array(3)\n\n    // and some render targets. see setViewport()\n\n};\n\nrenderSpec.setSize = function(w, h) {\n\n    renderSpec.width = w;\n\n    renderSpec.height = h;\n\n    renderSpec.aspect = renderSpec.width / renderSpec.height;\n\n    renderSpec.array[0] = renderSpec.width;\n\n    renderSpec.array[1] = renderSpec.height;\n\n    renderSpec.array[2] = renderSpec.aspect;\n\n    \n\n    renderSpec.halfWidth = Math.floor(w / 2);\n\n    renderSpec.halfHeight = Math.floor(h / 2);\n\n    renderSpec.halfArray[0] = renderSpec.halfWidth;\n\n    renderSpec.halfArray[1] = renderSpec.halfHeight;\n\n    renderSpec.halfArray[2] = renderSpec.halfWidth / renderSpec.halfHeight;\n\n};\n\n\n\nfunction deleteRenderTarget(rt) {\n\n    gl.deleteFramebuffer(rt.frameBuffer);\n\n    gl.deleteRenderbuffer(rt.renderBuffer);\n\n    gl.deleteTexture(rt.texture);\n\n}\n\n\n\nfunction createRenderTarget(w, h) {\n\n    var ret = {\n\n        'width':w,\n\n        'height':h,\n\n        'sizeArray':new Float32Array([w, h, w / h]),\n\n        'dtxArray':new Float32Array([1.0 / w, 1.0 / h])\n\n    };\n\n    ret.frameBuffer = gl.createFramebuffer();\n\n    ret.renderBuffer = gl.createRenderbuffer();\n\n    ret.texture = gl.createTexture();\n\n    \n\n    gl.bindTexture(gl.TEXTURE_2D, ret.texture);\n\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, w, h, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\n    \n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, ret.frameBuffer);\n\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, ret.texture, 0);\n\n    \n\n    gl.bindRenderbuffer(gl.RENDERBUFFER, ret.renderBuffer);\n\n    gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, w, h);\n\n    gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, ret.renderBuffer);\n\n    \n\n    gl.bindTexture(gl.TEXTURE_2D, null);\n\n    gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    \n\n    return ret;\n\n}\n\n\n\nfunction compileShader(shtype, shsrc) {\n\n\tvar retsh = gl.createShader(shtype);\n\n\t\n\n\tgl.shaderSource(retsh, shsrc);\n\n\tgl.compileShader(retsh);\n\n\t\n\n\tif(!gl.getShaderParameter(retsh, gl.COMPILE_STATUS)) {\n\n\t\tvar errlog = gl.getShaderInfoLog(retsh);\n\n\t\tgl.deleteShader(retsh);\n\n\t\tconsole.error(errlog);\n\n\t\treturn null;\n\n\t}\n\n\treturn retsh;\n\n}\n\n\n\nfunction createShader(vtxsrc, frgsrc, uniformlist, attrlist) {\n\n    var vsh = compileShader(gl.VERTEX_SHADER, vtxsrc);\n\n    var fsh = compileShader(gl.FRAGMENT_SHADER, frgsrc);\n\n    \n\n    if(vsh == null || fsh == null) {\n\n        return null;\n\n    }\n\n    \n\n    var prog = gl.createProgram();\n\n    gl.attachShader(prog, vsh);\n\n    gl.attachShader(prog, fsh);\n\n    \n\n    gl.deleteShader(vsh);\n\n    gl.deleteShader(fsh);\n\n    \n\n    gl.linkProgram(prog);\n\n    if (!gl.getProgramParameter(prog, gl.LINK_STATUS)) {\n\n        var errlog = gl.getProgramInfoLog(prog);\n\n        console.error(errlog);\n\n        return null;\n\n    }\n\n    \n\n    if(uniformlist) {\n\n        prog.uniforms = {};\n\n        for(var i = 0; i < uniformlist.length; i++) {\n\n            prog.uniforms[uniformlist[i]] = gl.getUniformLocation(prog, uniformlist[i]);\n\n        }\n\n    }\n\n    \n\n    if(attrlist) {\n\n        prog.attributes = {};\n\n        for(var i = 0; i < attrlist.length; i++) {\n\n            var attr = attrlist[i];\n\n            prog.attributes[attr] = gl.getAttribLocation(prog, attr);\n\n        }\n\n    }\n\n    \n\n    return prog;\n\n}\n\n\n\nfunction useShader(prog) {\n\n    gl.useProgram(prog);\n\n    for(var attr in prog.attributes) {\n\n        gl.enableVertexAttribArray(prog.attributes[attr]);;\n\n    }\n\n}\n\n\n\nfunction unuseShader(prog) {\n\n    for(var attr in prog.attributes) {\n\n        gl.disableVertexAttribArray(prog.attributes[attr]);;\n\n    }\n\n    gl.useProgram(null);\n\n}\n\n\n\n/////\n\nvar projection = {\n\n    'angle':60,\n\n    'nearfar':new Float32Array([0.1, 100.0]),\n\n    'matrix':Matrix44.createIdentity()\n\n};\n\nvar camera = {\n\n    'position':Vector3.create(0, 0, 100),\n\n    'lookat':Vector3.create(0, 0, 0),\n\n    'up':Vector3.create(0, 1, 0),\n\n    'dof':Vector3.create(10.0, 4.0, 8.0),\n\n    'matrix':Matrix44.createIdentity()\n\n};\n\n\n\nvar pointFlower = {};\n\nvar meshFlower = {};\n\nvar sceneStandBy = false;\n\n\n\nvar BlossomParticle = function () {\n\n    this.velocity = new Array(3);\n\n    this.rotation = new Array(3);\n\n    this.position = new Array(3);\n\n    this.euler = new Array(3);\n\n    this.size = 1.0;\n\n    this.alpha = 1.0;\n\n    this.zkey = 0.0;\n\n};\n\n\n\nBlossomParticle.prototype.setVelocity = function (vx, vy, vz) {\n\n    this.velocity[0] = vx;\n\n    this.velocity[1] = vy;\n\n    this.velocity[2] = vz;\n\n};\n\n\n\nBlossomParticle.prototype.setRotation = function (rx, ry, rz) {\n\n    this.rotation[0] = rx;\n\n    this.rotation[1] = ry;\n\n    this.rotation[2] = rz;\n\n};\n\n\n\nBlossomParticle.prototype.setPosition = function (nx, ny, nz) {\n\n    this.position[0] = nx;\n\n    this.position[1] = ny;\n\n    this.position[2] = nz;\n\n};\n\n\n\nBlossomParticle.prototype.setEulerAngles = function (rx, ry, rz) {\n\n    this.euler[0] = rx;\n\n    this.euler[1] = ry;\n\n    this.euler[2] = rz;\n\n};\n\n\n\nBlossomParticle.prototype.setSize = function (s) {\n\n    this.size = s;\n\n};\n\n\n\nBlossomParticle.prototype.update = function (dt, et) {\n\n    this.position[0] += this.velocity[0] * dt;\n\n    this.position[1] += this.velocity[1] * dt;\n\n    this.position[2] += this.velocity[2] * dt;\n\n    \n\n    this.euler[0] += this.rotation[0] * dt;\n\n    this.euler[1] += this.rotation[1] * dt;\n\n    this.euler[2] += this.rotation[2] * dt;\n\n};\n\n\n\nfunction createPointFlowers() {\n\n    // get point sizes\n\n    var prm = gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);\n\n    renderSpec.pointSize = {'min':prm[0], 'max':prm[1]};\n\n    \n\n    var vtxsrc = document.getElementById(\"sakura_point_vsh\").textContent;\n\n    var frgsrc = document.getElementById(\"sakura_point_fsh\").textContent;\n\n    \n\n    pointFlower.program = createShader(\n\n        vtxsrc, frgsrc,\n\n        ['uProjection', 'uModelview', 'uResolution', 'uOffset', 'uDOF', 'uFade'],\n\n        ['aPosition', 'aEuler', 'aMisc']\n\n    );\n\n    \n\n    useShader(pointFlower.program);\n\n    pointFlower.offset = new Float32Array([0.0, 0.0, 0.0]);\n\n    pointFlower.fader = Vector3.create(0.0, 10.0, 0.0);\n\n    \n\n    // paramerters: velocity[3], rotate[3]\n\n    pointFlower.numFlowers = 1600;\n\n    pointFlower.particles = new Array(pointFlower.numFlowers);\n\n    // vertex attributes {position[3], euler_xyz[3], size[1]}\n\n    pointFlower.dataArray = new Float32Array(pointFlower.numFlowers * (3 + 3 + 2));\n\n    pointFlower.positionArrayOffset = 0;\n\n    pointFlower.eulerArrayOffset = pointFlower.numFlowers * 3;\n\n    pointFlower.miscArrayOffset = pointFlower.numFlowers * 6;\n\n    \n\n    pointFlower.buffer = gl.createBuffer();\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    \n\n    unuseShader(pointFlower.program);\n\n    \n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        pointFlower.particles[i] = new BlossomParticle();\n\n    }\n\n}\n\n\n\nfunction initPointFlowers() {\n\n    //area\n\n    pointFlower.area = Vector3.create(20.0, 20.0, 20.0);\n\n    pointFlower.area.x = pointFlower.area.y * renderSpec.aspect;\n\n    \n\n    pointFlower.fader.x = 10.0; //env fade start\n\n    pointFlower.fader.y = pointFlower.area.z; //env fade half\n\n    pointFlower.fader.z = 0.1;  //near fade start\n\n    \n\n    //particles\n\n    var PI2 = Math.PI * 2.0;\n\n    var tmpv3 = Vector3.create(0, 0, 0);\n\n    var tmpv = 0;\n\n    var symmetryrand = function() {return (Math.random() * 2.0 - 1.0);};\n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var tmpprtcl = pointFlower.particles[i];\n\n        \n\n        //velocity\n\n        tmpv3.x = symmetryrand() * 0.3 + 0.8;\n\n        tmpv3.y = symmetryrand() * 0.2 - 1.0;\n\n        tmpv3.z = symmetryrand() * 0.3 + 0.5;\n\n        Vector3.normalize(tmpv3);\n\n        tmpv = 2.0 + Math.random() * 1.0;\n\n        tmpprtcl.setVelocity(tmpv3.x * tmpv, tmpv3.y * tmpv, tmpv3.z * tmpv);\n\n        \n\n        //rotation\n\n        tmpprtcl.setRotation(\n\n            symmetryrand() * PI2 * 0.5,\n\n            symmetryrand() * PI2 * 0.5,\n\n            symmetryrand() * PI2 * 0.5\n\n        );\n\n        \n\n        //position\n\n        tmpprtcl.setPosition(\n\n            symmetryrand() * pointFlower.area.x,\n\n            symmetryrand() * pointFlower.area.y,\n\n            symmetryrand() * pointFlower.area.z\n\n        );\n\n        \n\n        //euler\n\n        tmpprtcl.setEulerAngles(\n\n            Math.random() * Math.PI * 2.0,\n\n            Math.random() * Math.PI * 2.0,\n\n            Math.random() * Math.PI * 2.0\n\n        );\n\n        \n\n        //size\n\n        tmpprtcl.setSize(0.9 + Math.random() * 0.1);\n\n    }\n\n}\n\n\n\nfunction renderPointFlowers() {\n\n    //update\n\n    var PI2 = Math.PI * 2.0;\n\n    var limit = [pointFlower.area.x, pointFlower.area.y, pointFlower.area.z];\n\n    var repeatPos = function (prt, cmp, limit) {\n\n        if(Math.abs(prt.position[cmp]) - prt.size * 0.5 > limit) {\n\n            //out of area\n\n            if(prt.position[cmp] > 0) {\n\n                prt.position[cmp] -= limit * 2.0;\n\n            }\n\n            else {\n\n                prt.position[cmp] += limit * 2.0;\n\n            }\n\n        }\n\n    };\n\n    var repeatEuler = function (prt, cmp) {\n\n        prt.euler[cmp] = prt.euler[cmp] % PI2;\n\n        if(prt.euler[cmp] < 0.0) {\n\n            prt.euler[cmp] += PI2;\n\n        }\n\n    };\n\n    \n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var prtcl = pointFlower.particles[i];\n\n        prtcl.update(timeInfo.delta, timeInfo.elapsed);\n\n        repeatPos(prtcl, 0, pointFlower.area.x);\n\n        repeatPos(prtcl, 1, pointFlower.area.y);\n\n        repeatPos(prtcl, 2, pointFlower.area.z);\n\n        repeatEuler(prtcl, 0);\n\n        repeatEuler(prtcl, 1);\n\n        repeatEuler(prtcl, 2);\n\n        \n\n        prtcl.alpha = 1.0;//(pointFlower.area.z - prtcl.position[2]) * 0.5;\n\n        \n\n        prtcl.zkey = (camera.matrix[2] * prtcl.position[0]\n\n                    + camera.matrix[6] * prtcl.position[1]\n\n                    + camera.matrix[10] * prtcl.position[2]\n\n                    + camera.matrix[14]);\n\n    }\n\n    \n\n    // sort\n\n    pointFlower.particles.sort(function(p0, p1){return p0.zkey - p1.zkey;});\n\n    \n\n    // update data\n\n    var ipos = pointFlower.positionArrayOffset;\n\n    var ieuler = pointFlower.eulerArrayOffset;\n\n    var imisc = pointFlower.miscArrayOffset;\n\n    for(var i = 0; i < pointFlower.numFlowers; i++) {\n\n        var prtcl = pointFlower.particles[i];\n\n        pointFlower.dataArray[ipos] = prtcl.position[0];\n\n        pointFlower.dataArray[ipos + 1] = prtcl.position[1];\n\n        pointFlower.dataArray[ipos + 2] = prtcl.position[2];\n\n        ipos += 3;\n\n        pointFlower.dataArray[ieuler] = prtcl.euler[0];\n\n        pointFlower.dataArray[ieuler + 1] = prtcl.euler[1];\n\n        pointFlower.dataArray[ieuler + 2] = prtcl.euler[2];\n\n        ieuler += 3;\n\n        pointFlower.dataArray[imisc] = prtcl.size;\n\n        pointFlower.dataArray[imisc + 1] = prtcl.alpha;\n\n        imisc += 2;\n\n    }\n\n    \n\n    //draw\n\n    gl.enable(gl.BLEND);\n\n    //gl.disable(gl.DEPTH_TEST);\n\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n    \n\n    var prog = pointFlower.program;\n\n    useShader(prog);\n\n    \n\n    gl.uniformMatrix4fv(prog.uniforms.uProjection, false, projection.matrix);\n\n    gl.uniformMatrix4fv(prog.uniforms.uModelview, false, camera.matrix);\n\n    gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);\n\n    gl.uniform3fv(prog.uniforms.uDOF, Vector3.arrayForm(camera.dof));\n\n    gl.uniform3fv(prog.uniforms.uFade, Vector3.arrayForm(pointFlower.fader));\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);\n\n    \n\n    gl.vertexAttribPointer(prog.attributes.aPosition, 3, gl.FLOAT, false, 0, pointFlower.positionArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    gl.vertexAttribPointer(prog.attributes.aEuler, 3, gl.FLOAT, false, 0, pointFlower.eulerArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    gl.vertexAttribPointer(prog.attributes.aMisc, 2, gl.FLOAT, false, 0, pointFlower.miscArrayOffset * Float32Array.BYTES_PER_ELEMENT);\n\n    \n\n    // doubler\n\n    for(var i = 1; i < 2; i++) {\n\n        var zpos = i * -2.0;\n\n        pointFlower.offset[0] = pointFlower.area.x * -1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y * -1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x * -1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y *  1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x *  1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y * -1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        \n\n        pointFlower.offset[0] = pointFlower.area.x *  1.0;\n\n        pointFlower.offset[1] = pointFlower.area.y *  1.0;\n\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\n\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n    }\n\n    \n\n    //main\n\n    pointFlower.offset[0] = 0.0;\n\n    pointFlower.offset[1] = 0.0;\n\n    pointFlower.offset[2] = 0.0;\n\n    gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n\n    gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    unuseShader(prog);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n    gl.disable(gl.BLEND);\n\n}\n\n\n\n// effects\n\n//common util\n\nfunction createEffectProgram(vtxsrc, frgsrc, exunifs, exattrs) {\n\n    var ret = {};\n\n    var unifs = ['uResolution', 'uSrc', 'uDelta'];\n\n    if(exunifs) {\n\n        unifs = unifs.concat(exunifs);\n\n    }\n\n    var attrs = ['aPosition'];\n\n    if(exattrs) {\n\n        attrs = attrs.concat(exattrs);\n\n    }\n\n    \n\n    ret.program = createShader(vtxsrc, frgsrc, unifs, attrs);\n\n    useShader(ret.program);\n\n    \n\n    ret.dataArray = new Float32Array([\n\n        -1.0, -1.0,\n\n         1.0, -1.0,\n\n        -1.0,  1.0,\n\n         1.0,  1.0\n\n    ]);\n\n    ret.buffer = gl.createBuffer();\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, ret.buffer);\n\n    gl.bufferData(gl.ARRAY_BUFFER, ret.dataArray, gl.STATIC_DRAW);\n\n    \n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    unuseShader(ret.program);\n\n    \n\n    return ret;\n\n}\n\n\n\n// basic usage\n\n// useEffect(prog, srctex({'texture':texid, 'dtxArray':(f32)[dtx, dty]})); //basic initialize\n\n// gl.uniform**(...); //additional uniforms\n\n// drawEffect()\n\n// unuseEffect(prog)\n\n// TEXTURE0 makes src\n\nfunction useEffect(fxobj, srctex) {\n\n    var prog = fxobj.program;\n\n    useShader(prog);\n\n    gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);\n\n    \n\n    if(srctex != null) {\n\n        gl.uniform2fv(prog.uniforms.uDelta, srctex.dtxArray);\n\n        gl.uniform1i(prog.uniforms.uSrc, 0);\n\n        \n\n        gl.activeTexture(gl.TEXTURE0);\n\n        gl.bindTexture(gl.TEXTURE_2D, srctex.texture);\n\n    }\n\n}\n\nfunction drawEffect(fxobj) {\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, fxobj.buffer);\n\n    gl.vertexAttribPointer(fxobj.program.attributes.aPosition, 2, gl.FLOAT, false, 0, 0);\n\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n}\n\nfunction unuseEffect(fxobj) {\n\n    unuseShader(fxobj.program);\n\n}\n\n\n\nvar effectLib = {};\n\nfunction createEffectLib() {\n\n    \n\n    var vtxsrc, frgsrc;\n\n    //common\n\n    var cmnvtxsrc = document.getElementById(\"fx_common_vsh\").textContent;\n\n    \n\n    //background\n\n    frgsrc = document.getElementById(\"bg_fsh\").textContent;\n\n    effectLib.sceneBg = createEffectProgram(cmnvtxsrc, frgsrc, ['uTimes'], null);\n\n    \n\n    // make brightpixels buffer\n\n    frgsrc = document.getElementById(\"fx_brightbuf_fsh\").textContent;\n\n    effectLib.mkBrightBuf = createEffectProgram(cmnvtxsrc, frgsrc, null, null);\n\n    \n\n    // direction blur\n\n    frgsrc = document.getElementById(\"fx_dirblur_r4_fsh\").textContent;\n\n    effectLib.dirBlur = createEffectProgram(cmnvtxsrc, frgsrc, ['uBlurDir'], null);\n\n    \n\n    //final composite\n\n    vtxsrc = document.getElementById(\"pp_final_vsh\").textContent;\n\n    frgsrc = document.getElementById(\"pp_final_fsh\").textContent;\n\n    effectLib.finalComp = createEffectProgram(vtxsrc, frgsrc, ['uBloom'], null);\n\n}\n\n\n\n// background\n\nfunction createBackground() {\n\n    //console.log(\"create background\");\n\n}\n\nfunction initBackground() {\n\n    //console.log(\"init background\");\n\n}\n\nfunction renderBackground() {\n\n    gl.disable(gl.DEPTH_TEST);\n\n    \n\n    useEffect(effectLib.sceneBg, null);\n\n    gl.uniform2f(effectLib.sceneBg.program.uniforms.uTimes, timeInfo.elapsed, timeInfo.delta);\n\n    drawEffect(effectLib.sceneBg);\n\n    unuseEffect(effectLib.sceneBg);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n}\n\n\n\n// post process\n\nvar postProcess = {};\n\nfunction createPostProcess() {\n\n    //console.log(\"create post process\");\n\n}\n\nfunction initPostProcess() {\n\n    //console.log(\"init post process\");\n\n}\n\n\n\nfunction renderPostProcess() {\n\n    gl.enable(gl.TEXTURE_2D);\n\n    gl.disable(gl.DEPTH_TEST);\n\n    var bindRT = function (rt, isclear) {\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, rt.frameBuffer);\n\n        gl.viewport(0, 0, rt.width, rt.height);\n\n        if(isclear) {\n\n            gl.clearColor(0, 0, 0, 0);\n\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n        }\n\n    };\n\n    \n\n    //make bright buff\n\n    bindRT(renderSpec.wHalfRT0, true);\n\n    useEffect(effectLib.mkBrightBuf, renderSpec.mainRT);\n\n    drawEffect(effectLib.mkBrightBuf);\n\n    unuseEffect(effectLib.mkBrightBuf);\n\n    \n\n    // make bloom\n\n    for(var i = 0; i < 2; i++) {\n\n        var p = 1.5 + 1 * i;\n\n        var s = 2.0 + 1 * i;\n\n        bindRT(renderSpec.wHalfRT1, true);\n\n        useEffect(effectLib.dirBlur, renderSpec.wHalfRT0);\n\n        gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir, p, 0.0, s, 0.0);\n\n        drawEffect(effectLib.dirBlur);\n\n        unuseEffect(effectLib.dirBlur);\n\n        \n\n        bindRT(renderSpec.wHalfRT0, true);\n\n        useEffect(effectLib.dirBlur, renderSpec.wHalfRT1);\n\n        gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir, 0.0, p, 0.0, s);\n\n        drawEffect(effectLib.dirBlur);\n\n        unuseEffect(effectLib.dirBlur);\n\n    }\n\n    \n\n    //display\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    gl.viewport(0, 0, renderSpec.width, renderSpec.height);\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    \n\n    useEffect(effectLib.finalComp, renderSpec.mainRT);\n\n    gl.uniform1i(effectLib.finalComp.program.uniforms.uBloom, 1);\n\n    gl.activeTexture(gl.TEXTURE1);\n\n    gl.bindTexture(gl.TEXTURE_2D, renderSpec.wHalfRT0.texture);\n\n    drawEffect(effectLib.finalComp);\n\n    unuseEffect(effectLib.finalComp);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n}\n\n\n\n/////\n\nvar SceneEnv = {};\n\nfunction createScene() {\n\n    createEffectLib();\n\n    createBackground();\n\n    createPointFlowers();\n\n    createPostProcess();\n\n    sceneStandBy = true;\n\n}\n\n\n\nfunction initScene() {\n\n    initBackground();\n\n    initPointFlowers();\n\n    initPostProcess();\n\n    \n\n    //camera.position.z = 17.320508;\n\n    camera.position.z = pointFlower.area.z + projection.nearfar[0];\n\n    projection.angle = Math.atan2(pointFlower.area.y, camera.position.z + pointFlower.area.z) * 180.0 / Math.PI * 2.0;\n\n    Matrix44.loadProjection(projection.matrix, renderSpec.aspect, projection.angle, projection.nearfar[0], projection.nearfar[1]);\n\n}\n\n\n\nfunction renderScene() {\n\n    //draw\n\n    Matrix44.loadLookAt(camera.matrix, camera.position, camera.lookat, camera.up);\n\n    \n\n    gl.enable(gl.DEPTH_TEST);\n\n    \n\n    //gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, renderSpec.mainRT.frameBuffer);\n\n    gl.viewport(0, 0, renderSpec.mainRT.width, renderSpec.mainRT.height);\n\n    gl.clearColor(0.005, 0, 0.05, 0);\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    \n\n    renderBackground();\n\n    renderPointFlowers();\n\n    renderPostProcess();\n\n}\n\n\n\n/////\n\nfunction onResize(e) {\n\n    makeCanvasFullScreen(document.getElementById(\"sakura\"));\n\n    setViewports();\n\n    if(sceneStandBy) {\n\n        initScene();\n\n    }\n\n}\n\n\n\nfunction setViewports() {\n\n    renderSpec.setSize(gl.canvas.width, gl.canvas.height);\n\n    \n\n    gl.clearColor(0.2, 0.2, 0.5, 1.0);\n\n    gl.viewport(0, 0, renderSpec.width, renderSpec.height);\n\n    \n\n    var rtfunc = function (rtname, rtw, rth) {\n\n        var rt = renderSpec[rtname];\n\n        if(rt) deleteRenderTarget(rt);\n\n        renderSpec[rtname] = createRenderTarget(rtw, rth);\n\n    };\n\n    rtfunc('mainRT', renderSpec.width, renderSpec.height);\n\n    rtfunc('wFullRT0', renderSpec.width, renderSpec.height);\n\n    rtfunc('wFullRT1', renderSpec.width, renderSpec.height);\n\n    rtfunc('wHalfRT0', renderSpec.halfWidth, renderSpec.halfHeight);\n\n    rtfunc('wHalfRT1', renderSpec.halfWidth, renderSpec.halfHeight);\n\n}\n\n\n\nfunction render() {\n\n    renderScene();\n\n}\n\n\n\nvar animating = true;\n\nfunction toggleAnimation(elm) {\n\n    animating ^= true;\n\n    if(animating) animate();\n\n    if(elm) {\n\n        elm.innerHTML = animating? \"Stop\":\"Start\";\n\n    }\n\n}\n\n\n\nfunction stepAnimation() {\n\n    if(!animating) animate();\n\n}\n\n\n\nfunction animate() {\n\n    var curdate = new Date();\n\n    timeInfo.elapsed = (curdate - timeInfo.start) / 1000.0;\n\n    timeInfo.delta = (curdate - timeInfo.prev) / 1000.0;\n\n    timeInfo.prev = curdate;\n\n    \n\n    if(animating) requestAnimationFrame(animate);\n\n    render();\n\n}\n\n\n\nfunction makeCanvasFullScreen(canvas) {\n\n    var b = document.body;\n\n\tvar d = document.documentElement;\n\n\tfullw = Math.max(b.clientWidth , b.scrollWidth, d.scrollWidth, d.clientWidth);\n\n\tfullh = Math.max(b.clientHeight , b.scrollHeight, d.scrollHeight, d.clientHeight);\n\n\tcanvas.width = fullw;\n\n\tcanvas.height = fullh;\n\n}\n\n\n\nwindow.addEventListener('load', function(e) {\n\n    var canvas = document.getElementById(\"sakura\");\n\n    try {\n\n        makeCanvasFullScreen(canvas);\n\n        gl = canvas.getContext('experimental-webgl');\n\n    } catch(e) {\n\n        alert(\"WebGL not supported.\" + e);\n\n        console.error(e);\n\n        return;\n\n    }\n\n    \n\n    window.addEventListener('resize', onResize);\n\n    \n\n    setViewports();\n\n    createScene();\n\n    initScene();\n\n    \n\n    timeInfo.start = new Date();\n\n    timeInfo.prev = timeInfo.start;\n\n    animate();\n\n});\n\n\n\n//set window.requestAnimationFrame\n\n(function (w, r) {\n\n    w['r'+r] = w['r'+r] || w['webkitR'+r] || w['mozR'+r] || w['msR'+r] || w['oR'+r] || function(c){ w.setTimeout(c, 1000 / 60); };\n\n})(window, 'equestAnimationFrame');\n\n</script>\n\n</html>\n\n"}],"Post":[{"title":"FlutterGo","date":"2017-04-13T17:59:51.000Z","description":"这只是一个语言描述的测试","toc":true,"_content":"\n#### Flutter Unit 周边\n\n- 🔥  [实体书 - 《Flutter之旅》源码下载地址 ](https://gitee.com/toly1994328/FlutterUnit/attach_files/466731/download)\n- 🔥  [掘金小册 -《Flutter绘制指南》](https://juejin.im/book/6844733827265331214)\n- 🔥  [Flutter环境配置](https://github.com/toly1994328/FlutterUnit/issues/22)\n- 🔥  [Flutter实用插件集录 ](https://github.com/toly1994328/FlutterUnit/issues/41)\n- 🔥  [Flutter要点集录 ](https://github.com/toly1994328/FlutterUnit/labels/point)\n\n<!--more-->\n\n### FlutterUnit 下载体验: 复制链接，在浏览器下载~\n\n\n| 平台类型 | 下载地址 | 项目分支地址  | 相关文章 | \n|------|------------|------|------------|\n| Android版 | http://toly1994.com/file/FlutterUnit.apk |[flutter_unit](https://github.com/toly1994328/FlutterUnit)| [《FlutterUnit食用指南》](https://juejin.im/post/6844904147045597191)|\n| iOS版 | 暂未提供，可自己下载项目运行 |[flutter_unit](https://github.com/toly1994328/FlutterUnit)| [《FlutterUnit 食用指南》](https://juejin.im/post/6844904147045597191)|\n| MacOS版 | http://toly1994.com/file/flutter_unit_mac.zip |[flutter_unit_desk](https://github.com/toly1994328/FlutterUnit/tree/flutter_unit_desk)| [《mac版闪亮登场》](https://juejin.im/post/6844904147817332743)|\n| Windows版 |http://toly1994.com/file/FlutterUnitWin.zip  | [flutter_unit_desk](https://github.com/toly1994328/FlutterUnit/tree/flutter_unit_desk) | [《win版闪亮登场》](https://juejin.im/post/6847902222626488327)|\n| Web版 | http://toly1994328.gitee.io/flutter_web | [ flutter_unit_web ](https://github.com/toly1994328/FlutterUnit/tree/flutter_unit_web)  | [《web版闪亮登场》](https://juejin.im/post/6859888713980182541)|\n\n---\n\n> 当前Flutter 版本\n\n```\nFlutter 2.0.1 • channel stable • https://github.com/flutter/flutter.git\nFramework • revision c5a4b4029c (7 days ago) • 2021-03-04 09:47:48 -0800\nEngine • revision 40441def69\nTools • Dart 2.12.0\n```\n\n---\n\n\n### 一、组件的展示页面\n\n#### 1. `300+组件收录`\n\n> Flutter源码中的可用的组件一共350个左右，纷繁复杂，也没有明确的分类标准\nFlutterUnit 对`大大小小，常用不常用`的组件能收的尽量收录。并`根据个人感觉进行评星 `\n`目前收录组件306个`，每个都有至少一个演示展现和代码展示。\n\n| . | . | . |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/14/17175af35f63c8fb?w=1080&h=2340&f=jpeg&s=158267)|  ![](https://user-gold-cdn.xitu.io/2020/4/14/17175b0c1c92a004?w=1080&h=2340&f=jpeg&s=161619)|     ![](https://user-gold-cdn.xitu.io/2020/4/14/17175b0a95d5c549?w=1080&h=2340&f=jpeg&s=150406)       |\n|  ![](https://user-gold-cdn.xitu.io/2020/4/14/17175af9b09f76f6?w=1080&h=2340&f=jpeg&s=153575)   | ![](https://user-gold-cdn.xitu.io/2020/4/14/17175b0766ed455b?w=1080&h=2340&f=jpeg&s=166128)        |![](https://user-gold-cdn.xitu.io/2020/4/14/17175af6b9523083?w=1080&h=2340&f=jpeg&s=163290)      |\n\n\n---\n\n#### 2. 组件详情页\n\n> `213个组件`全部都有详情页。对于重要的组件会详细展现\n一般都会有某个演示对应的组件和属性,尽量做到细致，如果有需要补充，欢迎联系我。\n`最重要的是: 所有的演示展现都是Flutter的组件形成的，而非图片，这就意味着可操作性更高。`\n\n| . | . | . |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/14/17175c3f21476fc5?w=1080&h=2340&f=jpeg&s=67728)| ![](https://user-gold-cdn.xitu.io/2020/4/14/17175c44a1cfa94c?w=1080&h=2340&f=jpeg&s=92664)|    ![](https://user-gold-cdn.xitu.io/2020/4/14/17175c4a7cd90126?w=1080&h=2340&f=jpeg&s=114306) |\n|  ![](https://user-gold-cdn.xitu.io/2020/4/14/17175c5171d0373f?w=1080&h=2340&f=jpeg&s=159437)  | ![](https://user-gold-cdn.xitu.io/2020/4/14/17175c56ce136676?w=1080&h=2340&f=jpeg&s=87311)       |![](https://user-gold-cdn.xitu.io/2020/4/14/17175c61623c6462?w=1080&h=2340&f=jpeg&s=108215)|\n\n\n\n\n\n---\n\n#### 3. 组件的可操作性\n\n> 对一些操作交互的组件或有可操作性的某些组件，`提供操作演示`\n\n| . | . | . |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/14/17175df98f83e05c?w=362&h=724&f=gif&s=1061771)| ![](https://user-gold-cdn.xitu.io/2020/4/14/17175dcce9022ddc?w=362&h=724&f=gif&s=232124)|   ![](https://user-gold-cdn.xitu.io/2020/4/14/17175de9b348a26a?w=362&h=724&f=gif&s=946647)|\n\n---\n\n#### 4. 相关组件的关联切换\n> `相关组件通过link to 可以进行切换, 满足你的探索欲。`\n如果有的关联未加入，欢迎联系我，对我来说，加个数字就行了。\n\n![](https://user-gold-cdn.xitu.io/2020/4/14/17175ea0ea610669?w=610&h=226&f=png&s=37961)\n\n| . | . | . |\n|------|------------|------------|\n|![](https://user-gold-cdn.xitu.io/2020/4/14/17175e8c2a46e1f3?w=362&h=724&f=gif&s=471182)|![](https://user-gold-cdn.xitu.io/2020/4/14/17175e921dfc5c81?w=362&h=724&f=gif&s=658708)|   ![](https://user-gold-cdn.xitu.io/2020/4/14/17175e968c4f68e4?w=362&h=724&f=gif&s=300803)|\n\n---\n\n#### 5. 代码的查看和分享\n> 激动人心的是，你可以通过右侧的图标`展开/隐藏 实现下面效果的代码`\n并且`支持分享`，如果你想亲自体验，so，easy ! 而且`代码高亮样式可以自定义`。\n\n| . | . | . |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/14/171760369b9ae9d6?w=362&h=724&f=gif&s=1207409)| ![](https://user-gold-cdn.xitu.io/2020/4/14/1717603ad9119f2a?w=362&h=724&f=gif&s=1064037)|   ![](https://user-gold-cdn.xitu.io/2020/4/14/1717604b10154271?w=362&h=724&f=gif&s=2849830)|\n\n\n---\n\n\n### 二、全局配置\n\n#### 1. 颜色主题\n> 只提供八种颜色，可在`右滑菜单页`的`我的主题`配置,`可以拓展`\n\n| . | . | . |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/14/171760c51633383d?w=1080&h=2340&f=jpeg&s=94977)| ![](https://user-gold-cdn.xitu.io/2020/4/14/171760cbc7d0ddba?w=1080&h=2340&f=jpeg&s=89001) |    ![](https://user-gold-cdn.xitu.io/2020/4/14/171760b8c24c188f?w=1080&h=2340&f=jpeg&s=168263) |\n\n\n\n---\n\n\n#### 2.字体配置\n\n> 支持全局字体设置,`可以拓展`\n\n| . | . | . |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/14/1717615741f8d2e3?w=1080&h=2340&f=png&s=167438)| ![](https://user-gold-cdn.xitu.io/2020/4/14/171761667bbf6051?w=1080&h=2340&f=png&s=808002) |   ![](https://user-gold-cdn.xitu.io/2020/4/14/1717617b8ab59421?w=1080&h=2340&f=png&s=796618)|\n\n---\n\n\n#### 3.item样式设置\n\n> 支持item样式设置，`可以拓展，支持征集`，详见`Flutter Unit 1.0 征集方案`\n\n| . | . | . |\n|------|------------|------------|\n|![](https://user-gold-cdn.xitu.io/2020/4/14/1717620037fd9a50?w=1080&h=2340&f=jpeg&s=105051)| ![](https://user-gold-cdn.xitu.io/2020/4/14/1717620161fa89ec?w=1080&h=2340&f=jpeg&s=158327)| ![](https://user-gold-cdn.xitu.io/2020/4/14/171762026eb8656d?w=1080&h=2340&f=jpeg&s=146688)|\n\n---\n\n#### 4.代码面板风格设置\n\n> 支持代码风格设置，`可以拓展，支持征集`，详见`Flutter Unit 1.0 征集方案`\n\n| . | . |\n|------|------------|\n|![](https://user-gold-cdn.xitu.io/2020/4/14/1717628b5fe1591c?w=1080&h=759&f=png&s=105023)| ![](https://user-gold-cdn.xitu.io/2020/4/14/1717629001ade9b0?w=1080&h=773&f=png&s=102672)|\n\n---\n\n\n\n### 三、搜索与收藏功能\n\n\n#### 1.搜索功能\n\n> 由于Flutter中Widget比较杂乱，不太好分类，所以搜索是非常重要的\n另外可以根据星级进行过滤，支持多选。目前正在考虑根据功能分类，之后会有所完善。\n\n\n| . | . | . |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/14/171775fc594e4605?w=1080&h=2340&f=png&s=265281)| ![](https://user-gold-cdn.xitu.io/2020/4/14/171775fd99268a78?w=1080&h=2340&f=png&s=424599)|    ![](https://user-gold-cdn.xitu.io/2020/4/14/171775fefef50fb9?w=1080&h=2340&f=png&s=414437) |\n\n---\n\n#### 2.收藏功能\n\n| 添加收藏集 | 修改收藏集 | 删除收藏集 |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/23/171a7baf50b2d9f5?w=288&h=576&f=gif&s=447423)  | ![](https://user-gold-cdn.xitu.io/2020/4/23/171a7be9b43874ce?w=288&h=576&f=gif&s=881222)    | ![](https://user-gold-cdn.xitu.io/2020/4/23/171a7bfec06a2bb8?w=288&h=576&f=gif&s=837022)       | \n\n| 长按左菜单滑页 | 长按右菜单滑页 | 详情内长按展示收藏菜单 |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/24/171a7c73230f803d?w=288&h=576&f=gif&s=563981) |![](https://user-gold-cdn.xitu.io/2020/4/24/171a7c7cb0780bc6?w=288&h=576&f=gif&s=628105)        | ![](https://user-gold-cdn.xitu.io/2020/4/23/171a7a6fa57e3c6f?w=288&h=576&f=gif&s=448572)       |\n\n| 删除与数据同步 | 组件加入收藏集 | 收藏集支持多选 |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/23/171a76fd06702dda?w=288&h=576&f=gif&s=885232)  | ![](https://user-gold-cdn.xitu.io/2020/4/23/171a773c1bfd5153?w=288&h=576&f=gif&s=887426)        | ![](https://user-gold-cdn.xitu.io/2020/4/23/171a7c36021a18f9?w=288&h=576&f=gif&s=714061)   |\n\n> `FlutterUnit 1.0 `目前基本就是这么多功能，可以在Github中下载打包后的apk玩玩\n希望能对你的Flutter学习有所帮助。\n\n---\n\n#### 3.关于我与项目\n> 不多说，都在图里。\n\n| . | . | . |\n|------|------------|------------|\n|![](https://user-gold-cdn.xitu.io/2020/4/14/171777c67ed0c205?w=1080&h=2340&f=png&s=1272888)|![](https://user-gold-cdn.xitu.io/2020/4/14/171777c8ccfce16b?w=1080&h=2340&f=png&s=1105006)|     ![](https://user-gold-cdn.xitu.io/2020/4/14/171777caed85b26a?w=1080&h=2340&f=png&s=1190414)\n|\n\n","source":"_posts/FlutterGO.md","raw":"---\ntitle: FlutterGo\ndate: 2017-04-14 01:59:51\ntags: [脚本语言,编程,程序设计,思考总结,前端,效率]\ncategories: [脚本语言,编程,程序设计,思考总结,前端,效率]\ndescription: 这只是一个语言描述的测试\ntoc: true\n---\n\n#### Flutter Unit 周边\n\n- 🔥  [实体书 - 《Flutter之旅》源码下载地址 ](https://gitee.com/toly1994328/FlutterUnit/attach_files/466731/download)\n- 🔥  [掘金小册 -《Flutter绘制指南》](https://juejin.im/book/6844733827265331214)\n- 🔥  [Flutter环境配置](https://github.com/toly1994328/FlutterUnit/issues/22)\n- 🔥  [Flutter实用插件集录 ](https://github.com/toly1994328/FlutterUnit/issues/41)\n- 🔥  [Flutter要点集录 ](https://github.com/toly1994328/FlutterUnit/labels/point)\n\n<!--more-->\n\n### FlutterUnit 下载体验: 复制链接，在浏览器下载~\n\n\n| 平台类型 | 下载地址 | 项目分支地址  | 相关文章 | \n|------|------------|------|------------|\n| Android版 | http://toly1994.com/file/FlutterUnit.apk |[flutter_unit](https://github.com/toly1994328/FlutterUnit)| [《FlutterUnit食用指南》](https://juejin.im/post/6844904147045597191)|\n| iOS版 | 暂未提供，可自己下载项目运行 |[flutter_unit](https://github.com/toly1994328/FlutterUnit)| [《FlutterUnit 食用指南》](https://juejin.im/post/6844904147045597191)|\n| MacOS版 | http://toly1994.com/file/flutter_unit_mac.zip |[flutter_unit_desk](https://github.com/toly1994328/FlutterUnit/tree/flutter_unit_desk)| [《mac版闪亮登场》](https://juejin.im/post/6844904147817332743)|\n| Windows版 |http://toly1994.com/file/FlutterUnitWin.zip  | [flutter_unit_desk](https://github.com/toly1994328/FlutterUnit/tree/flutter_unit_desk) | [《win版闪亮登场》](https://juejin.im/post/6847902222626488327)|\n| Web版 | http://toly1994328.gitee.io/flutter_web | [ flutter_unit_web ](https://github.com/toly1994328/FlutterUnit/tree/flutter_unit_web)  | [《web版闪亮登场》](https://juejin.im/post/6859888713980182541)|\n\n---\n\n> 当前Flutter 版本\n\n```\nFlutter 2.0.1 • channel stable • https://github.com/flutter/flutter.git\nFramework • revision c5a4b4029c (7 days ago) • 2021-03-04 09:47:48 -0800\nEngine • revision 40441def69\nTools • Dart 2.12.0\n```\n\n---\n\n\n### 一、组件的展示页面\n\n#### 1. `300+组件收录`\n\n> Flutter源码中的可用的组件一共350个左右，纷繁复杂，也没有明确的分类标准\nFlutterUnit 对`大大小小，常用不常用`的组件能收的尽量收录。并`根据个人感觉进行评星 `\n`目前收录组件306个`，每个都有至少一个演示展现和代码展示。\n\n| . | . | . |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/14/17175af35f63c8fb?w=1080&h=2340&f=jpeg&s=158267)|  ![](https://user-gold-cdn.xitu.io/2020/4/14/17175b0c1c92a004?w=1080&h=2340&f=jpeg&s=161619)|     ![](https://user-gold-cdn.xitu.io/2020/4/14/17175b0a95d5c549?w=1080&h=2340&f=jpeg&s=150406)       |\n|  ![](https://user-gold-cdn.xitu.io/2020/4/14/17175af9b09f76f6?w=1080&h=2340&f=jpeg&s=153575)   | ![](https://user-gold-cdn.xitu.io/2020/4/14/17175b0766ed455b?w=1080&h=2340&f=jpeg&s=166128)        |![](https://user-gold-cdn.xitu.io/2020/4/14/17175af6b9523083?w=1080&h=2340&f=jpeg&s=163290)      |\n\n\n---\n\n#### 2. 组件详情页\n\n> `213个组件`全部都有详情页。对于重要的组件会详细展现\n一般都会有某个演示对应的组件和属性,尽量做到细致，如果有需要补充，欢迎联系我。\n`最重要的是: 所有的演示展现都是Flutter的组件形成的，而非图片，这就意味着可操作性更高。`\n\n| . | . | . |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/14/17175c3f21476fc5?w=1080&h=2340&f=jpeg&s=67728)| ![](https://user-gold-cdn.xitu.io/2020/4/14/17175c44a1cfa94c?w=1080&h=2340&f=jpeg&s=92664)|    ![](https://user-gold-cdn.xitu.io/2020/4/14/17175c4a7cd90126?w=1080&h=2340&f=jpeg&s=114306) |\n|  ![](https://user-gold-cdn.xitu.io/2020/4/14/17175c5171d0373f?w=1080&h=2340&f=jpeg&s=159437)  | ![](https://user-gold-cdn.xitu.io/2020/4/14/17175c56ce136676?w=1080&h=2340&f=jpeg&s=87311)       |![](https://user-gold-cdn.xitu.io/2020/4/14/17175c61623c6462?w=1080&h=2340&f=jpeg&s=108215)|\n\n\n\n\n\n---\n\n#### 3. 组件的可操作性\n\n> 对一些操作交互的组件或有可操作性的某些组件，`提供操作演示`\n\n| . | . | . |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/14/17175df98f83e05c?w=362&h=724&f=gif&s=1061771)| ![](https://user-gold-cdn.xitu.io/2020/4/14/17175dcce9022ddc?w=362&h=724&f=gif&s=232124)|   ![](https://user-gold-cdn.xitu.io/2020/4/14/17175de9b348a26a?w=362&h=724&f=gif&s=946647)|\n\n---\n\n#### 4. 相关组件的关联切换\n> `相关组件通过link to 可以进行切换, 满足你的探索欲。`\n如果有的关联未加入，欢迎联系我，对我来说，加个数字就行了。\n\n![](https://user-gold-cdn.xitu.io/2020/4/14/17175ea0ea610669?w=610&h=226&f=png&s=37961)\n\n| . | . | . |\n|------|------------|------------|\n|![](https://user-gold-cdn.xitu.io/2020/4/14/17175e8c2a46e1f3?w=362&h=724&f=gif&s=471182)|![](https://user-gold-cdn.xitu.io/2020/4/14/17175e921dfc5c81?w=362&h=724&f=gif&s=658708)|   ![](https://user-gold-cdn.xitu.io/2020/4/14/17175e968c4f68e4?w=362&h=724&f=gif&s=300803)|\n\n---\n\n#### 5. 代码的查看和分享\n> 激动人心的是，你可以通过右侧的图标`展开/隐藏 实现下面效果的代码`\n并且`支持分享`，如果你想亲自体验，so，easy ! 而且`代码高亮样式可以自定义`。\n\n| . | . | . |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/14/171760369b9ae9d6?w=362&h=724&f=gif&s=1207409)| ![](https://user-gold-cdn.xitu.io/2020/4/14/1717603ad9119f2a?w=362&h=724&f=gif&s=1064037)|   ![](https://user-gold-cdn.xitu.io/2020/4/14/1717604b10154271?w=362&h=724&f=gif&s=2849830)|\n\n\n---\n\n\n### 二、全局配置\n\n#### 1. 颜色主题\n> 只提供八种颜色，可在`右滑菜单页`的`我的主题`配置,`可以拓展`\n\n| . | . | . |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/14/171760c51633383d?w=1080&h=2340&f=jpeg&s=94977)| ![](https://user-gold-cdn.xitu.io/2020/4/14/171760cbc7d0ddba?w=1080&h=2340&f=jpeg&s=89001) |    ![](https://user-gold-cdn.xitu.io/2020/4/14/171760b8c24c188f?w=1080&h=2340&f=jpeg&s=168263) |\n\n\n\n---\n\n\n#### 2.字体配置\n\n> 支持全局字体设置,`可以拓展`\n\n| . | . | . |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/14/1717615741f8d2e3?w=1080&h=2340&f=png&s=167438)| ![](https://user-gold-cdn.xitu.io/2020/4/14/171761667bbf6051?w=1080&h=2340&f=png&s=808002) |   ![](https://user-gold-cdn.xitu.io/2020/4/14/1717617b8ab59421?w=1080&h=2340&f=png&s=796618)|\n\n---\n\n\n#### 3.item样式设置\n\n> 支持item样式设置，`可以拓展，支持征集`，详见`Flutter Unit 1.0 征集方案`\n\n| . | . | . |\n|------|------------|------------|\n|![](https://user-gold-cdn.xitu.io/2020/4/14/1717620037fd9a50?w=1080&h=2340&f=jpeg&s=105051)| ![](https://user-gold-cdn.xitu.io/2020/4/14/1717620161fa89ec?w=1080&h=2340&f=jpeg&s=158327)| ![](https://user-gold-cdn.xitu.io/2020/4/14/171762026eb8656d?w=1080&h=2340&f=jpeg&s=146688)|\n\n---\n\n#### 4.代码面板风格设置\n\n> 支持代码风格设置，`可以拓展，支持征集`，详见`Flutter Unit 1.0 征集方案`\n\n| . | . |\n|------|------------|\n|![](https://user-gold-cdn.xitu.io/2020/4/14/1717628b5fe1591c?w=1080&h=759&f=png&s=105023)| ![](https://user-gold-cdn.xitu.io/2020/4/14/1717629001ade9b0?w=1080&h=773&f=png&s=102672)|\n\n---\n\n\n\n### 三、搜索与收藏功能\n\n\n#### 1.搜索功能\n\n> 由于Flutter中Widget比较杂乱，不太好分类，所以搜索是非常重要的\n另外可以根据星级进行过滤，支持多选。目前正在考虑根据功能分类，之后会有所完善。\n\n\n| . | . | . |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/14/171775fc594e4605?w=1080&h=2340&f=png&s=265281)| ![](https://user-gold-cdn.xitu.io/2020/4/14/171775fd99268a78?w=1080&h=2340&f=png&s=424599)|    ![](https://user-gold-cdn.xitu.io/2020/4/14/171775fefef50fb9?w=1080&h=2340&f=png&s=414437) |\n\n---\n\n#### 2.收藏功能\n\n| 添加收藏集 | 修改收藏集 | 删除收藏集 |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/23/171a7baf50b2d9f5?w=288&h=576&f=gif&s=447423)  | ![](https://user-gold-cdn.xitu.io/2020/4/23/171a7be9b43874ce?w=288&h=576&f=gif&s=881222)    | ![](https://user-gold-cdn.xitu.io/2020/4/23/171a7bfec06a2bb8?w=288&h=576&f=gif&s=837022)       | \n\n| 长按左菜单滑页 | 长按右菜单滑页 | 详情内长按展示收藏菜单 |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/24/171a7c73230f803d?w=288&h=576&f=gif&s=563981) |![](https://user-gold-cdn.xitu.io/2020/4/24/171a7c7cb0780bc6?w=288&h=576&f=gif&s=628105)        | ![](https://user-gold-cdn.xitu.io/2020/4/23/171a7a6fa57e3c6f?w=288&h=576&f=gif&s=448572)       |\n\n| 删除与数据同步 | 组件加入收藏集 | 收藏集支持多选 |\n|------|------------|------------|\n| ![](https://user-gold-cdn.xitu.io/2020/4/23/171a76fd06702dda?w=288&h=576&f=gif&s=885232)  | ![](https://user-gold-cdn.xitu.io/2020/4/23/171a773c1bfd5153?w=288&h=576&f=gif&s=887426)        | ![](https://user-gold-cdn.xitu.io/2020/4/23/171a7c36021a18f9?w=288&h=576&f=gif&s=714061)   |\n\n> `FlutterUnit 1.0 `目前基本就是这么多功能，可以在Github中下载打包后的apk玩玩\n希望能对你的Flutter学习有所帮助。\n\n---\n\n#### 3.关于我与项目\n> 不多说，都在图里。\n\n| . | . | . |\n|------|------------|------------|\n|![](https://user-gold-cdn.xitu.io/2020/4/14/171777c67ed0c205?w=1080&h=2340&f=png&s=1272888)|![](https://user-gold-cdn.xitu.io/2020/4/14/171777c8ccfce16b?w=1080&h=2340&f=png&s=1105006)|     ![](https://user-gold-cdn.xitu.io/2020/4/14/171777caed85b26a?w=1080&h=2340&f=png&s=1190414)\n|\n\n","slug":"FlutterGO","published":1,"updated":"2021-04-25T13:07:49.313Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cko4wk0y500010vxa6a2i0olz","content":"<h4 id=\"Flutter-Unit-周边\">Flutter Unit 周边</h4>\n<ul>\n<li>🔥  <a href=\"https://gitee.com/toly1994328/FlutterUnit/attach_files/466731/download\">实体书 - 《Flutter之旅》源码下载地址 </a></li>\n<li>🔥  <a href=\"https://juejin.im/book/6844733827265331214\">掘金小册 -《Flutter绘制指南》</a></li>\n<li>🔥  <a href=\"https://github.com/toly1994328/FlutterUnit/issues/22\">Flutter环境配置</a></li>\n<li>🔥  <a href=\"https://github.com/toly1994328/FlutterUnit/issues/41\">Flutter实用插件集录 </a></li>\n<li>🔥  <a href=\"https://github.com/toly1994328/FlutterUnit/labels/point\">Flutter要点集录 </a></li>\n</ul>\n<span id=\"more\"></span>\n<h3 id=\"FlutterUnit-下载体验-复制链接，在浏览器下载\">FlutterUnit 下载体验: 复制链接，在浏览器下载~</h3>\n<table>\n<thead>\n<tr>\n<th>平台类型</th>\n<th>下载地址</th>\n<th>项目分支地址</th>\n<th>相关文章</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Android版</td>\n<td><a href=\"http://toly1994.com/file/FlutterUnit.apk\">http://toly1994.com/file/FlutterUnit.apk</a></td>\n<td><a href=\"https://github.com/toly1994328/FlutterUnit\">flutter_unit</a></td>\n<td><a href=\"https://juejin.im/post/6844904147045597191\">《FlutterUnit食用指南》</a></td>\n</tr>\n<tr>\n<td>iOS版</td>\n<td>暂未提供，可自己下载项目运行</td>\n<td><a href=\"https://github.com/toly1994328/FlutterUnit\">flutter_unit</a></td>\n<td><a href=\"https://juejin.im/post/6844904147045597191\">《FlutterUnit 食用指南》</a></td>\n</tr>\n<tr>\n<td>MacOS版</td>\n<td><a href=\"http://toly1994.com/file/flutter_unit_mac.zip\">http://toly1994.com/file/flutter_unit_mac.zip</a></td>\n<td><a href=\"https://github.com/toly1994328/FlutterUnit/tree/flutter_unit_desk\">flutter_unit_desk</a></td>\n<td><a href=\"https://juejin.im/post/6844904147817332743\">《mac版闪亮登场》</a></td>\n</tr>\n<tr>\n<td>Windows版</td>\n<td><a href=\"http://toly1994.com/file/FlutterUnitWin.zip\">http://toly1994.com/file/FlutterUnitWin.zip</a></td>\n<td><a href=\"https://github.com/toly1994328/FlutterUnit/tree/flutter_unit_desk\">flutter_unit_desk</a></td>\n<td><a href=\"https://juejin.im/post/6847902222626488327\">《win版闪亮登场》</a></td>\n</tr>\n<tr>\n<td>Web版</td>\n<td><a href=\"http://toly1994328.gitee.io/flutter_web\">http://toly1994328.gitee.io/flutter_web</a></td>\n<td><a href=\"https://github.com/toly1994328/FlutterUnit/tree/flutter_unit_web\"> flutter_unit_web </a></td>\n<td><a href=\"https://juejin.im/post/6859888713980182541\">《web版闪亮登场》</a></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<blockquote>\n<p>当前Flutter 版本</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre class=\"line-numbers language-hljs plain\"><code class=\"language-hljs plain\">Flutter 2.0.1 • channel stable • https:&#x2F;&#x2F;github.com&#x2F;flutter&#x2F;flutter.git<br>Framework • revision c5a4b4029c (7 days ago) • 2021-03-04 09:47:48 -0800<br>Engine • revision 40441def69<br>Tools • Dart 2.12.0<br><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"一、组件的展示页面\">一、组件的展示页面</h3>\n<h4 id=\"1-300-组件收录\">1. <code>300+组件收录</code></h4>\n<blockquote>\n<p>Flutter源码中的可用的组件一共350个左右，纷繁复杂，也没有明确的分类标准<br>\nFlutterUnit 对<code>大大小小，常用不常用</code>的组件能收的尽量收录。并<code>根据个人感觉进行评星 </code><br>\n<code>目前收录组件306个</code>，每个都有至少一个演示展现和代码展示。</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175af35f63c8fb?w=1080&amp;h=2340&amp;f=jpeg&amp;s=158267\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175b0c1c92a004?w=1080&amp;h=2340&amp;f=jpeg&amp;s=161619\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175b0a95d5c549?w=1080&amp;h=2340&amp;f=jpeg&amp;s=150406\" alt=\"\"></td>\n</tr>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175af9b09f76f6?w=1080&amp;h=2340&amp;f=jpeg&amp;s=153575\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175b0766ed455b?w=1080&amp;h=2340&amp;f=jpeg&amp;s=166128\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175af6b9523083?w=1080&amp;h=2340&amp;f=jpeg&amp;s=163290\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"2-组件详情页\">2. 组件详情页</h4>\n<blockquote>\n<p><code>213个组件</code>全部都有详情页。对于重要的组件会详细展现<br>\n一般都会有某个演示对应的组件和属性,尽量做到细致，如果有需要补充，欢迎联系我。<br>\n<code>最重要的是: 所有的演示展现都是Flutter的组件形成的，而非图片，这就意味着可操作性更高。</code></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175c3f21476fc5?w=1080&amp;h=2340&amp;f=jpeg&amp;s=67728\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175c44a1cfa94c?w=1080&amp;h=2340&amp;f=jpeg&amp;s=92664\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175c4a7cd90126?w=1080&amp;h=2340&amp;f=jpeg&amp;s=114306\" alt=\"\"></td>\n</tr>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175c5171d0373f?w=1080&amp;h=2340&amp;f=jpeg&amp;s=159437\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175c56ce136676?w=1080&amp;h=2340&amp;f=jpeg&amp;s=87311\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175c61623c6462?w=1080&amp;h=2340&amp;f=jpeg&amp;s=108215\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"3-组件的可操作性\">3. 组件的可操作性</h4>\n<blockquote>\n<p>对一些操作交互的组件或有可操作性的某些组件，<code>提供操作演示</code></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175df98f83e05c?w=362&amp;h=724&amp;f=gif&amp;s=1061771\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175dcce9022ddc?w=362&amp;h=724&amp;f=gif&amp;s=232124\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175de9b348a26a?w=362&amp;h=724&amp;f=gif&amp;s=946647\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"4-相关组件的关联切换\">4. 相关组件的关联切换</h4>\n<blockquote>\n<p><code>相关组件通过link to 可以进行切换, 满足你的探索欲。</code><br>\n如果有的关联未加入，欢迎联系我，对我来说，加个数字就行了。</p>\n</blockquote>\n<p><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175ea0ea610669?w=610&amp;h=226&amp;f=png&amp;s=37961\" alt=\"\"></p>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175e8c2a46e1f3?w=362&amp;h=724&amp;f=gif&amp;s=471182\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175e921dfc5c81?w=362&amp;h=724&amp;f=gif&amp;s=658708\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175e968c4f68e4?w=362&amp;h=724&amp;f=gif&amp;s=300803\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"5-代码的查看和分享\">5. 代码的查看和分享</h4>\n<blockquote>\n<p>激动人心的是，你可以通过右侧的图标<code>展开/隐藏 实现下面效果的代码</code><br>\n并且<code>支持分享</code>，如果你想亲自体验，so，easy ! 而且<code>代码高亮样式可以自定义</code>。</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171760369b9ae9d6?w=362&amp;h=724&amp;f=gif&amp;s=1207409\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/1717603ad9119f2a?w=362&amp;h=724&amp;f=gif&amp;s=1064037\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/1717604b10154271?w=362&amp;h=724&amp;f=gif&amp;s=2849830\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3 id=\"二、全局配置\">二、全局配置</h3>\n<h4 id=\"1-颜色主题\">1. 颜色主题</h4>\n<blockquote>\n<p>只提供八种颜色，可在<code>右滑菜单页</code>的<code>我的主题</code>配置,<code>可以拓展</code></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171760c51633383d?w=1080&amp;h=2340&amp;f=jpeg&amp;s=94977\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171760cbc7d0ddba?w=1080&amp;h=2340&amp;f=jpeg&amp;s=89001\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171760b8c24c188f?w=1080&amp;h=2340&amp;f=jpeg&amp;s=168263\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"2-字体配置\">2.字体配置</h4>\n<blockquote>\n<p>支持全局字体设置,<code>可以拓展</code></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/1717615741f8d2e3?w=1080&amp;h=2340&amp;f=png&amp;s=167438\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171761667bbf6051?w=1080&amp;h=2340&amp;f=png&amp;s=808002\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/1717617b8ab59421?w=1080&amp;h=2340&amp;f=png&amp;s=796618\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"3-item样式设置\">3.item样式设置</h4>\n<blockquote>\n<p>支持item样式设置，<code>可以拓展，支持征集</code>，详见<code>Flutter Unit 1.0 征集方案</code></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/1717620037fd9a50?w=1080&amp;h=2340&amp;f=jpeg&amp;s=105051\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/1717620161fa89ec?w=1080&amp;h=2340&amp;f=jpeg&amp;s=158327\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171762026eb8656d?w=1080&amp;h=2340&amp;f=jpeg&amp;s=146688\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"4-代码面板风格设置\">4.代码面板风格设置</h4>\n<blockquote>\n<p>支持代码风格设置，<code>可以拓展，支持征集</code>，详见<code>Flutter Unit 1.0 征集方案</code></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/1717628b5fe1591c?w=1080&amp;h=759&amp;f=png&amp;s=105023\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/1717629001ade9b0?w=1080&amp;h=773&amp;f=png&amp;s=102672\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3 id=\"三、搜索与收藏功能\">三、搜索与收藏功能</h3>\n<h4 id=\"1-搜索功能\">1.搜索功能</h4>\n<blockquote>\n<p>由于Flutter中Widget比较杂乱，不太好分类，所以搜索是非常重要的<br>\n另外可以根据星级进行过滤，支持多选。目前正在考虑根据功能分类，之后会有所完善。</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171775fc594e4605?w=1080&amp;h=2340&amp;f=png&amp;s=265281\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171775fd99268a78?w=1080&amp;h=2340&amp;f=png&amp;s=424599\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171775fefef50fb9?w=1080&amp;h=2340&amp;f=png&amp;s=414437\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"2-收藏功能\">2.收藏功能</h4>\n<table>\n<thead>\n<tr>\n<th>添加收藏集</th>\n<th>修改收藏集</th>\n<th>删除收藏集</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/23/171a7baf50b2d9f5?w=288&amp;h=576&amp;f=gif&amp;s=447423\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/23/171a7be9b43874ce?w=288&amp;h=576&amp;f=gif&amp;s=881222\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/23/171a7bfec06a2bb8?w=288&amp;h=576&amp;f=gif&amp;s=837022\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>长按左菜单滑页</th>\n<th>长按右菜单滑页</th>\n<th>详情内长按展示收藏菜单</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/24/171a7c73230f803d?w=288&amp;h=576&amp;f=gif&amp;s=563981\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/24/171a7c7cb0780bc6?w=288&amp;h=576&amp;f=gif&amp;s=628105\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/23/171a7a6fa57e3c6f?w=288&amp;h=576&amp;f=gif&amp;s=448572\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>删除与数据同步</th>\n<th>组件加入收藏集</th>\n<th>收藏集支持多选</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/23/171a76fd06702dda?w=288&amp;h=576&amp;f=gif&amp;s=885232\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/23/171a773c1bfd5153?w=288&amp;h=576&amp;f=gif&amp;s=887426\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/23/171a7c36021a18f9?w=288&amp;h=576&amp;f=gif&amp;s=714061\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p><code>FlutterUnit 1.0 </code>目前基本就是这么多功能，可以在Github中下载打包后的apk玩玩<br>\n希望能对你的Flutter学习有所帮助。</p>\n</blockquote>\n<hr>\n<h4 id=\"3-关于我与项目\">3.关于我与项目</h4>\n<blockquote>\n<p>不多说，都在图里。</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171777c67ed0c205?w=1080&amp;h=2340&amp;f=png&amp;s=1272888\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171777c8ccfce16b?w=1080&amp;h=2340&amp;f=png&amp;s=1105006\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171777caed85b26a?w=1080&amp;h=2340&amp;f=png&amp;s=1190414\" alt=\"\"></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n","site":{"data":{}},"excerpt":"<h4 id=\"Flutter-Unit-周边\">Flutter Unit 周边</h4>\n<ul>\n<li>🔥  <a href=\"https://gitee.com/toly1994328/FlutterUnit/attach_files/466731/download\">实体书 - 《Flutter之旅》源码下载地址 </a></li>\n<li>🔥  <a href=\"https://juejin.im/book/6844733827265331214\">掘金小册 -《Flutter绘制指南》</a></li>\n<li>🔥  <a href=\"https://github.com/toly1994328/FlutterUnit/issues/22\">Flutter环境配置</a></li>\n<li>🔥  <a href=\"https://github.com/toly1994328/FlutterUnit/issues/41\">Flutter实用插件集录 </a></li>\n<li>🔥  <a href=\"https://github.com/toly1994328/FlutterUnit/labels/point\">Flutter要点集录 </a></li>\n</ul>","more":"<h3 id=\"FlutterUnit-下载体验-复制链接，在浏览器下载\">FlutterUnit 下载体验: 复制链接，在浏览器下载~</h3>\n<table>\n<thead>\n<tr>\n<th>平台类型</th>\n<th>下载地址</th>\n<th>项目分支地址</th>\n<th>相关文章</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Android版</td>\n<td><a href=\"http://toly1994.com/file/FlutterUnit.apk\">http://toly1994.com/file/FlutterUnit.apk</a></td>\n<td><a href=\"https://github.com/toly1994328/FlutterUnit\">flutter_unit</a></td>\n<td><a href=\"https://juejin.im/post/6844904147045597191\">《FlutterUnit食用指南》</a></td>\n</tr>\n<tr>\n<td>iOS版</td>\n<td>暂未提供，可自己下载项目运行</td>\n<td><a href=\"https://github.com/toly1994328/FlutterUnit\">flutter_unit</a></td>\n<td><a href=\"https://juejin.im/post/6844904147045597191\">《FlutterUnit 食用指南》</a></td>\n</tr>\n<tr>\n<td>MacOS版</td>\n<td><a href=\"http://toly1994.com/file/flutter_unit_mac.zip\">http://toly1994.com/file/flutter_unit_mac.zip</a></td>\n<td><a href=\"https://github.com/toly1994328/FlutterUnit/tree/flutter_unit_desk\">flutter_unit_desk</a></td>\n<td><a href=\"https://juejin.im/post/6844904147817332743\">《mac版闪亮登场》</a></td>\n</tr>\n<tr>\n<td>Windows版</td>\n<td><a href=\"http://toly1994.com/file/FlutterUnitWin.zip\">http://toly1994.com/file/FlutterUnitWin.zip</a></td>\n<td><a href=\"https://github.com/toly1994328/FlutterUnit/tree/flutter_unit_desk\">flutter_unit_desk</a></td>\n<td><a href=\"https://juejin.im/post/6847902222626488327\">《win版闪亮登场》</a></td>\n</tr>\n<tr>\n<td>Web版</td>\n<td><a href=\"http://toly1994328.gitee.io/flutter_web\">http://toly1994328.gitee.io/flutter_web</a></td>\n<td><a href=\"https://github.com/toly1994328/FlutterUnit/tree/flutter_unit_web\"> flutter_unit_web </a></td>\n<td><a href=\"https://juejin.im/post/6859888713980182541\">《web版闪亮登场》</a></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<blockquote>\n<p>当前Flutter 版本</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">Flutter 2.0.1 • channel stable • https:&#x2F;&#x2F;github.com&#x2F;flutter&#x2F;flutter.git<br>Framework • revision c5a4b4029c (7 days ago) • 2021-03-04 09:47:48 -0800<br>Engine • revision 40441def69<br>Tools • Dart 2.12.0<br></code></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"一、组件的展示页面\">一、组件的展示页面</h3>\n<h4 id=\"1-300-组件收录\">1. <code>300+组件收录</code></h4>\n<blockquote>\n<p>Flutter源码中的可用的组件一共350个左右，纷繁复杂，也没有明确的分类标准<br>\nFlutterUnit 对<code>大大小小，常用不常用</code>的组件能收的尽量收录。并<code>根据个人感觉进行评星 </code><br>\n<code>目前收录组件306个</code>，每个都有至少一个演示展现和代码展示。</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175af35f63c8fb?w=1080&amp;h=2340&amp;f=jpeg&amp;s=158267\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175b0c1c92a004?w=1080&amp;h=2340&amp;f=jpeg&amp;s=161619\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175b0a95d5c549?w=1080&amp;h=2340&amp;f=jpeg&amp;s=150406\" alt=\"\"></td>\n</tr>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175af9b09f76f6?w=1080&amp;h=2340&amp;f=jpeg&amp;s=153575\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175b0766ed455b?w=1080&amp;h=2340&amp;f=jpeg&amp;s=166128\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175af6b9523083?w=1080&amp;h=2340&amp;f=jpeg&amp;s=163290\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"2-组件详情页\">2. 组件详情页</h4>\n<blockquote>\n<p><code>213个组件</code>全部都有详情页。对于重要的组件会详细展现<br>\n一般都会有某个演示对应的组件和属性,尽量做到细致，如果有需要补充，欢迎联系我。<br>\n<code>最重要的是: 所有的演示展现都是Flutter的组件形成的，而非图片，这就意味着可操作性更高。</code></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175c3f21476fc5?w=1080&amp;h=2340&amp;f=jpeg&amp;s=67728\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175c44a1cfa94c?w=1080&amp;h=2340&amp;f=jpeg&amp;s=92664\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175c4a7cd90126?w=1080&amp;h=2340&amp;f=jpeg&amp;s=114306\" alt=\"\"></td>\n</tr>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175c5171d0373f?w=1080&amp;h=2340&amp;f=jpeg&amp;s=159437\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175c56ce136676?w=1080&amp;h=2340&amp;f=jpeg&amp;s=87311\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175c61623c6462?w=1080&amp;h=2340&amp;f=jpeg&amp;s=108215\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"3-组件的可操作性\">3. 组件的可操作性</h4>\n<blockquote>\n<p>对一些操作交互的组件或有可操作性的某些组件，<code>提供操作演示</code></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175df98f83e05c?w=362&amp;h=724&amp;f=gif&amp;s=1061771\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175dcce9022ddc?w=362&amp;h=724&amp;f=gif&amp;s=232124\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175de9b348a26a?w=362&amp;h=724&amp;f=gif&amp;s=946647\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"4-相关组件的关联切换\">4. 相关组件的关联切换</h4>\n<blockquote>\n<p><code>相关组件通过link to 可以进行切换, 满足你的探索欲。</code><br>\n如果有的关联未加入，欢迎联系我，对我来说，加个数字就行了。</p>\n</blockquote>\n<p><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175ea0ea610669?w=610&amp;h=226&amp;f=png&amp;s=37961\" alt=\"\"></p>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175e8c2a46e1f3?w=362&amp;h=724&amp;f=gif&amp;s=471182\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175e921dfc5c81?w=362&amp;h=724&amp;f=gif&amp;s=658708\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/17175e968c4f68e4?w=362&amp;h=724&amp;f=gif&amp;s=300803\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"5-代码的查看和分享\">5. 代码的查看和分享</h4>\n<blockquote>\n<p>激动人心的是，你可以通过右侧的图标<code>展开/隐藏 实现下面效果的代码</code><br>\n并且<code>支持分享</code>，如果你想亲自体验，so，easy ! 而且<code>代码高亮样式可以自定义</code>。</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171760369b9ae9d6?w=362&amp;h=724&amp;f=gif&amp;s=1207409\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/1717603ad9119f2a?w=362&amp;h=724&amp;f=gif&amp;s=1064037\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/1717604b10154271?w=362&amp;h=724&amp;f=gif&amp;s=2849830\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3 id=\"二、全局配置\">二、全局配置</h3>\n<h4 id=\"1-颜色主题\">1. 颜色主题</h4>\n<blockquote>\n<p>只提供八种颜色，可在<code>右滑菜单页</code>的<code>我的主题</code>配置,<code>可以拓展</code></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171760c51633383d?w=1080&amp;h=2340&amp;f=jpeg&amp;s=94977\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171760cbc7d0ddba?w=1080&amp;h=2340&amp;f=jpeg&amp;s=89001\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171760b8c24c188f?w=1080&amp;h=2340&amp;f=jpeg&amp;s=168263\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"2-字体配置\">2.字体配置</h4>\n<blockquote>\n<p>支持全局字体设置,<code>可以拓展</code></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/1717615741f8d2e3?w=1080&amp;h=2340&amp;f=png&amp;s=167438\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171761667bbf6051?w=1080&amp;h=2340&amp;f=png&amp;s=808002\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/1717617b8ab59421?w=1080&amp;h=2340&amp;f=png&amp;s=796618\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"3-item样式设置\">3.item样式设置</h4>\n<blockquote>\n<p>支持item样式设置，<code>可以拓展，支持征集</code>，详见<code>Flutter Unit 1.0 征集方案</code></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/1717620037fd9a50?w=1080&amp;h=2340&amp;f=jpeg&amp;s=105051\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/1717620161fa89ec?w=1080&amp;h=2340&amp;f=jpeg&amp;s=158327\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171762026eb8656d?w=1080&amp;h=2340&amp;f=jpeg&amp;s=146688\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"4-代码面板风格设置\">4.代码面板风格设置</h4>\n<blockquote>\n<p>支持代码风格设置，<code>可以拓展，支持征集</code>，详见<code>Flutter Unit 1.0 征集方案</code></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/1717628b5fe1591c?w=1080&amp;h=759&amp;f=png&amp;s=105023\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/1717629001ade9b0?w=1080&amp;h=773&amp;f=png&amp;s=102672\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3 id=\"三、搜索与收藏功能\">三、搜索与收藏功能</h3>\n<h4 id=\"1-搜索功能\">1.搜索功能</h4>\n<blockquote>\n<p>由于Flutter中Widget比较杂乱，不太好分类，所以搜索是非常重要的<br>\n另外可以根据星级进行过滤，支持多选。目前正在考虑根据功能分类，之后会有所完善。</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171775fc594e4605?w=1080&amp;h=2340&amp;f=png&amp;s=265281\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171775fd99268a78?w=1080&amp;h=2340&amp;f=png&amp;s=424599\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171775fefef50fb9?w=1080&amp;h=2340&amp;f=png&amp;s=414437\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"2-收藏功能\">2.收藏功能</h4>\n<table>\n<thead>\n<tr>\n<th>添加收藏集</th>\n<th>修改收藏集</th>\n<th>删除收藏集</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/23/171a7baf50b2d9f5?w=288&amp;h=576&amp;f=gif&amp;s=447423\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/23/171a7be9b43874ce?w=288&amp;h=576&amp;f=gif&amp;s=881222\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/23/171a7bfec06a2bb8?w=288&amp;h=576&amp;f=gif&amp;s=837022\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>长按左菜单滑页</th>\n<th>长按右菜单滑页</th>\n<th>详情内长按展示收藏菜单</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/24/171a7c73230f803d?w=288&amp;h=576&amp;f=gif&amp;s=563981\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/24/171a7c7cb0780bc6?w=288&amp;h=576&amp;f=gif&amp;s=628105\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/23/171a7a6fa57e3c6f?w=288&amp;h=576&amp;f=gif&amp;s=448572\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>删除与数据同步</th>\n<th>组件加入收藏集</th>\n<th>收藏集支持多选</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/23/171a76fd06702dda?w=288&amp;h=576&amp;f=gif&amp;s=885232\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/23/171a773c1bfd5153?w=288&amp;h=576&amp;f=gif&amp;s=887426\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/23/171a7c36021a18f9?w=288&amp;h=576&amp;f=gif&amp;s=714061\" alt=\"\"></td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p><code>FlutterUnit 1.0 </code>目前基本就是这么多功能，可以在Github中下载打包后的apk玩玩<br>\n希望能对你的Flutter学习有所帮助。</p>\n</blockquote>\n<hr>\n<h4 id=\"3-关于我与项目\">3.关于我与项目</h4>\n<blockquote>\n<p>不多说，都在图里。</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>.</th>\n<th>.</th>\n<th>.</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171777c67ed0c205?w=1080&amp;h=2340&amp;f=png&amp;s=1272888\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171777c8ccfce16b?w=1080&amp;h=2340&amp;f=png&amp;s=1105006\" alt=\"\"></td>\n<td><img src=\"https://user-gold-cdn.xitu.io/2020/4/14/171777caed85b26a?w=1080&amp;h=2340&amp;f=png&amp;s=1190414\" alt=\"\"></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>"},{"title":"MarkDown语法总结","date":"2017-04-12T17:59:51.000Z","description":"这只是一个语言描述的测试","_content":"生成目录：\n\n\n###一 、字体 \n\n\n粗体字：**粗体字**\n__double underscores__\n<strong>double asterisks</strong>\n\n斜体字：_斜体字_\n *single asterisks*\n<em>single asterisks</em>\n\n<!--more-->\n\n> 这是Blockquotes\n\n>> 二、这是二级\n\n>>> 三、这是三级\n\n##水平线\n\n水平线：\n\n***（*  *  *）：\n* * * \n\n- - -\n\n-----------------------------\n\n##虚线\n\n浅虚线（中文：shift + -）：\n\n————————————————————————————————————\n\n中虚线（中文：shift + - & ----）\n—————————————————————————————\n----------------------------- \n\n\n重虚线(中文：shift + - + =)：\n-——————————————————\n===================\n\n\n##四、着重表示\n\n带有“\\”的转义字符：\n\\*literal asterisks\\*\n\n带有下划线的二号粗体字：\n##带有下划线的二号粗体字\n\n文件类型着重表示: `*.ddd.txt`\n``There is a literal backtick (`) here.``\n<p><code>There is a literal backtick (`) here.</code></p>\n\n代码文件着重表示：<kbd>tableviewController<kbd>\n\n@(这是着重表示吗？)\n\n`也曾醉酒鞭名马，唯恐多情累美人`\n\n\n\n!!! note Hexo-admonition 插件使用示例 这是基于 hexo-admonition 插件渲染的一条提示信息。类型为 note，并设置了自定义标题。 提示内容开头留 4 个空格，可以有多行，最后用空行结束此标记。\n\n!!! warning\n    这是一条采用默认标题的警告信息。\n    \n!!! node \"嵌套链接及引用块\" 欢迎访问我的博客链接：[悟尘记](https://www.lixl.cn) >这里嵌套一行引用信息。\n   \n\n\n##五、链接\n\n简单链接：See my [About](/about/) page for details. \n\n网址链接：<http://www.baidu.com>\n\nqq号码：[11112121211](qq:11112121211)\n\n邮箱： 网易邮箱: <livjunjie@163.com>\n\n新浪微博： [@阳光下的向日葵](http://weibo.com/luttemars)\n\n带有文字说明的链接：[百度](http://www.baidu.com)\n\n\n\n插入图片：\n![Alt text](/assets/img/1.jpeg)\n![Alt text](/assets/img/personalimage.jpeg)\n\n\n##表情：\n星星表情:star:\n微笑表情 :smiley: \n\n\n范围文字说明：\n\n##引用\n\n```latex\noptions space=20\ntabstave notation=true key=A time=4/4\nnotes :q =|: (5/2.5/3.7/4) :8 7-5h6/3 ^3^ 5h6-7/5 ^3^ :q 7V/4 |\nnotes :8 t12p7/4 s5s3/4 :8 3s:16:5-7/5 :h p5/4\ntext :w, |#segno, ,|, :hd, , #tr\n```\n\n```math\n\\displaystyle\n\\left( \\sum\\_{k=1}^n a\\_k b\\_k \\right)^2\n\\leq\n\\left( \\sum\\_{k=1}^n a\\_k^2 \\right)\n\\left( \\sum\\_{k=1}^n b\\_k^2 \\right)\n```\n```katex\n\\displaystyle\n    \\frac{1}{\n        \\Bigl(\\sqrt{\\phi \\sqrt{5}}-\\phi\\Bigr) e^{\n        \\frac25 \\pi}} = 1+\\frac{e^{-2\\pi}} {1+\\frac{e^{-4\\pi}} {\n        1+\\frac{e^{-6\\pi}}\n        {1+\\frac{e^{-8\\pi}}\n         {1+\\cdots} }\n        }\n    }\n```\n```latex\nf(x) = \\int_{-\\infty}^\\infty\n    \\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\n    \\,d\\xi\n```\n##列表\n\n列表1（-）：\n\n- 第一条\n- 第二条\n- 第三条\n\n列表2：\n<ul>\n<li>1</li>\n<li>2</li>\n<li>3</li>\n</ul>\n\n列表3（+）：\n\n+ 1\n+ 2\n+ 3\n\n列表4（*）：\n\n* 1\n* 2\n* 3\n\n列表5（数字.）：\n\n1. tom\n2. jerry\n3. jack\n\n##表格\n\n简单表格：\n\n|列1|列2|\n|------|-----|\n|是什么样的感觉|我不懂|\n|只是一路上|我们都在沉默|\n|其实我不要|太多的承诺|\n|只要你能说声|爱我|\n\n\n```flow\nst=>start: Start\ne=>end\nop=>operation: My Operation\ncond=>condition: Yes or No?\n\nst->op->cond\ncond(yes)->e\ncond(no)->op\n```\n\n以及时序图:\n\n```sequence\nAlice->Bob: Hello Bob, how are you?\nNote right of Bob: Bob thinks\nBob-->Alice: I am good thanks!\n```\n\n\n##代码块\n\n程序设计语言：\n\n```python\nimport os\nprint \"hello world\"\n```\n```java\nimport java.io.*;\n```\n\n```swift\n// Swift 语法示例\n/// Swift 语法示例\nenum Student {\n    case Name(String)\n    case Mark(Int, Int, Int)\n}\n\nvar sutdDetails = Student.Name(\"aaa\")\nvar studMarks   = Student.Mark(100, 90, 88)\n\nswitch studMarks {\n    case .Name(let studName):\n        print(\"名字是：\\(studName)\")\n    case .Mark(let mark1, let mark2, let mark3):\n        print(\"学生的成绩是：\\(mark1), \\(mark2), \\(mark3)\")\n}\n```\n\n``` Dart\n/// Flutter 语法示例\nimport 'package:flutter/material.dart';\n\nvoid main() {\n  runApp(MyApp());\n}\n\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    // TODO: implement build\n    return MaterialApp(debugShowCheckedModeBanner: false, home: EHomePage());\n  }\n}\n\nclass EHomePage extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    // TODO: implement build\n    return Scaffold(\n        appBar: AppBar(\n          title: Text(\n            \"我的第一个Flutter程序\",\n            style: TextStyle(color: Colors.red),\n          ),\n        ),\n        body: EBody());\n  }\n}\n\nclass EBody extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    // TODO: implement build\n    return Center(\n      child: Text(\n        \"Hello Flutter\",\n        textDirection: TextDirection.ltr,\n        style: TextStyle(fontSize: 30, color: Colors.orange),\n      ),\n    );\n  }\n}\n\n```\n\n\n\n","source":"_posts/markdown语法总结.md","raw":"---\ntitle: MarkDown语法总结\ndate: 2017-04-13 01:59:51\ntags: [脚本语言,编程,程序设计,思考总结,前端,效率]\ndescription: 这只是一个语言描述的测试\n---\n生成目录：\n\n\n###一 、字体 \n\n\n粗体字：**粗体字**\n__double underscores__\n<strong>double asterisks</strong>\n\n斜体字：_斜体字_\n *single asterisks*\n<em>single asterisks</em>\n\n<!--more-->\n\n> 这是Blockquotes\n\n>> 二、这是二级\n\n>>> 三、这是三级\n\n##水平线\n\n水平线：\n\n***（*  *  *）：\n* * * \n\n- - -\n\n-----------------------------\n\n##虚线\n\n浅虚线（中文：shift + -）：\n\n————————————————————————————————————\n\n中虚线（中文：shift + - & ----）\n—————————————————————————————\n----------------------------- \n\n\n重虚线(中文：shift + - + =)：\n-——————————————————\n===================\n\n\n##四、着重表示\n\n带有“\\”的转义字符：\n\\*literal asterisks\\*\n\n带有下划线的二号粗体字：\n##带有下划线的二号粗体字\n\n文件类型着重表示: `*.ddd.txt`\n``There is a literal backtick (`) here.``\n<p><code>There is a literal backtick (`) here.</code></p>\n\n代码文件着重表示：<kbd>tableviewController<kbd>\n\n@(这是着重表示吗？)\n\n`也曾醉酒鞭名马，唯恐多情累美人`\n\n\n\n!!! note Hexo-admonition 插件使用示例 这是基于 hexo-admonition 插件渲染的一条提示信息。类型为 note，并设置了自定义标题。 提示内容开头留 4 个空格，可以有多行，最后用空行结束此标记。\n\n!!! warning\n    这是一条采用默认标题的警告信息。\n    \n!!! node \"嵌套链接及引用块\" 欢迎访问我的博客链接：[悟尘记](https://www.lixl.cn) >这里嵌套一行引用信息。\n   \n\n\n##五、链接\n\n简单链接：See my [About](/about/) page for details. \n\n网址链接：<http://www.baidu.com>\n\nqq号码：[11112121211](qq:11112121211)\n\n邮箱： 网易邮箱: <livjunjie@163.com>\n\n新浪微博： [@阳光下的向日葵](http://weibo.com/luttemars)\n\n带有文字说明的链接：[百度](http://www.baidu.com)\n\n\n\n插入图片：\n![Alt text](/assets/img/1.jpeg)\n![Alt text](/assets/img/personalimage.jpeg)\n\n\n##表情：\n星星表情:star:\n微笑表情 :smiley: \n\n\n范围文字说明：\n\n##引用\n\n```latex\noptions space=20\ntabstave notation=true key=A time=4/4\nnotes :q =|: (5/2.5/3.7/4) :8 7-5h6/3 ^3^ 5h6-7/5 ^3^ :q 7V/4 |\nnotes :8 t12p7/4 s5s3/4 :8 3s:16:5-7/5 :h p5/4\ntext :w, |#segno, ,|, :hd, , #tr\n```\n\n```math\n\\displaystyle\n\\left( \\sum\\_{k=1}^n a\\_k b\\_k \\right)^2\n\\leq\n\\left( \\sum\\_{k=1}^n a\\_k^2 \\right)\n\\left( \\sum\\_{k=1}^n b\\_k^2 \\right)\n```\n```katex\n\\displaystyle\n    \\frac{1}{\n        \\Bigl(\\sqrt{\\phi \\sqrt{5}}-\\phi\\Bigr) e^{\n        \\frac25 \\pi}} = 1+\\frac{e^{-2\\pi}} {1+\\frac{e^{-4\\pi}} {\n        1+\\frac{e^{-6\\pi}}\n        {1+\\frac{e^{-8\\pi}}\n         {1+\\cdots} }\n        }\n    }\n```\n```latex\nf(x) = \\int_{-\\infty}^\\infty\n    \\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\n    \\,d\\xi\n```\n##列表\n\n列表1（-）：\n\n- 第一条\n- 第二条\n- 第三条\n\n列表2：\n<ul>\n<li>1</li>\n<li>2</li>\n<li>3</li>\n</ul>\n\n列表3（+）：\n\n+ 1\n+ 2\n+ 3\n\n列表4（*）：\n\n* 1\n* 2\n* 3\n\n列表5（数字.）：\n\n1. tom\n2. jerry\n3. jack\n\n##表格\n\n简单表格：\n\n|列1|列2|\n|------|-----|\n|是什么样的感觉|我不懂|\n|只是一路上|我们都在沉默|\n|其实我不要|太多的承诺|\n|只要你能说声|爱我|\n\n\n```flow\nst=>start: Start\ne=>end\nop=>operation: My Operation\ncond=>condition: Yes or No?\n\nst->op->cond\ncond(yes)->e\ncond(no)->op\n```\n\n以及时序图:\n\n```sequence\nAlice->Bob: Hello Bob, how are you?\nNote right of Bob: Bob thinks\nBob-->Alice: I am good thanks!\n```\n\n\n##代码块\n\n程序设计语言：\n\n```python\nimport os\nprint \"hello world\"\n```\n```java\nimport java.io.*;\n```\n\n```swift\n// Swift 语法示例\n/// Swift 语法示例\nenum Student {\n    case Name(String)\n    case Mark(Int, Int, Int)\n}\n\nvar sutdDetails = Student.Name(\"aaa\")\nvar studMarks   = Student.Mark(100, 90, 88)\n\nswitch studMarks {\n    case .Name(let studName):\n        print(\"名字是：\\(studName)\")\n    case .Mark(let mark1, let mark2, let mark3):\n        print(\"学生的成绩是：\\(mark1), \\(mark2), \\(mark3)\")\n}\n```\n\n``` Dart\n/// Flutter 语法示例\nimport 'package:flutter/material.dart';\n\nvoid main() {\n  runApp(MyApp());\n}\n\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    // TODO: implement build\n    return MaterialApp(debugShowCheckedModeBanner: false, home: EHomePage());\n  }\n}\n\nclass EHomePage extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    // TODO: implement build\n    return Scaffold(\n        appBar: AppBar(\n          title: Text(\n            \"我的第一个Flutter程序\",\n            style: TextStyle(color: Colors.red),\n          ),\n        ),\n        body: EBody());\n  }\n}\n\nclass EBody extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    // TODO: implement build\n    return Center(\n      child: Text(\n        \"Hello Flutter\",\n        textDirection: TextDirection.ltr,\n        style: TextStyle(fontSize: 30, color: Colors.orange),\n      ),\n    );\n  }\n}\n\n```\n\n\n\n","slug":"markdown语法总结","published":1,"updated":"2021-04-26T10:57:00.551Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cko4wk0y800030vxabzt25a6d","content":"<p>生成目录：</p>\n<p>###一 、字体</p>\n<p>粗体字：<strong>粗体字</strong><br>\n<strong>double underscores</strong><br>\n<strong>double asterisks</strong></p>\n<p>斜体字：<em>斜体字</em><br>\n<em>single asterisks</em><br>\n<em>single asterisks</em></p>\n<span id=\"more\"></span>\n<blockquote>\n<p>这是Blockquotes</p>\n</blockquote>\n<blockquote>\n<blockquote>\n<p>二、这是二级</p>\n</blockquote>\n</blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>三、这是三级</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<p>##水平线</p>\n<p>水平线：</p>\n<p>**<em>（</em>  *  *）：</p>\n<hr>\n<hr>\n<hr>\n<p>##虚线</p>\n<p>浅虚线（中文：shift + -）：</p>\n<p>————————————————————————————————————</p>\n<h2 id=\"中虚线（中文：shift-）—————————————————————————————\">中虚线（中文：shift + - &amp; ----）<br>\n—————————————————————————————</h2>\n<h1>重虚线(中文：shift + - + =)：<br>\n-——————————————————</h1>\n<p>##四、着重表示</p>\n<p>带有“\\”的转义字符：<br>\n*literal asterisks*</p>\n<p>带有下划线的二号粗体字：<br>\n##带有下划线的二号粗体字</p>\n<p>文件类型着重表示: <code>*.ddd.txt</code><br>\n<code>There is a literal backtick (`) here.</code></p>\n<p><code>There is a literal backtick (`) here.</code></p>\n<p>代码文件着重表示：<kbd>tableviewController<kbd></p>\n<p>@(这是着重表示吗？)</p>\n<p><code>也曾醉酒鞭名马，唯恐多情累美人</code></p>\n<div class=\"admonition note\"><p class=\"admonition-title\">Hexo-admonition 插件使用示例 这是基于 hexo-admonition 插件渲染的一条提示信息。类型为 note，并设置了自定义标题。 提示内容开头留 4 个空格，可以有多行，最后用空行结束此标记。\n</p></div>\n<div class=\"admonition warning\"><p class=\"admonition-title\">warning</p><p>这是一条采用默认标题的警告信息。</p>\n</div>\n<p>!!! node “嵌套链接及引用块” 欢迎访问我的博客链接：<a href=\"https://www.lixl.cn\">悟尘记</a> &gt;这里嵌套一行引用信息。</p>\n<p>##五、链接</p>\n<p>简单链接：See my <a href=\"/about/\">About</a> page for details.</p>\n<p>网址链接：<a href=\"http://www.baidu.com\">http://www.baidu.com</a></p>\n<p>qq号码：<a href=\"qq:11112121211\">11112121211</a></p>\n<p>邮箱： 网易邮箱: <a href=\"mailto:livjunjie@163.com\">livjunjie@163.com</a></p>\n<p>新浪微博： <a href=\"http://weibo.com/luttemars\">@阳光下的向日葵</a></p>\n<p>带有文字说明的链接：<a href=\"http://www.baidu.com\">百度</a></p>\n<p>插入图片：<br>\n<img src=\"/assets/img/1.jpeg\" alt=\"Alt text\"><br>\n<img src=\"/assets/img/personalimage.jpeg\" alt=\"Alt text\"></p>\n<p>##表情：<br>\n星星表情<img class=\"emoji\" draggable=\"false\" alt=\"⭐️\" src=\"https://twemoji.maxcdn.com/v/13.0.2/72x72/2b50.png\"/><br>\n微笑表情 <img class=\"emoji\" draggable=\"false\" alt=\"😃\" src=\"https://twemoji.maxcdn.com/v/13.0.2/72x72/1f603.png\"/></p>\n<p>范围文字说明：</p>\n<p>##引用</p>\n<figure class=\"highlight latex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre class=\"line-numbers language-hljs latex\">options space=20<br>tabstave notation=true key=A time=4/4<br>notes :q =|: (5/2.5/3.7/4) :8 7-5h6/3 <span class=\"hljs-built_in\">^</span>3<span class=\"hljs-built_in\">^</span> 5h6-7/5 <span class=\"hljs-built_in\">^</span>3<span class=\"hljs-built_in\">^</span> :q 7V/4 |<br>notes :8 t12p7/4 s5s3/4 :8 3s:16:5-7/5 :h p5/4<br>text :w, |<span class=\"hljs-params\">#</span>segno, ,|, :hd, , <span class=\"hljs-params\"><code class=\"language-hljs latex\">options space=20<br>tabstave notation=true key=A time=4/4<br>notes :q =|: (5/2.5/3.7/4) :8 7-5h6/3 <span class=\"hljs-built_in\">^</span>3<span class=\"hljs-built_in\">^</span> 5h6-7/5 <span class=\"hljs-built_in\">^</span>3<span class=\"hljs-built_in\">^</span> :q 7V/4 |<br>notes :8 t12p7/4 s5s3/4 :8 3s:16:5-7/5 :h p5/4<br>text :w, |<span class=\"hljs-params\">#</span>segno, ,|, :hd, , <span class=\"hljs-params\">#</span>tr<br><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre class=\"line-numbers language-hljs math\"><code class=\"language-hljs math\">\\displaystyle<br>\\left( \\sum\\_&#123;k&#x3D;1&#125;^n a\\_k b\\_k \\right)^2<br>\\leq<br>\\left( \\sum\\_&#123;k&#x3D;1&#125;^n a\\_k^2 \\right)<br>\\left( \\sum\\_&#123;k&#x3D;1&#125;^n b\\_k^2 \\right)<br><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre class=\"line-numbers language-hljs katex\"><code class=\"language-hljs katex\">\\displaystyle<br>    \\frac&#123;1&#125;&#123;<br>        \\Bigl(\\sqrt&#123;\\phi \\sqrt&#123;5&#125;&#125;-\\phi\\Bigr) e^&#123;<br>        \\frac25 \\pi&#125;&#125; &#x3D; 1+\\frac&#123;e^&#123;-2\\pi&#125;&#125; &#123;1+\\frac&#123;e^&#123;-4\\pi&#125;&#125; &#123;<br>        1+\\frac&#123;e^&#123;-6\\pi&#125;&#125;<br>        &#123;1+\\frac&#123;e^&#123;-8\\pi&#125;&#125;<br>         &#123;1+\\cdots&#125; &#125;<br>        &#125;<br>    &#125;<br><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></td></tr></table></figure>\n<figure class=\"highlight latex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre class=\"line-numbers language-hljs latex\">f(x) = <span class=\"hljs-keyword\">\\int</span><span class=\"hljs-built_in\">_</span>&#123;-<span class=\"hljs-keyword\">\\infty</span>&#125;<span class=\"hljs-built_in\">^</span><span class=\"hljs-keyword\">\\infty</span><br>    <span class=\"hljs-keyword\">\\hat</span> f(<span class=\"hljs-keyword\">\\xi</span>)<span class=\"hljs-keyword\">\\,</span>e<span class=\"hljs-built_in\">^</span>&#123;2 <span class=\"hljs-keyword\">\\pi</span> i <span class=\"hljs-keyword\">\\xi</span> x&#125;<br>    <span class=\"hljs-keyword\">\\,</span>d<span class=\"hljs-keyword\"><code class=\"language-hljs latex\">f(x) = <span class=\"hljs-keyword\">\\int</span><span class=\"hljs-built_in\">_</span>&#123;-<span class=\"hljs-keyword\">\\infty</span>&#125;<span class=\"hljs-built_in\">^</span><span class=\"hljs-keyword\">\\infty</span><br>    <span class=\"hljs-keyword\">\\hat</span> f(<span class=\"hljs-keyword\">\\xi</span>)<span class=\"hljs-keyword\">\\,</span>e<span class=\"hljs-built_in\">^</span>&#123;2 <span class=\"hljs-keyword\">\\pi</span> i <span class=\"hljs-keyword\">\\xi</span> x&#125;<br>    <span class=\"hljs-keyword\">\\,</span>d<span class=\"hljs-keyword\">\\xi</span><br><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></td></tr></table></figure>\n<p>##列表</p>\n<p>列表1（-）：</p>\n<ul>\n<li>第一条</li>\n<li>第二条</li>\n<li>第三条</li>\n</ul>\n<p>列表2：</p>\n<ul>\n<li>1</li>\n<li>2</li>\n<li>3</li>\n</ul>\n<p>列表3（+）：</p>\n<ul>\n<li>1</li>\n<li>2</li>\n<li>3</li>\n</ul>\n<p>列表4（*）：</p>\n<ul>\n<li>1</li>\n<li>2</li>\n<li>3</li>\n</ul>\n<p>列表5（数字.）：</p>\n<ol>\n<li>tom</li>\n<li>jerry</li>\n<li>jack</li>\n</ol>\n<p>##表格</p>\n<p>简单表格：</p>\n<table>\n<thead>\n<tr>\n<th>列1</th>\n<th>列2</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>是什么样的感觉</td>\n<td>我不懂</td>\n</tr>\n<tr>\n<td>只是一路上</td>\n<td>我们都在沉默</td>\n</tr>\n<tr>\n<td>其实我不要</td>\n<td>太多的承诺</td>\n</tr>\n<tr>\n<td>只要你能说声</td>\n<td>爱我</td>\n</tr>\n</tbody>\n</table>\n<div id=\"flowchart-0\" class=\"flow-chart\"></div>\n<p>以及时序图:</p>\n<div id=\"sequence-0\"></div>\n<p>##代码块</p>\n<p>程序设计语言：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre class=\"line-numbers language-hljs python\"><span class=\"hljs-keyword\">import</span> os<br><span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\"><code class=\"language-hljs python\"><span class=\"hljs-keyword\">import</span> os<br><span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\">\"hello world\"</span><br><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre class=\"line-numbers language-hljs java\"><span class=\"hljs-keyword\"><code class=\"language-hljs java\"><span class=\"hljs-keyword\">import</span> java.io.*;<br><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></td></tr></table></figure>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre class=\"line-numbers language-hljs swift\"><span class=\"hljs-comment\">// Swift 语法示例</span><br><span class=\"hljs-comment\">/// Swift 语法示例</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">enum</span> <span class=\"hljs-title\">Student</span> </span>&#123;<br>    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-type\">Name</span>(<span class=\"hljs-type\">String</span>)<br>    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-type\">Mark</span>(<span class=\"hljs-type\">Int</span>, <span class=\"hljs-type\">Int</span>, <span class=\"hljs-type\">Int</span>)<br>&#125;<br><br><span class=\"hljs-keyword\">var</span> sutdDetails <span class=\"hljs-operator\">=</span> <span class=\"hljs-type\">Student</span>.<span class=\"hljs-type\">Name</span>(<span class=\"hljs-string\">&quot;aaa&quot;</span>)<br><span class=\"hljs-keyword\">var</span> studMarks   <span class=\"hljs-operator\">=</span> <span class=\"hljs-type\">Student</span>.<span class=\"hljs-type\">Mark</span>(<span class=\"hljs-number\">100</span>, <span class=\"hljs-number\">90</span>, <span class=\"hljs-number\">88</span>)<br><br><span class=\"hljs-keyword\">switch</span> studMarks &#123;<br>    <span class=\"hljs-keyword\">case</span> .<span class=\"hljs-type\">Name</span>(<span class=\"hljs-keyword\">let</span> studName):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;名字是：<span class=\"hljs-subst\">\\(studName)</span>&quot;</span>)<br>    <span class=\"hljs-keyword\">case</span> .<span class=\"hljs-type\">Mark</span>(<span class=\"hljs-keyword\">let</span> mark1, <span class=\"hljs-keyword\">let</span> mark2, <span class=\"hljs-keyword\">let</span> mark3):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;学生的成绩是：<span class=\"hljs-subst\">\\(mark1)</span>, <span class=\"hljs-subst\">\\(mark2)</span>, <span class=\"hljs-subst\"><code class=\"language-hljs swift\"><span class=\"hljs-comment\">// Swift 语法示例</span><br><span class=\"hljs-comment\">/// Swift 语法示例</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">enum</span> <span class=\"hljs-title\">Student</span> </span>&#123;<br>    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-type\">Name</span>(<span class=\"hljs-type\">String</span>)<br>    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-type\">Mark</span>(<span class=\"hljs-type\">Int</span>, <span class=\"hljs-type\">Int</span>, <span class=\"hljs-type\">Int</span>)<br>&#125;<br><br><span class=\"hljs-keyword\">var</span> sutdDetails <span class=\"hljs-operator\">=</span> <span class=\"hljs-type\">Student</span>.<span class=\"hljs-type\">Name</span>(<span class=\"hljs-string\">&quot;aaa&quot;</span>)<br><span class=\"hljs-keyword\">var</span> studMarks   <span class=\"hljs-operator\">=</span> <span class=\"hljs-type\">Student</span>.<span class=\"hljs-type\">Mark</span>(<span class=\"hljs-number\">100</span>, <span class=\"hljs-number\">90</span>, <span class=\"hljs-number\">88</span>)<br><br><span class=\"hljs-keyword\">switch</span> studMarks &#123;<br>    <span class=\"hljs-keyword\">case</span> .<span class=\"hljs-type\">Name</span>(<span class=\"hljs-keyword\">let</span> studName):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;名字是：<span class=\"hljs-subst\">\\(studName)</span>&quot;</span>)<br>    <span class=\"hljs-keyword\">case</span> .<span class=\"hljs-type\">Mark</span>(<span class=\"hljs-keyword\">let</span> mark1, <span class=\"hljs-keyword\">let</span> mark2, <span class=\"hljs-keyword\">let</span> mark3):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;学生的成绩是：<span class=\"hljs-subst\">\\(mark1)</span>, <span class=\"hljs-subst\">\\(mark2)</span>, <span class=\"hljs-subst\">\\(mark3)</span>\"</span>)<br>&#125;<br><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></td></tr></table></figure>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre class=\"line-numbers language-hljs Dart\"><span class=\"hljs-comment\">/// <span class=\"markdown\">Flutter 语法示例</span></span><br><span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class=\"hljs-keyword\">void</span> main() &#123;<br>  runApp(MyApp());<br>&#125;<br><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyApp</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>&#123;<br>  <span class=\"hljs-meta\">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">TODO:</span> implement build</span><br>    <span class=\"hljs-keyword\">return</span> MaterialApp(debugShowCheckedModeBanner: <span class=\"hljs-keyword\">false</span>, home: EHomePage());<br>  &#125;<br>&#125;<br><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">EHomePage</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>&#123;<br>  <span class=\"hljs-meta\">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">TODO:</span> implement build</span><br>    <span class=\"hljs-keyword\">return</span> Scaffold(<br>        appBar: AppBar(<br>          title: Text(<br>            <span class=\"hljs-string\">&quot;我的第一个Flutter程序&quot;</span>,<br>            style: TextStyle(color: Colors.red),<br>          ),<br>        ),<br>        body: EBody());<br>  &#125;<br>&#125;<br><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">EBody</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>&#123;<br>  <span class=\"hljs-meta\">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">TODO:</span> implement build</span><br>    <span class=\"hljs-keyword\">return</span> Center(<br>      child: Text(<br>        <span class=\"hljs-string\">&quot;Hello Flutter&quot;</span>,<br>        textDirection: TextDirection.ltr,<br>        style: TextStyle(fontSize: <span class=\"hljs-number\"><code class=\"language-hljs Dart\"><span class=\"hljs-comment\">/// <span class=\"markdown\">Flutter 语法示例</span></span><br><span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class=\"hljs-keyword\">void</span> main() &#123;<br>  runApp(MyApp());<br>&#125;<br><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyApp</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>&#123;<br>  <span class=\"hljs-meta\">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">TODO:</span> implement build</span><br>    <span class=\"hljs-keyword\">return</span> MaterialApp(debugShowCheckedModeBanner: <span class=\"hljs-keyword\">false</span>, home: EHomePage());<br>  &#125;<br>&#125;<br><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">EHomePage</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>&#123;<br>  <span class=\"hljs-meta\">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">TODO:</span> implement build</span><br>    <span class=\"hljs-keyword\">return</span> Scaffold(<br>        appBar: AppBar(<br>          title: Text(<br>            <span class=\"hljs-string\">&quot;我的第一个Flutter程序&quot;</span>,<br>            style: TextStyle(color: Colors.red),<br>          ),<br>        ),<br>        body: EBody());<br>  &#125;<br>&#125;<br><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">EBody</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>&#123;<br>  <span class=\"hljs-meta\">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">TODO:</span> implement build</span><br>    <span class=\"hljs-keyword\">return</span> Center(<br>      child: Text(<br>        <span class=\"hljs-string\">&quot;Hello Flutter&quot;</span>,<br>        textDirection: TextDirection.ltr,<br>        style: TextStyle(fontSize: <span class=\"hljs-number\">30</span>, color: Colors.orange),<br>      ),<br>    );<br>  &#125;<br>&#125;<br><br><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></td></tr></table></figure>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js\"></script><textarea id=\"flowchart-0-code\" style=\"display: none\">st=>start: Start\ne=>end\nop=>operation: My Operation\ncond=>condition: Yes or No?\n\nst->op->cond\ncond(yes)->e\ncond(no)->op</textarea><textarea id=\"flowchart-0-options\" style=\"display: none\">{\"theme\":\"simple\",\"scale\":1,\"line-width\":2,\"line-length\":50,\"text-margin\":10,\"font-size\":12}</textarea><script>  var code = document.getElementById(\"flowchart-0-code\").value;  var options = JSON.parse(decodeURIComponent(document.getElementById(\"flowchart-0-options\").value));  var diagram = flowchart.parse(code);  diagram.drawSVG(\"flowchart-0\", options);</script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/webfont/1.6.27/webfontloader.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.4.1/snap.svg-min.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/js-sequence-diagrams/1.0.6/sequence-diagram-min.js\"></script><textarea id=\"sequence-0-code\" style=\"display: none\">Alice->Bob: Hello Bob, how are you?\nNote right of Bob: Bob thinks\nBob-->Alice: I am good thanks!</textarea><textarea id=\"sequence-0-options\" style=\"display: none\">{\"theme\":\"simple\",\"scale\":1,\"line-width\":2,\"line-length\":50,\"text-margin\":10,\"font-size\":12}</textarea><script>  var code = document.getElementById(\"sequence-0-code\").value;  var options = JSON.parse(decodeURIComponent(document.getElementById(\"sequence-0-options\").value));  var diagram = Diagram.parse(code);  diagram.drawSVG(\"sequence-0\", options);</script>","site":{"data":{}},"excerpt":"<p>生成目录：</p>\n<p>###一 、字体</p>\n<p>粗体字：<strong>粗体字</strong><br>\n<strong>double underscores</strong><br>\n<strong>double asterisks</strong></p>\n<p>斜体字：<em>斜体字</em><br>\n<em>single asterisks</em><br>\n<em>single asterisks</em></p>","more":"<blockquote>\n<p>这是Blockquotes</p>\n</blockquote>\n<blockquote>\n<blockquote>\n<p>二、这是二级</p>\n</blockquote>\n</blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>三、这是三级</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<p>##水平线</p>\n<p>水平线：</p>\n<p>**<em>（</em>  *  *）：</p>\n<hr>\n<hr>\n<hr>\n<p>##虚线</p>\n<p>浅虚线（中文：shift + -）：</p>\n<p>————————————————————————————————————</p>\n<h2 id=\"中虚线（中文：shift-）—————————————————————————————\">中虚线（中文：shift + - &amp; ----）<br>\n—————————————————————————————</h2>\n<h1>重虚线(中文：shift + - + =)：<br>\n-——————————————————</h1>\n<p>##四、着重表示</p>\n<p>带有“\\”的转义字符：<br>\n*literal asterisks*</p>\n<p>带有下划线的二号粗体字：<br>\n##带有下划线的二号粗体字</p>\n<p>文件类型着重表示: <code>*.ddd.txt</code><br>\n<code>There is a literal backtick (`) here.</code></p>\n<p><code>There is a literal backtick (`) here.</code></p>\n<p>代码文件着重表示：<kbd>tableviewController<kbd></p>\n<p>@(这是着重表示吗？)</p>\n<p><code>也曾醉酒鞭名马，唯恐多情累美人</code></p>\n<div class=\"admonition note\"><p class=\"admonition-title\">Hexo-admonition 插件使用示例 这是基于 hexo-admonition 插件渲染的一条提示信息。类型为 note，并设置了自定义标题。 提示内容开头留 4 个空格，可以有多行，最后用空行结束此标记。\n</p></div>\n<div class=\"admonition warning\"><p class=\"admonition-title\">warning</p><p>这是一条采用默认标题的警告信息。</p>\n</div>\n<p>!!! node “嵌套链接及引用块” 欢迎访问我的博客链接：<a href=\"https://www.lixl.cn\">悟尘记</a> &gt;这里嵌套一行引用信息。</p>\n<p>##五、链接</p>\n<p>简单链接：See my <a href=\"/about/\">About</a> page for details.</p>\n<p>网址链接：<a href=\"http://www.baidu.com\">http://www.baidu.com</a></p>\n<p>qq号码：<a href=\"qq:11112121211\">11112121211</a></p>\n<p>邮箱： 网易邮箱: <a href=\"mailto:livjunjie@163.com\">livjunjie@163.com</a></p>\n<p>新浪微博： <a href=\"http://weibo.com/luttemars\">@阳光下的向日葵</a></p>\n<p>带有文字说明的链接：<a href=\"http://www.baidu.com\">百度</a></p>\n<p>插入图片：<br>\n<img src=\"/assets/img/1.jpeg\" alt=\"Alt text\"><br>\n<img src=\"/assets/img/personalimage.jpeg\" alt=\"Alt text\"></p>\n<p>##表情：<br>\n星星表情<img class=\"emoji\" draggable=\"false\" alt=\"⭐️\" src=\"https://twemoji.maxcdn.com/v/13.0.2/72x72/2b50.png\"/><br>\n微笑表情 <img class=\"emoji\" draggable=\"false\" alt=\"😃\" src=\"https://twemoji.maxcdn.com/v/13.0.2/72x72/1f603.png\"/></p>\n<p>范围文字说明：</p>\n<p>##引用</p>\n<figure class=\"highlight latex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs latex\">options space=20<br>tabstave notation=true key=A time=4/4<br>notes :q =|: (5/2.5/3.7/4) :8 7-5h6/3 <span class=\"hljs-built_in\">^</span>3<span class=\"hljs-built_in\">^</span> 5h6-7/5 <span class=\"hljs-built_in\">^</span>3<span class=\"hljs-built_in\">^</span> :q 7V/4 |<br>notes :8 t12p7/4 s5s3/4 :8 3s:16:5-7/5 :h p5/4<br>text :w, |<span class=\"hljs-params\">#</span>segno, ,|, :hd, , <span class=\"hljs-params\">#</span>tr<br></code></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs math\">\\displaystyle<br>\\left( \\sum\\_&#123;k&#x3D;1&#125;^n a\\_k b\\_k \\right)^2<br>\\leq<br>\\left( \\sum\\_&#123;k&#x3D;1&#125;^n a\\_k^2 \\right)<br>\\left( \\sum\\_&#123;k&#x3D;1&#125;^n b\\_k^2 \\right)<br></code></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs katex\">\\displaystyle<br>    \\frac&#123;1&#125;&#123;<br>        \\Bigl(\\sqrt&#123;\\phi \\sqrt&#123;5&#125;&#125;-\\phi\\Bigr) e^&#123;<br>        \\frac25 \\pi&#125;&#125; &#x3D; 1+\\frac&#123;e^&#123;-2\\pi&#125;&#125; &#123;1+\\frac&#123;e^&#123;-4\\pi&#125;&#125; &#123;<br>        1+\\frac&#123;e^&#123;-6\\pi&#125;&#125;<br>        &#123;1+\\frac&#123;e^&#123;-8\\pi&#125;&#125;<br>         &#123;1+\\cdots&#125; &#125;<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure>\n<figure class=\"highlight latex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs latex\">f(x) = <span class=\"hljs-keyword\">\\int</span><span class=\"hljs-built_in\">_</span>&#123;-<span class=\"hljs-keyword\">\\infty</span>&#125;<span class=\"hljs-built_in\">^</span><span class=\"hljs-keyword\">\\infty</span><br>    <span class=\"hljs-keyword\">\\hat</span> f(<span class=\"hljs-keyword\">\\xi</span>)<span class=\"hljs-keyword\">\\,</span>e<span class=\"hljs-built_in\">^</span>&#123;2 <span class=\"hljs-keyword\">\\pi</span> i <span class=\"hljs-keyword\">\\xi</span> x&#125;<br>    <span class=\"hljs-keyword\">\\,</span>d<span class=\"hljs-keyword\">\\xi</span><br></code></pre></td></tr></table></figure>\n<p>##列表</p>\n<p>列表1（-）：</p>\n<ul>\n<li>第一条</li>\n<li>第二条</li>\n<li>第三条</li>\n</ul>\n<p>列表2：</p>\n<ul>\n<li>1</li>\n<li>2</li>\n<li>3</li>\n</ul>\n<p>列表3（+）：</p>\n<ul>\n<li>1</li>\n<li>2</li>\n<li>3</li>\n</ul>\n<p>列表4（*）：</p>\n<ul>\n<li>1</li>\n<li>2</li>\n<li>3</li>\n</ul>\n<p>列表5（数字.）：</p>\n<ol>\n<li>tom</li>\n<li>jerry</li>\n<li>jack</li>\n</ol>\n<p>##表格</p>\n<p>简单表格：</p>\n<table>\n<thead>\n<tr>\n<th>列1</th>\n<th>列2</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>是什么样的感觉</td>\n<td>我不懂</td>\n</tr>\n<tr>\n<td>只是一路上</td>\n<td>我们都在沉默</td>\n</tr>\n<tr>\n<td>其实我不要</td>\n<td>太多的承诺</td>\n</tr>\n<tr>\n<td>只要你能说声</td>\n<td>爱我</td>\n</tr>\n</tbody>\n</table>\n<div id=\"flowchart-0\" class=\"flow-chart\"></div>\n<p>以及时序图:</p>\n<div id=\"sequence-0\"></div>\n<p>##代码块</p>\n<p>程序设计语言：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-keyword\">import</span> os<br><span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\">&quot;hello world&quot;</span><br></code></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">import</span> java.io.*;<br></code></pre></td></tr></table></figure>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs swift\"><span class=\"hljs-comment\">// Swift 语法示例</span><br><span class=\"hljs-comment\">/// Swift 语法示例</span><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">enum</span> <span class=\"hljs-title\">Student</span> </span>&#123;<br>    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-type\">Name</span>(<span class=\"hljs-type\">String</span>)<br>    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-type\">Mark</span>(<span class=\"hljs-type\">Int</span>, <span class=\"hljs-type\">Int</span>, <span class=\"hljs-type\">Int</span>)<br>&#125;<br><br><span class=\"hljs-keyword\">var</span> sutdDetails <span class=\"hljs-operator\">=</span> <span class=\"hljs-type\">Student</span>.<span class=\"hljs-type\">Name</span>(<span class=\"hljs-string\">&quot;aaa&quot;</span>)<br><span class=\"hljs-keyword\">var</span> studMarks   <span class=\"hljs-operator\">=</span> <span class=\"hljs-type\">Student</span>.<span class=\"hljs-type\">Mark</span>(<span class=\"hljs-number\">100</span>, <span class=\"hljs-number\">90</span>, <span class=\"hljs-number\">88</span>)<br><br><span class=\"hljs-keyword\">switch</span> studMarks &#123;<br>    <span class=\"hljs-keyword\">case</span> .<span class=\"hljs-type\">Name</span>(<span class=\"hljs-keyword\">let</span> studName):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;名字是：<span class=\"hljs-subst\">\\(studName)</span>&quot;</span>)<br>    <span class=\"hljs-keyword\">case</span> .<span class=\"hljs-type\">Mark</span>(<span class=\"hljs-keyword\">let</span> mark1, <span class=\"hljs-keyword\">let</span> mark2, <span class=\"hljs-keyword\">let</span> mark3):<br>        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;学生的成绩是：<span class=\"hljs-subst\">\\(mark1)</span>, <span class=\"hljs-subst\">\\(mark2)</span>, <span class=\"hljs-subst\">\\(mark3)</span>&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Dart\"><span class=\"hljs-comment\">/// <span class=\"markdown\">Flutter 语法示例</span></span><br><span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class=\"hljs-keyword\">void</span> main() &#123;<br>  runApp(MyApp());<br>&#125;<br><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyApp</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>&#123;<br>  <span class=\"hljs-meta\">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">TODO:</span> implement build</span><br>    <span class=\"hljs-keyword\">return</span> MaterialApp(debugShowCheckedModeBanner: <span class=\"hljs-keyword\">false</span>, home: EHomePage());<br>  &#125;<br>&#125;<br><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">EHomePage</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>&#123;<br>  <span class=\"hljs-meta\">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">TODO:</span> implement build</span><br>    <span class=\"hljs-keyword\">return</span> Scaffold(<br>        appBar: AppBar(<br>          title: Text(<br>            <span class=\"hljs-string\">&quot;我的第一个Flutter程序&quot;</span>,<br>            style: TextStyle(color: Colors.red),<br>          ),<br>        ),<br>        body: EBody());<br>  &#125;<br>&#125;<br><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">EBody</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>&#123;<br>  <span class=\"hljs-meta\">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">TODO:</span> implement build</span><br>    <span class=\"hljs-keyword\">return</span> Center(<br>      child: Text(<br>        <span class=\"hljs-string\">&quot;Hello Flutter&quot;</span>,<br>        textDirection: TextDirection.ltr,<br>        style: TextStyle(fontSize: <span class=\"hljs-number\">30</span>, color: Colors.orange),<br>      ),<br>    );<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js\"></script><textarea id=\"flowchart-0-code\" style=\"display: none\">st=>start: Start\ne=>end\nop=>operation: My Operation\ncond=>condition: Yes or No?\n\nst->op->cond\ncond(yes)->e\ncond(no)->op</textarea><textarea id=\"flowchart-0-options\" style=\"display: none\">{\"theme\":\"simple\",\"scale\":1,\"line-width\":2,\"line-length\":50,\"text-margin\":10,\"font-size\":12}</textarea><script>  var code = document.getElementById(\"flowchart-0-code\").value;  var options = JSON.parse(decodeURIComponent(document.getElementById(\"flowchart-0-options\").value));  var diagram = flowchart.parse(code);  diagram.drawSVG(\"flowchart-0\", options);</script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/webfont/1.6.27/webfontloader.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.4.1/snap.svg-min.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/js-sequence-diagrams/1.0.6/sequence-diagram-min.js\"></script><textarea id=\"sequence-0-code\" style=\"display: none\">Alice->Bob: Hello Bob, how are you?\nNote right of Bob: Bob thinks\nBob-->Alice: I am good thanks!</textarea><textarea id=\"sequence-0-options\" style=\"display: none\">{\"theme\":\"simple\",\"scale\":1,\"line-width\":2,\"line-length\":50,\"text-margin\":10,\"font-size\":12}</textarea><script>  var code = document.getElementById(\"sequence-0-code\").value;  var options = JSON.parse(decodeURIComponent(document.getElementById(\"sequence-0-options\").value));  var diagram = Diagram.parse(code);  diagram.drawSVG(\"sequence-0\", options);</script>"},{"title":"标签测试","date":"2017-04-15T17:12:32.000Z","description":null,"_content":"","source":"_posts/标签测试.md","raw":"---\ntitle: 标签测试\ndate: 2017-04-16 01:12:32\ncategories: 测试\ntags: [编程,人生,学习,总结,思考,c,C++,Jave,测试]\ndescription:\n---\n","slug":"标签测试","published":1,"updated":"2017-04-15T17:14:15.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cko4wk0ys001a0vxa01en7ua9","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"photo","title":"照片文章测试","date":"2017-04-13T08:26:31.000Z","photos":[],"_content":"","source":"_posts/照片文章测试.md","raw":"---\nlayout: photo\ntitle: 照片文章测试\ndate: 2017-04-13 16:26:31\ncategories: life\ntags:\nphotos:\n---\n","slug":"照片文章测试","published":1,"updated":"2017-04-13T13:40:09.000Z","comments":1,"link":"","_id":"cko4wk0ys001b0vxa6idodf2i","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"date":"2017-04-12T10:12:39.000Z","updated":"2017-04-12T10:12:39.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cko4wk0yw001e0vxad75l3qxg","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\">Quick Start</h2>\n<h3 id=\"Create-a-new-post\">Create a new post</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre class=\"line-numbers language-hljs bash\">$ hexo new <span class=\"hljs-string\"><code class=\"language-hljs bash\">$ hexo new <span class=\"hljs-string\">\"My New Post\"</span><br><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\">Run server</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre class=\"line-numbers language-hljs bash\"><code class=\"language-hljs bash\">$ hexo server<br><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\">Generate static files</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre class=\"line-numbers language-hljs bash\"><code class=\"language-hljs bash\">$ hexo generate<br><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\">Deploy to remote sites</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre class=\"line-numbers language-hljs bash\"><code class=\"language-hljs bash\">$ hexo deploy<br><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\">Quick Start</h2>\n<h3 id=\"Create-a-new-post\">Create a new post</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo new <span class=\"hljs-string\">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\">Run server</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo server<br></code></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\">Generate static files</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo generate<br></code></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\">Deploy to remote sites</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo deploy<br></code></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cko4wk0y500010vxa6a2i0olz","category_id":"cko4wk0yb00040vxa2luy5nmg","_id":"cko4wk0yo000w0vxadf7321ny"},{"post_id":"cko4wk0y500010vxa6a2i0olz","category_id":"cko4wk0yg000b0vxac33acr2a","_id":"cko4wk0yo000x0vxa81azcxbq"},{"post_id":"cko4wk0y500010vxa6a2i0olz","category_id":"cko4wk0yi000f0vxafzyo1ca1","_id":"cko4wk0yo000z0vxa6b1p4wxk"},{"post_id":"cko4wk0y500010vxa6a2i0olz","category_id":"cko4wk0yj000i0vxa23fffmfd","_id":"cko4wk0yo00100vxa6m458vha"},{"post_id":"cko4wk0y500010vxa6a2i0olz","category_id":"cko4wk0yk000k0vxa8vxx1vov","_id":"cko4wk0yp00120vxah5qs6xms"},{"post_id":"cko4wk0y500010vxa6a2i0olz","category_id":"cko4wk0ym000p0vxa70o7ak6h","_id":"cko4wk0yp00130vxag1llfpj0"},{"post_id":"cko4wk0ys001a0vxa01en7ua9","category_id":"cko4wk0yt001c0vxa3xnj12af","_id":"cko4wk0yy001h0vxa05fg5ypz"},{"post_id":"cko4wk0ys001b0vxa6idodf2i","category_id":"cko4wk0yy001f0vxa62ih8z38","_id":"cko4wk0yz001j0vxa89labc5k"}],"PostTag":[{"post_id":"cko4wk0y500010vxa6a2i0olz","tag_id":"cko4wk0yc00050vxa8sypcwm1","_id":"cko4wk0yl000m0vxahrih2lre"},{"post_id":"cko4wk0y500010vxa6a2i0olz","tag_id":"cko4wk0yf00090vxa04vt2300","_id":"cko4wk0yl000n0vxa50loeb4x"},{"post_id":"cko4wk0y500010vxa6a2i0olz","tag_id":"cko4wk0yh000d0vxa0isyepm0","_id":"cko4wk0ym000q0vxaf4aoacsh"},{"post_id":"cko4wk0y500010vxa6a2i0olz","tag_id":"cko4wk0yi000g0vxacn0t4y8k","_id":"cko4wk0ym000r0vxa16dyb4dm"},{"post_id":"cko4wk0y500010vxa6a2i0olz","tag_id":"cko4wk0yj000h0vxadez81qhf","_id":"cko4wk0yn000t0vxa03llassg"},{"post_id":"cko4wk0y500010vxa6a2i0olz","tag_id":"cko4wk0yj000j0vxahohuchy6","_id":"cko4wk0yn000u0vxa5vxf54sm"},{"post_id":"cko4wk0y800030vxabzt25a6d","tag_id":"cko4wk0yc00050vxa8sypcwm1","_id":"cko4wk0yp00140vxa74yh30wp"},{"post_id":"cko4wk0y800030vxabzt25a6d","tag_id":"cko4wk0yf00090vxa04vt2300","_id":"cko4wk0yp00150vxac141f2ac"},{"post_id":"cko4wk0y800030vxabzt25a6d","tag_id":"cko4wk0yh000d0vxa0isyepm0","_id":"cko4wk0yp00160vxa7k6wbu8c"},{"post_id":"cko4wk0y800030vxabzt25a6d","tag_id":"cko4wk0yi000g0vxacn0t4y8k","_id":"cko4wk0yp00170vxaf1pa6cwg"},{"post_id":"cko4wk0y800030vxabzt25a6d","tag_id":"cko4wk0yj000h0vxadez81qhf","_id":"cko4wk0yp00180vxa6blgel5c"},{"post_id":"cko4wk0y800030vxabzt25a6d","tag_id":"cko4wk0yj000j0vxahohuchy6","_id":"cko4wk0yp00190vxa6jr18rim"},{"post_id":"cko4wk0ys001a0vxa01en7ua9","tag_id":"cko4wk0yf00090vxa04vt2300","_id":"cko4wk0z1001p0vxah7l28onx"},{"post_id":"cko4wk0ys001a0vxa01en7ua9","tag_id":"cko4wk0yu001d0vxag6ckejs7","_id":"cko4wk0z1001q0vxag2f4akvh"},{"post_id":"cko4wk0ys001a0vxa01en7ua9","tag_id":"cko4wk0yy001g0vxaapvw2qju","_id":"cko4wk0z1001r0vxa0iu79u2i"},{"post_id":"cko4wk0ys001a0vxa01en7ua9","tag_id":"cko4wk0yz001i0vxagaq63bde","_id":"cko4wk0z1001s0vxa8oqv4ata"},{"post_id":"cko4wk0ys001a0vxa01en7ua9","tag_id":"cko4wk0yz001k0vxa026sc1xf","_id":"cko4wk0z1001t0vxaa1pp8tyg"},{"post_id":"cko4wk0ys001a0vxa01en7ua9","tag_id":"cko4wk0yz001l0vxada2p4z39","_id":"cko4wk0z1001u0vxa6dwnagho"},{"post_id":"cko4wk0ys001a0vxa01en7ua9","tag_id":"cko4wk0z0001m0vxa857h08s8","_id":"cko4wk0z1001v0vxa3zcc61ox"},{"post_id":"cko4wk0ys001a0vxa01en7ua9","tag_id":"cko4wk0z0001n0vxadf5uh8ct","_id":"cko4wk0z1001w0vxacqjy05bu"},{"post_id":"cko4wk0ys001a0vxa01en7ua9","tag_id":"cko4wk0z0001o0vxa16ys2f9i","_id":"cko4wk0z1001x0vxah863fpk9"}],"Tag":[{"name":"脚本语言","_id":"cko4wk0yc00050vxa8sypcwm1"},{"name":"编程","_id":"cko4wk0yf00090vxa04vt2300"},{"name":"程序设计","_id":"cko4wk0yh000d0vxa0isyepm0"},{"name":"思考总结","_id":"cko4wk0yi000g0vxacn0t4y8k"},{"name":"前端","_id":"cko4wk0yj000h0vxadez81qhf"},{"name":"效率","_id":"cko4wk0yj000j0vxahohuchy6"},{"name":"人生","_id":"cko4wk0yu001d0vxag6ckejs7"},{"name":"学习","_id":"cko4wk0yy001g0vxaapvw2qju"},{"name":"总结","_id":"cko4wk0yz001i0vxagaq63bde"},{"name":"思考","_id":"cko4wk0yz001k0vxa026sc1xf"},{"name":"c","_id":"cko4wk0yz001l0vxada2p4z39"},{"name":"C++","_id":"cko4wk0z0001m0vxa857h08s8"},{"name":"Jave","_id":"cko4wk0z0001n0vxadf5uh8ct"},{"name":"测试","_id":"cko4wk0z0001o0vxa16ys2f9i"}]}}